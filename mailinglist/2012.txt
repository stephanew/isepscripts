From kseeger at samba.org  Wed Jan 25 12:14:06 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Wed, 25 Jan 2012 20:14:06 +0100
Subject: [Announce] Samba 3.6.2 Available for Download
Message-ID: <E1Rq8II-004M7v-L9@intern.SerNet.DE>

===================================================================
			"Originality is the fine art of remembering
			 what you hear but forgetting where you
			 heard it."

			 Laurence J. Peter
==================================================================


Release Announcements
=====================

This is the latest stable release of Samba 3.6.

Major enhancements in Samba 3.6.2 include:

o  Make Winbind receive user/group information (bug #8371).
o  Several SMB2 fixes.


Changes since 3.6.1:
--------------------


o   Michael Adam <obnox at samba.org>
    * BUG 8528: Fix SEGFAULT from net registry export on not zero terminated
      REG_SZ values.


o   Jeremy Allison <jra at samba.org>
    * BUG 8541: readlink() on Linux clients fails if the symlink target is
      outside of the share.
    * BUG 8542: smbclient posix_open command fails to return correct info on
      open file.
    * BUG 8548: winbind_samlogon_retry_loop ignores logon_parameters flags.
    * BUG 8561: Password change settings not fully observed.
    * BUG 8562: Fix double free error in talloc.
    * BUG 8614: Ensure we correctly calculate reply credits over all returned
      SMB2 replies.
    * BUG 8631: POSIX ACE x permission becomes rx following mapping to and from
      a DACL.
    * BUG 8636: When returning an ACL without SECINFO_DACL requested, we still
      set SEC_DESC_DACL_PRESENT in the type field.
    * BUG 8644: vfs_acl_xattr and vfs_acl_tdb modules can fail to add
      inheritable entries on a directory with no stored ACL.
    * BUG 8663: Fix deleting a symlink if the symlink target is outside of
    * the share.
    * BUG 8664: Fix renaming a symlink if the symlink target is outside of
      the share.
    * BUG 8673: Fix NT ACL issue.
    * BUG 8674: Fix buffer overflow issue with AES encryption in samba traffic
      analyzer.
    * BUG 8679: recvfile code path using splice() on Linux leaves data in the
      pipe on short write.
    * BUG 8687: Fix typo in 'net memberships' usage.
    * BUG 8710: Fix major leak with SMB2 in connections.tdb.
    * Fix a crash bug in the spoolss code.
    * Add new contributing FAQ announcing acceptance of corporate (C).


o   Christian Ambach <ambi at samba.org>
    * BUG 8444: Add an allocation pool to idmap_autorid.
    * BUG 8585: Increase a debug level.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 8623: Fix crash bug when trying to browse Samba printers.


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 8580: Enable inotify if sys or kernel inotify is available.
    * BUG 8618: Fix migrate printer code.


o   Gregor Beck <gbeck at sernet.de>
    * BUG 8528: Fix SEGFAULT from net registry export on not zero terminated
      REG_SZ values.


o   G?nther Deschner <gd at samba.org>
    * BUG 7465: Remove pointless use_memory_krb5_ccache.
    * BUG 8176: Fix perl path.
    * BUG 8591: Fix marshalling of samr_ChangePasswordUser3.
    * BUG 8692: libads: Fix malloc/talloc mismatch in
      ads_keytab_verify_ticket().


o   David Disseldorp <ddiss at suse.de>
    * BUG 4942: DeletePrinterDriverEx deletes files in use.
    * BUG 8575: Add systemd service files.
    * BUG 8606: Fix intermittent print job failures caused by character
      conversion errors.
    * BUG 8697: Make DeletePrinterDriverEx remove printer driver files.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 8531: Make DSO_EXPORTS_CMD more portable.
    * BUG 8616: Allow to set TCP_NODELAYACK socket option on AIX.
    * BUG 8652: Document the "ignore system acls" option of vfs_acl_xattr and
      vfs_acl_tdb vfs modules.


o   Frank Lahm <franklahm at googlemail.com>
    * BUG 8419: Make VFS op "streaminfo" stackable.


o   Volker Lendecke <vl at samba.org>
    * BUG 8371: Make Winbind receive user/group information.
    * BUG 8639: Fix the vfs_commit module.
    * BUG 8686: Packet validation checks can be done before length validation
      causing uninitialized memory read.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 5326: Fix cli_write_and_x() against OS/2 print shares.
    * BUG 8357: Grant credits in async interim responses (SMB2).
    * BUG 8560: Make SMB2 handle compound request headers in the same way
      as Windows.
    * BUG 8573: Fix alignment in the non-extended-security negprot.
    * BUG 8586: libsmb: Only align unicode pipe_name.
    * BUG 8579: smb2_flush: Don't send uninitialized memory.
    * BUG 8592: Don't limit the number of open dptrs for SMB2.
    * BUG 8593: Fix a crash bug in cldap_socket_recv_dgram().
    * BUG 8684: Try ctdbd_init_connection() as root.


o   Masafumi Nakayama <MASA23 at jp.ibm.com>
    * BUG 563: Fix 'smbclient tar' for files greater than 8GB on BE machines.


o   Matthieu Patou <mat at matws.net>
    * BUG 8600: Make cldap work over IPv6.
    * BUG 8674: Fix buffer overflow issue with AES encryption in samba traffic
      analyzer.


o   Andreas Schneider <asn at samba.org>
    * BUG 8550: Fix setting the machine account password.
    * BUG 8575: Add systemd service files.
    * BUG 8608: Winbind: Don't fail on users without a uid.
    * BUG 8628: libsmb: Don't duplicate Kerberos service tickets.
    * BUG 8643: Add an update function for Winbind cache.
    * BUG 8678: Fix Winbind segfault if we can't map the last user.


o   Karolin Seeger <kseeger at samba.org>
    * BUG 7705: Fix some RHEL packaging issues.


o   Richard Sharpe <realrichardsharpe at gmail.com>
    * BUG 8607: Improve configure.in so it can be used outside the Samba source
      tree.


o   Brad Smith <brad at comstyle.com>
    * BUG 8525: Fix bug with sys_fseek() wrapper on *BSD / OS X).


o   Henry Wong <henry at stuffedcow.net>
    * BUG 8384: Fix Windows XP clients crashing smbd process every once in a
      while.


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 3.6 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/stable

The release notes are available online at:

        http://www.samba.org/samba/history/samba-3.6.2.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team




From kseeger at samba.org  Sun Jan 29 13:50:46 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Sun, 29 Jan 2012 21:50:46 +0100
Subject: [Announce] Samba 3.6.3 Security Release Available
Message-ID: <E1Rrbi3-008s9A-2v@intern.SerNet.DE>

Release Announcements
=====================

This is a security release in order to address
CVE-2012-0817 (Memory leak/Denial of service).

o  CVE-2012-0817:
   The Samba File Serving daemon (smbd) in Samba versions
   3.6.0 to 3.6.2 is affected by a memory leak that can
   cause a server denial of service.


Changes since 3.6.2:
--------------------


o   Jeremy Allison <jra at samba.org>
    * BUG 8724: Fix memory leak in parent smbd on connection.


o   Ira Cooper <samba at ira.wakeful.net>
    * BUG 8724: Fix memory leak in parent smbd on connection.


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 3.6 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/stable

The release notes are available online at:

        http://www.samba.org/samba/history/samba-3.6.3.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team




From abartlet at samba.org  Thu Feb 23 23:32:49 2012
From: abartlet at samba.org (Andrew Bartlett)
Date: Fri, 24 Feb 2012 17:32:49 +1100
Subject: [ANNOUNCE] Samba 4.0 alpha 18
Message-ID: <1330065169.21580.21.camel@obed>

We are proud to a announce another alpha release of Samba 4.0, alpha 18

What's new in Samba 4.0 alpha18
===============================

Samba 4.0 will be the next version of the Samba suite and incorporates
all the technology found in both the Samba4 alpha series and the
stable 3.x series. The primary additional features over Samba 3.6 are
support for the Active Directory logon protocols used by Windows 2000
and above.

WARNINGS
========

Samba4 alpha18 is not a final Samba release, however we are now making
good progress towards a Samba 4.0 release, of which this is a preview.
Be aware the this release contains both the technology of Samba 3.6
(that you can reasonably expect to upgrade existing Samba 3.x releases
to) and the AD domain controller work previously known as 'samba4'.

While binaries for the stable file server are provided in this
release, for a stable, supported file server, Samba3 domain or AD
domain member installation, please run a Samba 3.x release, as we are
still bedding down the new single build system.

Samba4 is subjected to an awesome battery of tests on an automated
basis, we have found Samba 4.0 to be very stable in it's behavior.
However, we still recommend against upgrading production servers from
Samba 3.x release to Samba 4.0 alpha at this stage.

If you are upgrading, or looking to develop, test or deploy Samba 4.0
alpha releases, you should backup all configuration and data.

NEW FEATURES
============

Samba 4.0 alpha supports the server-side of the Active Directory logon
environment used by Windows 2000 and later, so we can do full domain
join and domain logon operations with these clients.

Our Domain Controller (DC) implementation includes our own built-in
LDAP server and Kerberos Key Distribution Center (KDC) as well as the
Samba3-like logon services provided over CIFS.  We correctly generate
the infamous Kerberos PAC, and include it with the Kerberos tickets we
issue.

Samba 4.0 alpha ships with two distinct file servers.  The file server
from the Samba 3.x series is 'smbd', and works with the binaries users
would expect from that series (nmbd, winbindd, smbpasswd).

Samba 4.0 also ships with a new file server, which is tuned to match
the requirements of an AD domain controller.  Users should not use the
file server in the 'samba' binary for non-DC related tasks.

A new scripting interface has been added to Samba 4, allowing Python
programs to interface to Samba's internals, and many tools and
internal workings of the DC code is now implemented in python.


CHANGES SINCE alpha17
=====================

For a list of changes since alpha 17, please see the git log.

$ git clone git://git.samba.org/samba.git
$ cd samba.git
$ git log samba-4.0.0alpha17..samba-4.0.0alpha18

Some major user-visible changes include:

Improvements to DNS servers.  Samba4 now has 3 options for the
handling of DNS:  The default option is to use the BIND 9.8 DLZ plugin,
which stores the information about the DNS zone in the directory.
There is also an internal DNS server (but which does not support
secure DNS updates at this time) and the flat file BIND 9.8 backend
(storing the data in traditional zone files).

To migrate from zone files to directory based DNS servers, a migration
tool (upgradedns) has been added.

samba-tool dns commands to manage DNS records stored in directory.

smbwrapper (a user-space file system based on LD_PRELOAD) has been
removed.  

Improvement to the upgrade process between Samba 3.x domains and Samba
4.0 AD domains (samba-tool domain samba3upgrade).

Some major but less visible changes include:

Major work to bridge the code gap between the major parts of the code
base, including a common loadparm wrapper, smb client library, as well
as NTLMSSP, GSSAPI and SPNEGO code as part of the GENSEC
authentication and authorization stack.

Preparation work for moving to TDB2, a new version of Samba's core TDB
database.

smbtorture tests for SMB 2 and SMB 2.2 as the team improves and
develops support these new protocols.

Major cleanup and removal of global variables in the smbd SMB and SMB2 server.

Heimdal security issue 2012-01-11 - libkrb5 checksum - denial of serice
http://www.h5l.org//advisories.html?show=2012-01-11

KNOWN ISSUES
============

- upgradeprovision should not be run when upgrading to this release
  from a recent release.  No important database format changes have
  been made since alpha16.  

- The BIND 9 DLZ plugin is compatible only with BIND 9.8, not BIND 9.9. 

- Systems with tdb or ldb installed as a system library may have
  difficulty building this release of Samba4.  The --disable-tdb2
  configure switch may be of assistance.  (Distributors who (rightly)
  have difficulty with this may wish to wait until a future release,
  which will soon fix this issue).

- Installation on systems without a system iconv (and developer
  headers at compile time) is known to cause errors when dealing with
  non-ASCII characters.

- In some situations, group members may not be upgraded by the
  samba-tool domain samba3upgrade tool

- Domain member support in the 'samba' binary is in it's infancy, and
  is not comparable to the support found in winbindd.  As such, do not
  use the 'samba' binary (provided for the AD server) on a member
  server.

- There is no printing support in the 'samba' binary (use smbd instead)

- There is no NetBIOS browsing support (network neighbourhood) in the
  'samba' binary (use nmbd and smbd instead)

- Clock Synchronisation is critical.  Many 'wrong password' errors are
  actually due to Kerberos objecting to a clock skew between client
  and server.  (The NTP work in the previous alphas are partly to assist
  with this problem).

- The DRS replication code may fail.  Please contact the team if you
  experience issues with DRS replication, as we have fixed many issues
  here in response to feedback from our production users. 

RUNNING Samba 4.0 as an AD DC
=============================

A short guide to setting up Samba 4 as an AD DC can be found on the wiki:

  http://wiki.samba.org/index.php/Samba4/HOWTO

#######################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 4.0 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================

Download Details
================

The release tarball is available from the following location:
 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0alpha18.tar.gz

This release has been signed using GPG with Andrew's GPG key 28B436BB).

 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0alpha18.tar.asc

To verify that the signature is correct, make sure that the tarball has
been unzipped and run:

$ gpg --verify samba-4.0.0alpha17.tar.asc

Happy testing!

The Samba team
-- 
Andrew Bartlett                                http://samba.org/~abartlet/
Authentication Developer, Samba Team           http://samba.org




From kseeger at samba.org  Mon Mar 12 13:31:06 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Mon, 12 Mar 2012 20:31:06 +0100
Subject: [ANNOUNCE] Samba 3.5.13 Available for Download
Message-ID: <E1S7AxX-007vKA-4P@intern.SerNet.DE>

Please note that the tarball is available, but the v3-6-stable git branch
and the websites cannot be updated right now because of technical
problems. Thank you for your understanding.

===================================================================
				"A great artist is always
				 before his time or behind it."

				 George Edward Moore
==================================================================


Release Announcements
=====================

This is the latest stable release of Samba 3.5.

Major enhancements in Samba 3.5.13 include:

o  Fix a crash bug in cldap_socket_recv_dgram() (bug #8593).
o  Fully observe password change settings (bug #8561).
o  Fix NT ACL issue (bug #8673).
o  Fix segfault in Winbind if we can't map the last user (bug #8678).


Changes since 3.5.12:
--------------------


o   Michael Adam <obnox at samba.org>
    * BUG 8327: Fix config reload to reload shares from registry.


o   Jeremy Allison <jra at samba.org>
    * BUG 8139: Ignore SMBecho errors.
    * BUG 8521: Fix Winbind cache timeout expiry test.
    * BUG 8561: Fully observe password change settings.
    * BUG 8631: Fix POSIX ACE x permission mapping to and from a DACL.
    * BUG 8636: When returning an ACL without SECINFO_DACL requested, we still
      set SEC_DESC_DACL_PRESENT in the type field.
    * BUG 8644: Make sure that vfs_acl_xattr and vfs_acl_tdb modules add
      inheritable entries on a directory with no stored ACL.
    * BUG 8663: Fix deleting a symlink if the symlink target is outside of the
    * share.
    * BUG 8664: Fix renaming a symlink if the symlink target is outside of the
      share.
    * BUG 8673: Fix NT ACL issue.
    * BUG 8679: Make sure that recvfile code path using splice() on Linux
      does not leave data in the pipe on short write.
    * BUG 8687: Fix typo in 'net memberships' usage.


o   Christian Ambach <christian.ambach at de.ibm.com>
    * BUG 8658: Add timeouts to Winbind cache.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 8727: Do not limit read replies to NBT packet sizes.


o   G?nther Deschner <gd at samba.org>
    * BUG 8176: Fix perl path.
    * BUG 8692: Fix malloc/talloc mismatch in ads_keytab_verify_ticket().


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 8652: Document the ignore system acls option of vfs_acl_xattr and
      vfs_acl_tdb.


o   Jeff Layton <jlayton at redhat.com>
    * BUG 8648: Document more undocumented mount.cifs options.


o   Volker Lendecke <vl at samba.org>
    * BUG 8639: Fix the vfs_commit module.
    * BUG 8686: Packet validation checks can be done before length validation
      causing uninitialized memory read.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 5326: Fix cli_write_and_x() against OS/2 print shares.
    * BUG 8562: Fix double free error (talloc).
    * BUG 8593: Fix a crash bug in cldap_socket_recv_dgram().
    * BUG 8684: Try ctdbd_init_connection() as root.


o   Masafumi Nakayama <MASA23 at jp.ibm.com>
    * BUG 563: Fix 'smbclient tar' for files greater than 8GB on BE machines.


o   Matthieu Patou <mat at matws.net>
    * BUG 8599: Make WINBINDD_PAM_AUTH_CRAP return valid user session key.
    * BUG 8771: Make Winbind change faster from DC1 to DC2.


o   Andreas Schneider <asn at samba.org>
    * BUG 8608: Don't fail on users without a uid (Winbind).
    * BUG 8628: Don't duplicate Kerberos service tickets.
    * BUG 8645: Add missing prefixpath options for mount.cifs manpage.
    * BUG 8658: Add an update function for Winbind cache.
    * BUG 8678: Fix segfault in Winbind if we can't map the last user.


o   Karolin Seeger <kseeger at samba.org>
    * BUG 7705: Fix rpm build issues on RHEL4.


o   Richard Sharpe <realrichardsharpe at gmail.com>
    * BUG 8607: Simplify building modules outside the Samba source tree.


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 3.5 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/stable

The release notes are available online at:

        http://www.samba.org/samba/history/samba-3.5.13.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team




From kseeger at samba.org  Tue Apr 10 09:21:19 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Tue, 10 Apr 2012 17:21:19 +0200
Subject: [Announce] Samba 3.6.4, 3.5.14 and 3.4.16 Security Releases Available
Message-ID: <E1SHcsi-000w5A-87@intern.SerNet.DE>

Release Announcements
=====================

Samba 3.6.4, 3.5.14 and 3.4.16 are security releases in order to
address CVE-2012-1182.

o  CVE-2012-1182:
   Samba 3.0.x to 3.6.3 are affected by a
   vulnerability that allows remote code
   execution as the "root" user.


Changes:
--------


o   Stefan Metzmacher <metze at samba.org>
    *BUG 8815: PIDL based autogenerated code allows overwriting beyond of
     allocated array (CVE-2012-1182).


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba corresponding product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/

The release notes are available online at:

        http://www.samba.org/samba/ftp/history/samba-3.6.4.html
        http://www.samba.org/samba/ftp/history/samba-3.5.14.html
        http://www.samba.org/samba/ftp/history/samba-3.4.16.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team


From kseeger at samba.org  Tue Apr 10 11:06:34 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Tue, 10 Apr 2012 19:06:34 +0200
Subject: [Announce] Samba 3.6.4,
	3.5.14 and 3.4.16 Security Releases Available
In-Reply-To: <E1SHcsi-000w5A-87@intern.SerNet.DE>
References: <E1SHcsi-000w5A-87@intern.SerNet.DE>
Message-ID: <E1SHeWY-0010BR-87@intern.SerNet.DE>

Further information can be found in the security advisory:
http://www.samba.org/samba/security/CVE-2012-1182

Patches for older versions are available at
http://www.samba.org/samba/history/security.html.

This defect has been tracked in the following bug report:
https://bugzilla.samba.org/show_bug.cgi?id=8815.


On Tue, Apr 10, 2012 at 05:21:19PM +0200, Karolin Seeger wrote:
> Release Announcements
> =====================
> 
> Samba 3.6.4, 3.5.14 and 3.4.16 are security releases in order to
> address CVE-2012-1182.
> 
> o  CVE-2012-1182:
>    Samba 3.0.x to 3.6.3 are affected by a
>    vulnerability that allows remote code
>    execution as the "root" user.
> 
> 
> Changes:
> --------
> 
> 
> o   Stefan Metzmacher <metze at samba.org>
>     *BUG 8815: PIDL based autogenerated code allows overwriting beyond of
>      allocated array (CVE-2012-1182).
> 
> 
> ######################################################################
> Reporting bugs & Development Discussion
> #######################################
> 
> Please discuss this release on the samba-technical mailing list or by
> joining the #samba-technical IRC channel on irc.freenode.net.
> 
> If you do report problems then please try to send high quality
> feedback. If you don't provide vital information to help us track down
> the problem then you will probably be ignored.  All bug reports should
> be filed under the Samba corresponding product in the project's Bugzilla
> database (https://bugzilla.samba.org/).
> 
> 
> ======================================================================
> == Our Code, Our Bugs, Our Responsibility.
> == The Samba Team
> ======================================================================
> 
> 
> ================
> Download Details
> ================
> 
> The uncompressed tarballs and patch files have been signed
> using GnuPG (ID 6568B7EA).  The source code can be downloaded
> from:
> 
>         http://download.samba.org/samba/ftp/
> 
> The release notes are available online at:
> 
>         http://www.samba.org/samba/ftp/history/samba-3.6.4.html
>         http://www.samba.org/samba/ftp/history/samba-3.5.14.html
>         http://www.samba.org/samba/ftp/history/samba-3.4.16.html
> 
> Binary packages will be made available on a volunteer basis from
> 
>         http://download.samba.org/samba/ftp/Binary_Packages/
> 
> Our Code, Our Bugs, Our Responsibility.
> (https://bugzilla.samba.org/)
> 
>                         --Enjoy
>                         The Samba Team
> 
> 

-- 
Samba			http://www.samba.org
SerNet			http://www.sernet.de
sambaXP			http://www.sambaxp.org


From abartlet at samba.org  Tue Apr 10 21:06:43 2012
From: abartlet at samba.org (Andrew Bartlett)
Date: Wed, 11 Apr 2012 13:06:43 +1000
Subject: [ANNOUNCE] Samba 4.0 alpha 19 for CVE-2012-1182
Message-ID: <1334113603.21555.11.camel@obed>

We are proud to a announce another alpha release of Samba 4.0, alpha 19


THIS IS A SECURITY RELEASE for CVE-2012-1182, which impacted on Samba4 as well.


What's new in Samba 4 alpha19
=============================

Samba 4.0 will be the next version of the Samba suite and incorporates
all the technology found in both the Samba4 alpha series and the
stable 3.x series. The primary additional features over Samba 3.6 are
support for the Active Directory logon protocols used by Windows 2000
and above.

WARNINGS
========

Samba4 alpha19 is not a final Samba release, however we are now making
good progress towards a Samba 4.0 release, of which this is a preview.
Be aware the this release contains both the technology of Samba 3.6
(that you can reasonably expect to upgrade existing Samba 3.x releases
to) and the AD domain controller work previously known as 'samba4'.

While binaries for the stable file server are provided in this
release, for a stable, supported file server, Samba3 domain or AD
domain member installation, please run a Samba 3.x release, as we are
still bedding down the new single build system.

Samba4 is subjected to an awesome battery of tests on an automated
basis, we have found Samba 4.0 to be very stable in it's behavior.
However, we still recommend against upgrading production servers from
Samba 3.x release to Samba 4.0 alpha at this stage.

If you are upgrading, or looking to develop, test or deploy Samba 4.0
alpha releases, you should backup all configuration and data.

NEW FEATURES
============

Samba 4.0 alpha supports the server-side of the Active Directory logon
environment used by Windows 2000 and later, so we can do full domain
join and domain logon operations with these clients.

Our Domain Controller (DC) implementation includes our own built-in
LDAP server and Kerberos Key Distribution Center (KDC) as well as the
Samba3-like logon services provided over CIFS.  We correctly generate
the infamous Kerberos PAC, and include it with the Kerberos tickets we
issue.

Samba 4.0 alpha ships with two distinct file servers.  The file server
from the Samba 3.x series is 'smbd', and works with the binaries users
would expect from that series (nmbd, winbindd, smbpasswd).

Samba 4.0 also ships with a new file server, which is tuned to match
the requirements of an AD domain controller.  Users should not use the
file server in the 'samba' binary for non-DC related tasks.

A new scripting interface has been added to Samba 4, allowing Python
programs to interface to Samba's internals, and many tools and
internal workings of the DC code is now implemented in python.


CHANGES SINCE alpha18
=====================

For a list of changes since alpha 18, please see the git log.

$ git clone git://git.samba.org/samba.git
$ cd samba.git
$ git log samba-4.0.0alpha18..samba-4.0.0alpha19

Some major user-visible changes include:

CVE-2012-1182:
   Samba4 is are affected by a vulnerability that allows remote code
   execution as the "root" user.

Portability to MacOS X.  By using the CC_MD5*() routines we no longer
segfault on MacOS X.

The source4/librpc layer has been reworked to be much more robust to
connection failures.

security=share in smbd has now been removed.

A segfault in vfs_aio_fork for the smbd file server has been fixed

ldbadd and ldbmodify now handle each ldif file in a single
transaction, when modifying a local ldb.

Further improvements to the dlz_bind9 and internal DNS servers.


Some major but less visible changes include:

Initial support for s3fs, using the smbd file server in the AD Domain
controller has been added (but not yet finished, so not exposed)

Samba now only uses the _FILE_OFFSET_BITS=64 API for accessing large
files, not the _LARGEFILE64_SOURCE API.

All Samba daemons now monitor stdin when launched in the foreground,
and shutdown when stdin is closed.  We also ensure that all child
processes are clened up by a similar mechanism.  This ensures that
stray processes do not hang around, particularly in make test.

Further preparation work for moving to TDB2, a new version of Samba's core TDB
database.

Early implementation work on the SMB 2.2 protocol client and server as
the team improves and develops support these new protocols.

The last of the old-style krb5 ticket handling has been removed.


KNOWN ISSUES
============

- upgradeprovision should not be run when upgrading to this release
  from a recent release.  No important database format changes have
  been made since alpha16.  

- The BIND 9 DLZ plugin is compatible only with BIND 9.8, not BIND 9.9. 

- Systems with tdb or ldb installed as a system library may have
  difficulty building this release of Samba4.  The --disable-tdb2
  configure switch may be of assistance.

- Installation on systems without a system iconv (and developer
  headers at compile time) is known to cause errors when dealing with
  non-ASCII characters.

- In some situations, group members may not be upgraded by the
  samba-tool domain samba3upgrade tool

- Domain member support in the 'samba' binary is in it's infancy, and
  is not comparable to the support found in winbindd.  As such, do not
  use the 'samba' binary (provided for the AD server) on a member
  server.

- There is no printing support in the 'samba' binary (use smbd instead)

- There is no NetBIOS browsing support (network neighbourhood) in the
  'samba' binary (use nmbd and smbd instead)

- Clock Synchronisation is critical.  Many 'wrong password' errors are
  actually due to Kerberos objecting to a clock skew between client
  and server.  (The NTP work in the previous alphas are partly to assist
  with this problem).

- The DRS replication code may fail.  Please contact the team if you
  experience issues with DRS replication, as we have fixed many issues
  here in response to feedback from our production users. 

RUNNING Samba 4.0 as an AD DC
=============================

A short guide to setting up Samba 4 as an AD DC can be found on the wiki:

  http://wiki.samba.org/index.php/Samba4/HOWTO

#######################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 4.0 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


Download Details
================

The release tarball is available from the following location:
 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0alpha19.tar.gz

This release has been signed using GPG with Andrew's GPG key 28B436BB).

 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0alpha19.tar.asc

To verify that the signature is correct, make sure that the tarball has
been unzipped and run:

$ gpg --verify samba-4.0.0alpha19.tar.asc

Happy testing!

The Samba team
-- 
Andrew Bartlett                                http://samba.org/~abartlet/
Authentication Developer, Samba Team           http://samba.org





From kseeger at samba.org  Mon Apr 30 06:46:35 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Mon, 30 Apr 2012 14:46:35 +0200
Subject: [Announce] Samba 3.6.5, 3.5.15 and 3.4.17 Security Releases Available
Message-ID: <E1SOpzw-0059lP-Jj@intern.SerNet.DE>

Release Announcements
=====================

Samba 3.6.5, 3.5.15 and 3.4.17 are security releases in order to
address CVE-2012-2111.

o  CVE-2012-2111:
   Samba 3.4.x to 3.6.4 are affected by a vulnerability that allows arbitrary
   users to modify privileges on a file server.


Changes:
--------


o   Jeremy Allison <jra at samba.org>
    * Fix  incorrect permission checks when granting/removing
      privileges (CVE-2012-2111).


The original Security Advisory is available at
http://www.samba.org/samba/security/CVE-2012-2111.

Patches for older versions are available at
http://www.samba.org/samba/history/security.html.


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba corresponding product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/

The release notes are available online at:

        http://www.samba.org/samba/ftp/history/samba-3.6.5.html
        http://www.samba.org/samba/ftp/history/samba-3.5.15.html
        http://www.samba.org/samba/ftp/history/samba-3.4.17.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team


From abartlet at samba.org  Tue May  1 04:04:09 2012
From: abartlet at samba.org (Andrew Bartlett)
Date: Tue, 01 May 2012 20:04:09 +1000
Subject: [ANNOUNCE] Samba 4.0 alpha 20 for CCVE-2012-2111
Message-ID: <1335866649.32406.4.camel@obed>

We are proud to a announce another alpha release of Samba 4.0, alpha 20


THIS IS A SECURITY RELEASE for CVE-2012-2111, which impacts on users 
running the smbd file server from Samba4 alpha releases, but not users
running the AD Domain Controller.

What's new in Samba 4 alpha20
=============================

Samba 4.0 will be the next version of the Samba suite and incorporates
all the technology found in both the Samba4 alpha series and the
stable 3.x series. The primary additional features over Samba 3.6 are
support for the Active Directory logon protocols used by Windows 2000
and above.

SECURITY RELEASE
================

This is a security release in order to address CVE-2012-2111
(Incorrect permission checks when granting/removing privileges can
compromise file server security).

o  CVE-2012-2111:
   Samba 3.4.x to 3.6.4 are affected by a
   vulnerability that allows arbitrary users
   to modify privileges on a file server.

This is in regards to the smbd file server, which is shipped in Samba
4.0 alpha.  The AD DC is not directly impacted, as the LSA
implementation differs.

WARNINGS
========

Samba4 alpha20 is not a final Samba release, however we are now making
good progress towards a Samba 4.0 release, of which this is a preview.
Be aware the this release contains both the technology of Samba 3.6
(that you can reasonably expect to upgrade existing Samba 3.x releases
to) and the AD domain controller work previously known as 'samba4'.

While binaries for the stable file server are provided in this
release, for a stable, supported file server, Samba3 domain or AD
domain member installation, please run a Samba 3.x release, as we are
still bedding down the new single build system.

Samba4 is subjected to an awesome battery of tests on an automated
basis, we have found Samba 4.0 to be very stable in it's behavior.
However, we still recommend against upgrading production servers from
Samba 3.x release to Samba 4.0 alpha at this stage.

If you are upgrading, or looking to develop, test or deploy Samba 4.0
alpha releases, you should backup all configuration and data.

NEW FEATURES
============

Samba 4.0 alpha supports the server-side of the Active Directory logon
environment used by Windows 2000 and later, so we can do full domain
join and domain logon operations with these clients.

Our Domain Controller (DC) implementation includes our own built-in
LDAP server and Kerberos Key Distribution Center (KDC) as well as the
Samba3-like logon services provided over CIFS.  We correctly generate
the infamous Kerberos PAC, and include it with the Kerberos tickets we
issue.

Samba 4.0 alpha ships with two distinct file servers.  The file server
from the Samba 3.x series is 'smbd', and works with the binaries users
would expect from that series (nmbd, winbindd, smbpasswd).

Samba 4.0 also ships with a new file server, which is tuned to match
the requirements of an AD domain controller.  Users should not use the
file server in the 'samba' binary for non-DC related tasks.

A new scripting interface has been added to Samba 4, allowing Python
programs to interface to Samba's internals, and many tools and
internal workings of the DC code is now implemented in python.


CHANGES SINCE alpha19
=====================

For a list of changes since alpha 19, please see the git log.

$ git clone git://git.samba.org/samba.git
$ cd samba.git
$ git log samba-4.0.0alpha19..samba-4.0.0alpha20

Some major user-visible changes include:

Improvements to the 'samba-tool domain samba3upgrade' and
samba_upgradedns tools

Stability improvements in the Samba4 winbind implementation (that
used in the AD DC mode).

The BIND 9 DLZ plugin is now compatible with both BIND 9.8, and BIND 9.9.

dbcheck and runtime protection for the fSMORoleOwner attribute.  This
allows us to recover from a situation where the fSMORoleOwner is
deleted.

Support for storing the posixAccount and other auxiliary objectClass
values (the values are not used by Samba as an AD DC at this stage,
but may be used by clients).


Some major but less visible changes include:

Continued early implementation work on the SMB 2.2 protocol client and server as
the team improves and develops support these new protocols.

Initial work to build Samba using MIT kerberos in the top level waf
build system.  This is not complete at this time, but good progress is
being made.


KNOWN ISSUES
============

- upgradeprovision should not be run when upgrading to this release
  from a recent release.  No important database format changes have
  been made since alpha16.  

- Installation on systems without a system iconv (and developer
  headers at compile time) is known to cause errors when dealing with
  non-ASCII characters.

- In some situations, group members may not be upgraded by the
  samba-tool domain samba3upgrade tool

- Domain member support in the 'samba' binary is in it's infancy, and
  is not comparable to the support found in winbindd.  As such, do not
  use the 'samba' binary (provided for the AD server) on a member
  server.

- There is no printing support in the 'samba' binary (use smbd instead)

- There is no NetBIOS browsing support (network neighbourhood) in the
  'samba' binary (use nmbd and smbd instead)

- Clock Synchronisation is critical.  Many 'wrong password' errors are
  actually due to Kerberos objecting to a clock skew between client
  and server.  (The NTP work in the previous alphas are partly to assist
  with this problem).

- The DRS replication code may fail.  Please contact the team if you
  experience issues with DRS replication, as we have fixed many issues
  here in response to feedback from our production users. 

RUNNING Samba 4.0 as an AD DC
=============================

A short guide to setting up Samba 4 as an AD DC can be found on the wiki:

  http://wiki.samba.org/index.php/Samba4/HOWTO

#######################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 4.0 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


Download Details
================

The release tarball is available from the following location:
 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0alpha20.tar.gz

This release has been signed using GPG with Andrew's GPG key 28B436BB).

 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0alpha20.tar.asc

To verify that the signature is correct, make sure that the tarball has
been unzipped and run:

$ gpg --verify samba-4.0.0alpha20.tar.asc

Happy testing!

The Samba team
-- 
Andrew Bartlett                                http://samba.org/~abartlet/
Authentication Developer, Samba Team           http://samba.org






From abartlet at samba.org  Fri May 25 00:24:18 2012
From: abartlet at samba.org (Andrew Bartlett)
Date: Fri, 25 May 2012 16:24:18 +1000
Subject: [ANNOUNCE] Samba 4.0 alpha 21
Message-ID: <1337927058.17191.149.camel@obed>

We are proud to a announce another alpha release of Samba 4.0, alpha 21

What's new in Samba 4 alpha21
=============================

Samba 4.0 will be the next version of the Samba suite and incorporates
all the technology found in both the Samba4 alpha series and the
stable 3.x series. The primary additional features over Samba 3.6 are
support for the Active Directory logon protocols used by Windows 2000
and above.


WARNINGS
========

Samba4 alpha21 is not a final Samba release, however we are now making
good progress towards a Samba 4.0 release, of which this is a preview.
Be aware the this release contains the best of all of Samba's
technology parts, both a file server (that you can reasonably expect
to upgrade existing Samba 3.x releases to) and the AD domain
controller work previously known as 'samba4'.

Samba4 is subjected to an awesome battery of tests on an automated
basis, we have found Samba 4.0 to be very stable in it's behavior.
However, we still recommend against upgrading production servers from
Samba 3.x release to Samba 4.0 alpha at this stage.

In particular note that the new default configuration 's3fs' may have
different stability characteristics compared with our previous default
file server.  We are making this release so that we can find and fix
any of these issues that arise in the real world.  New AD DC installations
can provision with --use-ntvfs to obtain the previous default file
server.  Existing installations will be unaffected at this stage.

If you are upgrading, or looking to develop, test or deploy Samba 4.0
alpha releases, you should backup all configuration and data.

NEW FEATURES
============

Samba 4.0 alpha supports the server-side of the Active Directory logon
environment used by Windows 2000 and later, so we can do full domain
join and domain logon operations with these clients.

Our Domain Controller (DC) implementation includes our own built-in
LDAP server and Kerberos Key Distribution Center (KDC) as well as the
Samba3-like logon services provided over CIFS.  We correctly generate
the infamous Kerberos PAC, and include it with the Kerberos tickets we
issue.

Samba 4.0 alpha ships with two distinct file servers.  We now use the
file server from the Samba 3.x series 'smbd' for all file serving by
default.  For pure file server work, the binaries users would expect
from that series (nmbd, winbindd, smbpasswd) continue to be available.

Samba 4.0 also ships with the 'NTVFS' file server.  This file server
is what was used in all previous alpha releases of Samba 4.0, and is
tuned to match the requirements of an AD domain controller.  We
continue to support this, not only to provide continuity to
installations that have deployed it as part of an AD DC, but also as a
running example of the NT-FSA architecture we expect to move smbd to in
the longer term.  

As mentioned above, this change to the default file server may cause
instability, as we learn about the real-world interactions between
these two key components. 

A new scripting interface has been added to Samba 4, allowing Python
programs to interface to Samba's internals, and many tools and
internal workings of the DC code is now implemented in python.  



CHANGES SINCE alpha20
=====================

For a list of changes since alpha20, please see the git log.

$ git clone git://git.samba.org/samba.git
$ cd samba.git
$ git log samba-4.0.0alpha20..samba-4.0.0alpha21

Some major user-visible changes include:

For installations that do not need an AD Domain controller, we can now
build using MIT Kerberos from the local system.  This is important for
some distributors.  This is enabled with the new --with-system-mitkrb5
configure option.  A synonym is the new --without-ad-dc option.

The 's3fs' effort has moved to a new stage, with this now being the
default mode of operation for new provisions.  

The BIND 9 DLZ plugin has had some stability improvements under BIND reloads.

The 'samba-tool domain samba3upgrade' tool will now generally import
all group members, and correctly imports domain password policies. 

Some major but less visible changes include:

Continued early implementation work on the SMB 2.2 protocol client and server as
the team improves and develops support these new protocols.


KNOWN ISSUES
============

- We are making this alpha release to gain real-world use of the 's3fs'
  file server combination we will use for the Samba 4.0 release.
  Users should expect some rough edges: in particular, there are
  warnings about invalid parameters from the two respective parameter
  parsing engines.

- There have been improvements to FreeBSD support, but more work is
  still required to finish this effort

- upgradeprovision should not be run when upgrading to this release
  from a recent release.  No important database format changes have
  been made since alpha16.  

- Installation on systems without a system iconv (and developer
  headers at compile time) is known to cause errors when dealing with
  non-ASCII characters.

- Domain member support in the 'samba' binary is in it's infancy, and
  is not comparable to the support found in winbindd.  As such, do not
  use the 'samba' binary (provided for the AD server) on a member
  server.

- There is no NetBIOS browsing support (network neighbourhood) in the
  'samba' binary (use nmbd and smbd instead)

- Clock Synchronisation is critical.  Many 'wrong password' errors are
  actually due to Kerberos objecting to a clock skew between client
  and server.  (The NTP work in the previous alphas are partly to assist
  with this problem).

- The DRS replication code may fail.  Please contact the team if you
  experience issues with DRS replication, as we have fixed many issues
  here in response to feedback from our production users. 

RUNNING Samba 4.0 as an AD DC
=============================

A short guide to setting up Samba 4 as an AD DC can be found on the wiki:

  http://wiki.samba.org/index.php/Samba4/HOWTO

#######################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 4.0 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


Download Details
================

The release tarball is available from the following location:
 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0alpha21.tar.gz

This release has been signed using GPG with Andrew's GPG key 28B436BB).

 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0alpha21.tar.asc

To verify that the signature is correct, make sure that the tarball has
been unzipped and run:

$ gpg --verify samba-4.0.0alpha21.tar.asc

Happy testing!

The Samba team
-- 
Andrew Bartlett                                http://samba.org/~abartlet/
Authentication Developer, Samba Team           http://samba.org







From abartlet at samba.org  Tue Jun  5 06:45:41 2012
From: abartlet at samba.org (Andrew Bartlett)
Date: Tue, 05 Jun 2012 22:45:41 +1000
Subject: [ANNOUNCE] Samba 4.0 beta1
Message-ID: <1338900341.10321.29.camel@obed>

We are proud to a announce our first beta release of Samba 4.0, beta 1

What's new in Samba 4 beta1
=============================

Samba 4.0 will be the next version of the Samba suite and incorporates
all the technology found in both the Samba4 alpha series and the
stable 3.x series. The primary additional features over Samba 3.6 are
support for the Active Directory logon protocols used by Windows 2000
and above.


WARNINGS
========

Samba4 beta1 is not a final Samba release, however we are now making
good progress towards a Samba 4.0 release, of which this is a preview.
Be aware the this release contains the best of all of Samba's
technology parts, both a file server (that you can reasonably expect
to upgrade existing Samba 3.x releases to) and the AD domain
controller work previously known as 'samba4'.

Samba4 is subjected to an awesome battery of tests on an automated
basis, we have found Samba 4.0 to be very stable in it's behavior.
However, we still recommend against upgrading production servers from
Samba 3.x release to Samba 4.0 beta at this stage.

In particular note that the new default configuration 's3fs' may have
different stability characteristics compared with our previous default
file server.  We are making this release so that we can find and fix
any of these issues that arise in the real world.  New AD DC
installations can provision or join with --use-ntvfs to obtain the
previous default file server.  Existing installations will be
unaffected at this stage.

If you are upgrading, or looking to develop, test or deploy Samba 4.0
beta releases, you should backup all configuration and data.


NEW FEATURES
============

Samba 4.0 beta supports the server-side of the Active Directory logon
environment used by Windows 2000 and later, so we can do full domain
join and domain logon operations with these clients.

Our Domain Controller (DC) implementation includes our own built-in
LDAP server and Kerberos Key Distribution Center (KDC) as well as the
Samba3-like logon services provided over CIFS.  We correctly generate
the infamous Kerberos PAC, and include it with the Kerberos tickets we
issue.

Samba 4.0 beta ships with two distinct file servers.  We now use the
file server from the Samba 3.x series 'smbd' for all file serving by
default.  For pure file server work, the binaries users would expect
from that series (nmbd, winbindd, smbpasswd) continue to be available.

Samba 4.0 also ships with the 'NTVFS' file server.  This file server
is what was used in all previous alpha releases of Samba 4.0, and is
tuned to match the requirements of an AD domain controller.  We
continue to support this, not only to provide continuity to
installations that have deployed it as part of an AD DC, but also as a
running example of the NT-FSA architecture we expect to move smbd to in
the longer term.  

As mentioned above, this change to the default file server may cause
instability, as we learn about the real-world interactions between
these two key components. 

As DNS is an integral part of Active Directory, we also provide a DNS
solution, using the BIND DLZ mechanism in versions 9.8 and 9.9.
During the provision, a configuration file will be generated for bind
to make it use this plugin.  We also have a project to provide a
minimal internal DNS server from within the Samba process, for easier
'out of the box' configuration.  Note however that this is not yet
complete (pending addition of secure DNS update support).

To provide accurate timestamps to Windows clients, we integrate with
the NTP project to provide secured NTP replies. 

Finally, a new scripting interface has been added to Samba 4, allowing
Python programs to interface to Samba's internals, and many tools and
internal workings of the DC code is now implemented in python.


CHANGES SINCE alpha21
=====================

For a list of changes since alpha21, please see the git log.

$ git clone git://git.samba.org/samba.git
$ cd samba.git
$ git log samba-4.0.0alpha21..samba-4.0.0beta1

Some major user-visible changes include:

The internal DNS server has had some stability improvements, and
now handles forwarded DNS replies in an async manner.

The build of libtdb.so and libtalloc.so has been removed from the
autoconf build.  Use the build in lib/talloc and lib/tdb to build
this software for use across the system.

The smbclient and nmblookup binaries have been renamed in the top
level build, so smbclient/nmblookup are now the implementations from
the Samba 3.x heritage.

Improved handling of the cleanup of smbd child processes (removing a
number of scary warnings from our log output).

Much improved support for FreeBSD, including extended attribute
support on the filesystem for the AD DC.


KNOWN ISSUES
============

- We are making this beta release to gain real-world use of the 's3fs'
  file server combination we will use for the Samba 4.0 release.
  Users should expect some rough edges: in particular, there are
  warnings about invalid parameters from the two respective parameter
  parsing engines.

- Replication of DNS data from one AD server to another may not work.
  The DNS data used by the internal DNS server and bind9_dlz is stored
  in an application partition in our directory.  The replicaton of
  this partition is not yet reliable.

- Replication may fail on FreeBSD due to getaddrinfo() rejecting names
  containing _.  A workaround will be in the next beta.

- upgradeprovision should not be run when upgrading to this release
  from a recent release.  No important database format changes have
  been made since alpha16.  

- Installation on systems without a system iconv (and developer
  headers at compile time) is known to cause errors when dealing with
  non-ASCII characters.

- Domain member support in the 'samba' binary is in it's infancy, and
  is not comparable to the support found in winbindd.  As such, do not
  use the 'samba' binary (provided for the AD server) on a member
  server.

- There is no NetBIOS browsing support (network neighbourhood) in the
  'samba' binary (use nmbd and smbd instead)

- Clock Synchronisation is critical.  Many 'wrong password' errors are
  actually due to Kerberos objecting to a clock skew between client
  and server.  (The NTP work in the previous alphas are partly to assist
  with this problem).

- The DRS replication code may fail.  Please contact the team if you
  experience issues with DRS replication, as we have fixed many issues
  here in response to feedback from our production users. 


RUNNING Samba 4.0 as an AD DC
=============================

A short guide to setting up Samba 4 as an AD DC can be found on the wiki:

  http://wiki.samba.org/index.php/Samba4/HOWTO

#######################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 4.0 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


Download Details
================

The release tarball is available from the following location:
 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0beta1.tar.gz

This release has been signed using GPG with Andrew's GPG key 28B436BB).

 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0beta1.tar.asc

To verify that the signature is correct, make sure that the tarball has
been unzipped and run:

$ gpg --verify samba-4.0.0beta1.tar.asc

Happy testing!

The Samba team
-- 
Andrew Bartlett                                http://samba.org/~abartlet/
Authentication Developer, Samba Team           http://samba.org








From abartlet at samba.org  Wed Jun 20 06:33:42 2012
From: abartlet at samba.org (Andrew Bartlett)
Date: Wed, 20 Jun 2012 22:33:42 +1000
Subject: [ANNOUNCE] Samba 4.0 beta2
Message-ID: <1340195622.15768.184.camel@obed>

We are proud to a announce another beta release of Samba 4.0, beta 2

What's new in Samba 4 beta2
=============================

Samba 4.0 will be the next version of the Samba suite and incorporates
all the technology found in both the Samba4 alpha series and the
stable 3.x series. The primary additional features over Samba 3.6 are
support for the Active Directory logon protocols used by Windows 2000
and above.


WARNINGS
========

Samba4 beta2 is not a final Samba release, however we are now making
good progress towards a Samba 4.0 release, of which this is a preview.
Be aware the this release contains the best of all of Samba's
technology parts, both a file server (that you can reasonably expect
to upgrade existing Samba 3.x releases to) and the AD domain
controller work previously known as 'samba4'.

Samba4 is subjected to an awesome battery of tests on an automated
basis, we have found Samba 4.0 to be very stable in it's behavior.
However, we still recommend against upgrading production servers from
Samba 3.x release to Samba 4.0 beta at this stage.

In particular note that the new default configuration 's3fs' may have
different stability characteristics compared with our previous default
file server.  We are making this release so that we can find and fix
any of these issues that arise in the real world.  New AD DC
installations can provision or join with --use-ntvfs to obtain the
previous default file server.  See below how to continue using ntvfs
in an existing installation.

If you are upgrading, or looking to develop, test or deploy Samba 4.0
beta releases, you should backup all configuration and data.


UPGRADING
=========

Users upgrading from Samba 3.x domain controllers and wanting to use
Samba 4.0 as an AD DC should use the 'samba-tool domain
classicupgrade' command.  See the wiki for more details:
https://wiki.samba.org/index.php/Samba4/samba3upgrade/HOWTO 

Users upgrading from Samba 4.0 alpha and beta releases since alpha15 
should run 'samba-tool dbcheck --cross-ncs --fix'.  Users upgrading
from earlier alpha releases should contact the team for advice. 


NEW FEATURES
============

Samba 4.0 beta supports the server-side of the Active Directory logon
environment used by Windows 2000 and later, so we can do full domain
join and domain logon operations with these clients.

Our Domain Controller (DC) implementation includes our own built-in
LDAP server and Kerberos Key Distribution Center (KDC) as well as the
Samba3-like logon services provided over CIFS.  We correctly generate
the infamous Kerberos PAC, and include it with the Kerberos tickets we
issue.

Samba 4.0 beta ships with two distinct file servers.  We now use the
file server from the Samba 3.x series 'smbd' for all file serving by
default.  For pure file server work, the binaries users would expect
from that series (nmbd, winbindd, smbpasswd) continue to be available.

Samba 4.0 also ships with the 'NTVFS' file server.  This file server
is what was used in all previous alpha releases of Samba 4.0, and is
tuned to match the requirements of an AD domain controller.  We
continue to support this, not only to provide continuity to
installations that have deployed it as part of an AD DC, but also as a
running example of the NT-FSA architecture we expect to move smbd to in
the longer term.  

As mentioned above, this change to the default file server may cause
instability, as we learn about the real-world interactions between
these two key components. 

As DNS is an integral part of Active Directory, we also provide a DNS
solution, using the BIND DLZ mechanism in versions 9.8 and 9.9.
During the provision, a configuration file will be generated for bind
to make it use this plugin.  We also have a project to provide a
minimal internal DNS server from within the Samba process, for easier
'out of the box' configuration.  Note however that this is not yet
complete (pending addition of secure DNS update support).

To provide accurate timestamps to Windows clients, we integrate with
the NTP project to provide secured NTP replies. 

Finally, a new scripting interface has been added to Samba 4, allowing
Python programs to interface to Samba's internals, and many tools and
internal workings of the DC code is now implemented in python.


CHANGES SINCE beta1
=====================

For a list of changes since beta1, please see the git log.

$ git clone git://git.samba.org/samba.git
$ cd samba.git
$ git log samba-4.0.0beta1..samba-4.0.0beta2

Some major user-visible changes include:

The default file server for EXISTING USERS has changed to s3fs.  To
continue to use ntvfs, you must set in your smb.conf:

    server services = +smb -s3fs
    dcerpc endpoint servers = +winreg +srvsvc

samba-tool dbcheck will now upgrade older databases that are missing
GUIDs in the schema partition.  

The 'samba-tool domain samba3upgrade' command is now called
'samba-tool domain classicupgrade' and now creates users and groups
with the posixAccount objectClass and uidNumber and gidNumber values.

The new 'idmap_ldb:use rfc2307' parameter allows these values to be
used instead of the idmap.ldb, where found in the directory.

Work has continued to make Samba more portable to a wide variety of
Unix-like systems, and to support --without-ad-dc on systems lacking a
modern MIT krb5.

Less visible, but very importantly, the work has continued in restructuring
the smbd file server to implement SMB3.

The TDB2 database library has been changed to ntdb, but will not be
the default db layer for the 4.0 release.  We will continue to use tdb1.


KNOWN ISSUES
============

- This release makes the s3fs file server the default, as this is the
  file server combination we will use for the Samba 4.0 release.
  Users should still expect some rough edges: in particular, there are
  warnings about invalid parameters from the two respective parameter
  parsing engines.

- Replication of DNS data from one AD server to another may not work.
  The DNS data used by the internal DNS server and bind9_dlz is stored
  in an application partition in our directory.  The replicaton of
  this partition is not yet reliable.

- Replication may fail on FreeBSD due to getaddrinfo() rejecting names
  containing _.  A workaround will be in the next beta.

- upgradeprovision should not be run when upgrading to this release
  from a recent release.  No important database format changes have
  been made since alpha16.  

- Installation on systems without a system iconv (and developer
  headers at compile time) is known to cause errors when dealing with
  non-ASCII characters.

- Domain member support in the 'samba' binary is in it's infancy, and
  is not comparable to the support found in winbindd.  As such, do not
  use the 'samba' binary (provided for the AD server) on a member
  server.

- There is no NetBIOS browsing support (network neighbourhood) in the
  'samba' binary (use nmbd and smbd instead)

- Clock Synchronisation is critical.  Many 'wrong password' errors are
  actually due to Kerberos objecting to a clock skew between client
  and server.  (The NTP work in the previous alphas are partly to assist
  with this problem).

- The DRS replication code may fail.  Please contact the team if you
  experience issues with DRS replication, as we have fixed many issues
  here in response to feedback from our production users. 


RUNNING Samba 4.0 as an AD DC
=============================

A short guide to setting up Samba 4 as an AD DC can be found on the wiki:

  http://wiki.samba.org/index.php/Samba4/HOWTO

#######################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 4.0 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================



Download Details
================

The release tarball is available from the following location:
 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0beta2.tar.gz

This release has been signed using GPG with Andrew's GPG key 28B436BB).

 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0beta2.tar.asc

To verify that the signature is correct, make sure that the tarball has
been unzipped and run:

$ gpg --verify samba-4.0.0beta2.tar.asc

Happy testing!

The Samba team
-- 
Andrew Bartlett                                http://samba.org/~abartlet/
Authentication Developer, Samba Team           http://samba.org









From kseeger at samba.org  Mon Jun 25 12:06:45 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Mon, 25 Jun 2012 20:06:45 +0200
Subject: [Announce] Samba 3.6.6 Available for Download
Message-ID: <E1SjDgU-00619P-4h@intern.SerNet.DE>

====================================================================
			"Your body hears everything your mind says."

			 Naomi Judd
===================================================================


Release Announcements
=====================

This is is the latest stable release of Samba 3.6.

Major enhancements in Samba 3.6.6 include:

o  Fix possible memory leaks in the Samba master process (bug #8970).
o  Fix uninitialized memory read in talloc_free().
o  Fix joining of XP Pro workstations to 3.6 DCs (bug #8373).


Changes since 3.6.5:
--------------------

o   Michael Adam <obnox at samba.org>
    * BUG 8738: SMB2 server will not release unused shares.
    * BUG 8749: Sign non guest sessions in SessionSetup.
    * BUG 8921: Fix race writing registry values.


o   Jeremy Allison <jra at samba.org>
    * BUG 8373: Fix joining of XP Pro workstations to 3.6 DCs.
    * BUG 8627: Fix crash bug in dns_create_probe when dns_create_update fails.
    * BUG 8723: Add pthread-based aio VFS module.
    * BUG 8784: When calculating the share security mask, take priviliges into
      account for the connecting user.
    * BUG 8811: sd_has_inheritable_components segfaults on an SD that
      se_access_check accepts.
    * BUG 8837: Fix crash in smbd when deleting directory and veto files are
      enabled.
    * BUG 8857: Setting traverse rights fails to enable directory traversal when
      acl_xattr in use.
    * BUG 8882: Broken processing of %U with vfs_full_audit when force user is
      set.
    * BUG 8897: Make winbind_krb5_locator not only returning one IP address.
    * BUG 8910: resolve_ads() code can return zero addresses and miss valid
      DC IP addresses.
    * BUG 8922: smbclient's tarmode insists on listing excluded directories.
    * BUG 8953: Winbind can hang as nbt_getdc() has no timeout.
    * BUG 8957: Typo in pam_winbindd code MUST fix.
    * BUG 8970: Fix possible memory leaks in the Samba master process.
    * BUG 8971: cleanup_timeout_fn() is called too often, on exiting when an
      smbd is idle.
    * BUG 8972: Directory group write permission bit is set if unix extensions
      are enabled.


o   Christian Ambach <ambi at samba.org>
    * BUG 8406: Fix a return code check in Winbind.
    * BUG 8807: Fix crash in dcerpc_lsa_lookup_sids_noalloc() crashes when
      groups has more than 1000 groups.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 8599: Only use SamLogonEx when we can get unencrypted session keys.
    * BUG 8727: Fix smbclients with posix large reads.
    * BUG 8943: Slow but responsive DC can lock up Winbind for > 10 minutes
      at a time.


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 7564: Fix default name resolve order in the manpage.
    * BUG 8554, 8612, 8748: Add new printers to registry.
    * BUG 8789: Remove whitespace in example samba.ldif.


o   Alexander Bokovoy <ab at samba.org>
    * BUG 8988: Avoid crash with MIT krb5 1.10.0 in gss_get_name_attribute().


o   Alejandro Escanero Blanco <aescanero at gmail.com>
    * BUG 8798: The primary rid should be in the groups rid array.


o   Ira Cooper <samba at ira.wakeful.net>
    * BUG 8729: Fix getpass regressions on Solaris/Illumos.
    * BUG 8743: Fix configure.developer builds on Solaris.
    * BUG 8910: Fix bad bugfix for bug #8910.
    * BUG 8952: Fix negative SID->uid/gid cache handling.
    * BUG 8995: Use fsp_persistent_id() as persistent_file_id part for SMB2.


o   David Disseldorp <ddiss at samba.org>
    * BUG 8762: Fix crash in printer_list_set_printer().


o   Olaf Flebbe <o.flebbe at science-computing.de>
    * BUG 8859: Fix assertion in reg_parse.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 8732: Fix compile of krb5 locator on Solaris.
    * BUG 8869: Remove outdated netscape ds 5 schema file.
    * BUG 8978: Remove dependency on automake for 'make everything'.


o   Steve Langasek <steve.langasek at ubuntu.com>
    * BUG 8920: Fix null dereference in pdb_interface.


o   Volker Lendecke <vl at samba.org>
    * Fix uninitialized memory read in talloc_free().
    * BUG 8567: Fix segfault in dom_sid_compare.
    * BUG 8733: Delete streams on directories (streams_depot).
    * BUG 8760: Add SERVERID_UNIQUE_ID_NOT_TO_VERIFY.
    * BUG 8836: Fix segfaults on "smbcontrol close-share" in aio_fork.
    * BUG 8861: Fix a segfault with debug level 3 on Solaris.
    * BUG 8904: Fix Winbind crash triggered by 'wbinfo --lookup-sids ""'.
    * BUG 8998: Notify code can miss a ChDir.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 8139: Ignore SMBecho errors (the server may not support it).
    * BUG 8527: db_ctdb_traverse fails to traverse records created within the
      current transaction.
    * BUG 8311: Winzip occasionally can not read files out of an open winzip
      dialog.
    * BUG 8739: Fill the sids array of the info in
      wbcAuthUserInfo_to_netr_SamInfo3().
    * BUG 8749: Sign non guest sessions in SessionSetup.
    * BUG 8995: Use fsp_persistent_id() as persistent_file_id part for SMB2.


o   Matthieu Patou <mat at matws.net>
    * BUG 8599: Set the can_do_validation6 also for trusted domain.
    * BUG 8714: Catch with pid filename's change when config file is not
      smb.conf.
    * BUG 8734: Don't try to do clever thing if the username is not found while
      authenticating through Winbind.
    * BUG 8771: Winbind takes up to 20 minutes to change from DC 1 to DC 2.
    * BUG 8975: Call dump_core_setup after command line option has been parsed.


o   SATOH Fumiyasu <fumiyas at osstech.co.jp>
    * BUG 8826: Prepend '/' to filename argument (docs).


o   Andreas Schneider <asn at samba.org>
    * BUG 8944 and 8567: Don't lookup the system user in pdb.


o   Richard Sharpe <realrichardsharpe at gmail.com>
    * BUG 8768: Honor SeTakeOwnershipPrivilege when file opened with
      SEC_STD_WRITE_OWNER.
    * BUG 8797: Correctly handle DENY ACEs when privileges apply.
    * BUG 8822: Fix building out-of-tree modules.
    * BUG 8945: vfs_acl_common discards errors from writing to the underlying
      storage.
    * BUG 8970: Fix possible memory leaks in the Samba master process.


o   Simo Sorce <idra at samba.org>
    * BUG 8915: Fix pam_winbind build against newer iniparser library.


o   Joseph Tam <jtam.home at gmail.com>
    * BUG 8877: Syslog broken owing to mistyping of debug_settings.syslog.


o   Ralph Wuerthner <ralph.wuerthner at de.ibm.com>
    * BUG 8845: Move print_backend_init() behind init_system_info().


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba corresponding product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/

The release notes are available online at:

        http://www.samba.org/samba/ftp/history/samba-3.6.6.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team


From kseeger at samba.org  Sun Jul  1 23:26:30 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Mon, 2 Jul 2012 07:26:30 +0200
Subject: [Announce] Samba 3.5.16 Available for Download
Message-ID: <E1SlZ9b-00CIOw-1T@intern.SerNet.DE>

===================================================================
				"Information's pretty thin stuff
				 unless mixed with experience."

				 Clarence Day
==================================================================


Release Announcements
=====================

This is the latest stable release of Samba 3.5.

Major enhancements in Samba 3.5.16 include:

o  Fix possible memory leaks in the Samba master process (bug #8970).
o  Fix uninitialized memory read in talloc_free().
o  Fix smbd crash with unknown user (bug #8314).


Changes since 3.5.15:
---------------------

o   Jeremy Allison <jra at samba.org>
    * BUG 8314: Fix smbd crash with unknown user.
    * BUG 8831: Fix inconsistent (with manpage) command-line switch for "help"
      in smbtree.
    * BUG 8882: Fix processing of %U with vfs_full_audit when "force user"
      is set.
    * BUG 8897: winbind_krb5_locator only returns one IP address.
    * BUG 8910: resolve_ads() code can return zero addresses and miss valid DC
      IP addresses.
    * BUG 8957: Fix typo in pam_winbindd code.
    * BUG 8972: Directory group write permission bit is set if unix extensions
      are enabled.
    * BUG 8974: Kernel oplocks are broken when uid(file) != uid(process).
    * BUG 8989: Send correct responses to NT Transact Secondary when no data and
      no params.
    * BUG 8994: Fix "winbind normalize names".


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 8599: Only use SamLogonEx when we can get unencrypted session keys.
    * BUG 8943: Slow but responsive DC can lock up winbindd for > 10 minutes
      at a time.


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 7564: Fix default name resolve order in the manpage.


o   John Bradshaw <john at johnbradshaw.org>
    * BUG 7938: Fix typo (overrided -> overridden) in Samba3-HOWTO.


o   Olaf Flebbe <o.flebbe at science-computing.de>
    * BUG 8552: Correct documentation of "case sensitive".


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 8869: Remove outdated netscape ds 5 schema file.
    * BUG 9011: Fix build on HP-UX.


o   Volker Lendecke <vl at samba.org>
    * Fix uninitialized memory read in talloc_free().
    * BUG 8338: OS/X can not deal with a 10-vwv read on normal files.
    * BUG 8998: Notify code can miss a ChDir.
    * BUG 9000: Fix a Winbind race leading to 100% CPU.
    * BUG 9003: Fix posix acl on gpfs.


o   Matthieu Patou <mat at matws.net>
    * BUG 8975: Make sure that Winbind can coredump.


o   Karolin Seeger <kseeger at samba.org>
    * BUG 7930: Add hint that setting "profile acls = yes" on normal shares can
      cause trouble.


o   Richard Sharpe <realrichardsharpe at gmail.com>
    * BUG 8822: Fix building out-of-tree vfs modules.
    * BUG 8970: Fix possible memory leaks in the Samba master process.


o   Simo Sorce <idra at samba.org>
    * BUG 8915: Fix pam_winbind build against newer iniparser library.


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 3.5 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/stable

The release notes are available online at:

        http://www.samba.org/samba/history/samba-3.5.16.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team




From abartlet at samba.org  Mon Jul  2 20:41:32 2012
From: abartlet at samba.org (Andrew Bartlett)
Date: Tue, 03 Jul 2012 12:41:32 +1000
Subject: [ANNOUNCE] Samba 4.0 beta3
Message-ID: <1341283292.13620.120.camel@obed>

We are proud to a announce another beta release of Samba 4.0, beta3


What's new in Samba 4.0 beta3
=============================

Samba 4.0 will be the next version of the Samba suite and incorporates
all the technology found in both the Samba4 alpha series and the
stable 3.x series. The primary additional features over Samba 3.6 are
support for the Active Directory logon protocols used by Windows 2000
and above.


WARNINGS
========

Samba4 beta3 is not a final Samba release, however we are now making
good progress towards a Samba 4.0 release, of which this is a preview.
Be aware the this release contains the best of all of Samba's
technology parts, both a file server (that you can reasonably expect
to upgrade existing Samba 3.x releases to) and the AD domain
controller work previously known as 'samba4'.

Samba4 is subjected to an awesome battery of tests on an automated
basis, we have found Samba 4.0 to be very stable in it's behavior.
However, we still recommend against upgrading production servers from
Samba 3.x release to Samba 4.0 beta at this stage.

In particular note that the new default configuration 's3fs' may have
different stability characteristics compared with our previous default
file server.  We are making this release so that we can find and fix
any of these issues that arise in the real world.  New AD DC
installations can provision or join with --use-ntvfs to obtain the
previous default file server.  See below how to continue using ntvfs
in an existing installation.

If you are upgrading, or looking to develop, test or deploy Samba 4.0
beta releases, you should backup all configuration and data.


UPGRADING
=========

Users upgrading from Samba 3.x domain controllers and wanting to use
Samba 4.0 as an AD DC should use the 'samba-tool domain
classicupgrade' command.  See the wiki for more details:
https://wiki.samba.org/index.php/Samba4/samba3upgrade/HOWTO 

Users upgrading from Samba 4.0 alpha and beta releases since alpha15 
should run 'samba-tool dbcheck --cross-ncs --fix'.  Users upgrading
from earlier alpha releases should contact the team for advice. 


NEW FEATURES
============

Samba 4.0 beta supports the server-side of the Active Directory logon
environment used by Windows 2000 and later, so we can do full domain
join and domain logon operations with these clients.

Our Domain Controller (DC) implementation includes our own built-in
LDAP server and Kerberos Key Distribution Center (KDC) as well as the
Samba3-like logon services provided over CIFS.  We correctly generate
the infamous Kerberos PAC, and include it with the Kerberos tickets we
issue.

Samba 4.0 beta ships with two distinct file servers.  We now use the
file server from the Samba 3.x series 'smbd' for all file serving by
default.  For pure file server work, the binaries users would expect
from that series (nmbd, winbindd, smbpasswd) continue to be available.

Samba 4.0 also ships with the 'NTVFS' file server.  This file server
is what was used in all previous alpha releases of Samba 4.0, and is
tuned to match the requirements of an AD domain controller.  We
continue to support this, not only to provide continuity to
installations that have deployed it as part of an AD DC, but also as a
running example of the NT-FSA architecture we expect to move smbd to in
the longer term.  

As mentioned above, this change to the default file server may cause
instability, as we learn about the real-world interactions between
these two key components. 

As DNS is an integral part of Active Directory, we also provide a DNS
solution, using the BIND DLZ mechanism in versions 9.8 and 9.9.
During the provision, a configuration file will be generated for bind
to make it use this plugin.  We also have a project to provide a
minimal internal DNS server from within the Samba process, for easier
'out of the box' configuration.  Note however that this is not yet
complete (pending addition of secure DNS update support).

To provide accurate timestamps to Windows clients, we integrate with
the NTP project to provide secured NTP replies. 

Finally, a new scripting interface has been added to Samba 4, allowing
Python programs to interface to Samba's internals, and many tools and
internal workings of the DC code is now implemented in python.


CHANGES SINCE beta2
=====================

For a list of changes since beta2, please see the git log.

$ git clone git://git.samba.org/samba.git
$ cd samba.git
$ git log samba-4.0.0beta2..samba-4.0.0beta3

Some major user-visible changes include:

The failure to start up due to a blocking smbd-fileserver.conf.pid has
been resolved.

Samba now includes support for version 2.1 of the SMB protocol,
the SMB2 version of Windows 7 and 2008R2, including dynamic
reauthentication and support for multi-credit (large MTU).
Consequently, Samba negotiates SMB 2.1 by default: The value "SMB2"
for the configuration parameter "max protocol" has been changed to
be an alias for SMB 2.1. Previously, the default SMB2 version of
Samba was the original version 2.0 of SMB that was shipped with
Windows Vista and 2008.

Samba now offers basic experimental support for SMB3, the next version
of the SMB protocol (formerly known as SMB 2.2) that will be available
with Windows 8 and Windows Server 2012. Negotiation of SMB3 can be
activated by setting "max protocol" to "SMB3" in smb.conf.

Thanks to upgrades to our AD DC code, particularly in schema handling,
Samba can now correctly handle the installation of Microsoft Exchange
2010.  Other issues prevent run-time operation, but this is a major
milestone in supporting one of the single mode demanding Active
Directory applications.

KNOWN ISSUES
============

- This release makes the s3fs file server the default, as this is the
  file server combination we will use for the Samba 4.0 release.
  Users should still expect some rough edges: in particular, there are
  warnings about invalid parameters from the two respective parameter
  parsing engines.

- Replication of DNS data from one AD server to another may not work.
  The DNS data used by the internal DNS server and bind9_dlz is stored
  in an application partition in our directory.  The replicaton of
  this partition is not yet reliable.

- Replication may fail on FreeBSD due to getaddrinfo() rejecting names
  containing _.  A workaround will be in the next beta.

- upgradeprovision should not be run when upgrading to this release
  from a recent release.  No important database format changes have
  been made since alpha16.  

- Installation on systems without a system iconv (and developer
  headers at compile time) is known to cause errors when dealing with
  non-ASCII characters.

- Domain member support in the 'samba' binary is in it's infancy, and
  is not comparable to the support found in winbindd.  As such, do not
  use the 'samba' binary (provided for the AD server) on a member
  server.

- There is no NetBIOS browsing support (network neighbourhood) in the
  'samba' binary (use nmbd and smbd instead)

- Clock Synchronisation is critical.  Many 'wrong password' errors are
  actually due to Kerberos objecting to a clock skew between client
  and server.  (The NTP work in the previous alphas are partly to assist
  with this problem).

- The DRS replication code may fail.  Please contact the team if you
  experience issues with DRS replication, as we have fixed many issues
  here in response to feedback from our production users. 


RUNNING Samba 4.0 as an AD DC
=============================

A short guide to setting up Samba 4 as an AD DC can be found on the wiki:

  http://wiki.samba.org/index.php/Samba4/HOWTO

#######################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 4.0 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================



Download Details
================

The release tarball is available from the following location:
 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0beta3.tar.gz

This release has been signed using GPG with Andrew's GPG key 28B436BB).

 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0beta3.tar.asc

To verify that the signature is correct, make sure that the tarball has
been unzipped and run:

$ gpg --verify samba-4.0.0beta3.tar.asc

Happy testing!

The Samba team
-- 
Andrew Bartlett                                http://samba.org/~abartlet/
Authentication Developer, Samba Team           http://samba.org










From abartlet at samba.org  Mon Jul 16 23:08:46 2012
From: abartlet at samba.org (Andrew Bartlett)
Date: Tue, 17 Jul 2012 15:08:46 +1000
Subject: [ANNOUNCE] Samba 4.0 beta4
Message-ID: <1342501726.28311.267.camel@obed>

We are proud to a announce another beta release of Samba 4.0, beta4

What's new in Samba 4.0 beta4
=============================

Samba 4.0 will be the next version of the Samba suite and incorporates
all the technology found in both the Samba4 alpha series and the
stable 3.x series. The primary additional features over Samba 3.6 are
support for the Active Directory logon protocols used by Windows 2000
and above.


WARNINGS
========

Samba 4.0 beta4 is not a final Samba release, however we are now making
good progress towards a Samba 4.0 release, of which this is a preview.
Be aware the this release contains the best of all of Samba's
technology parts, both a file server (that you can reasonably expect
to upgrade existing Samba 3.x releases to) and the AD domain
controller work previously known as 'samba4'.

Samba 4.0 is subjected to an awesome battery of tests on an automated
basis, we have found Samba 4.0 to be very stable in it's behavior.
However, we still recommend against upgrading production servers from
Samba 3.x release to Samba 4.0 beta at this stage.

In particular note that the new default configuration 's3fs' may have
different stability characteristics compared with our previous default
file server.  We are making this release so that we can find and fix
any of these issues that arise in the real world.  New AD DC
installations can provision or join with --use-ntvfs to obtain the
previous default file server.  See below how to continue using ntvfs
in an existing installation.

If you are upgrading, or looking to develop, test or deploy Samba 4.0
beta releases, you should backup all configuration and data.


UPGRADING
=========

Users upgrading from Samba 3.x domain controllers and wanting to use
Samba 4.0 as an AD DC should use the 'samba-tool domain
classicupgrade' command.  See the wiki for more details:
https://wiki.samba.org/index.php/Samba4/samba3upgrade/HOWTO 

Users upgrading from Samba 4.0 alpha and beta releases since alpha15 
should run 'samba-tool dbcheck --cross-ncs --fix'.  Users upgrading
from earlier alpha releases should contact the team for advice. 


NEW FEATURES
============

Samba 4.0 beta supports the server-side of the Active Directory logon
environment used by Windows 2000 and later, so we can do full domain
join and domain logon operations with these clients.

Our Domain Controller (DC) implementation includes our own built-in
LDAP server and Kerberos Key Distribution Center (KDC) as well as the
Samba3-like logon services provided over CIFS.  We correctly generate
the infamous Kerberos PAC, and include it with the Kerberos tickets we
issue.

Samba 4.0 beta ships with two distinct file servers.  We now use the
file server from the Samba 3.x series 'smbd' for all file serving by
default.  For pure file server work, the binaries users would expect
from that series (nmbd, winbindd, smbpasswd) continue to be available.

Samba 4.0 also ships with the 'NTVFS' file server.  This file server
is what was used in all previous alpha releases of Samba 4.0, and is
tuned to match the requirements of an AD domain controller.  We
continue to support this, not only to provide continuity to
installations that have deployed it as part of an AD DC, but also as a
running example of the NT-FSA architecture we expect to move smbd to in
the longer term.  

As mentioned above, this change to the default file server may cause
instability, as we learn about the real-world interactions between
these two key components. 

As DNS is an integral part of Active Directory, we also provide a DNS
solution, using the BIND DLZ mechanism in versions 9.8 and 9.9.
During the provision, a configuration file will be generated for bind
to make it use this plugin.  We also have a project to provide a
minimal internal DNS server from within the Samba process, for easier
'out of the box' configuration.  Note however that this is not yet
complete (pending addition of secure DNS update support).

To provide accurate timestamps to Windows clients, we integrate with
the NTP project to provide secured NTP replies. 

Finally, a new scripting interface has been added to Samba 4, allowing
Python programs to interface to Samba's internals, and many tools and
internal workings of the DC code is now implemented in python.


CHANGES SINCE beta3
=====================

For a list of changes since beta3, please see the git log.

$ git clone git://git.samba.org/samba.git
$ cd samba.git
$ git log samba-4.0.0beta3..samba-4.0.0beta4

Some major user-visible changes include:

- The issue with beta3 being unable to build with a released version of
  ldb has been resolved. 

- A new tool 'samba-tool domain dcpromo' has been added to allow the
  promotion of existing domain member accounts to a DC without creating
  a new SID

- When provisioning with --use_rfc2307=yes we will populate the
  subtree CN=ypServ30,CN=RpcServices,CN=System,${DOMAINDN}. This makes
  it possible to manipulate the posix attributes via ADUC.

- Improved 'samba-tool gpo' subcommands

- --disable-ntdb now works properly

- Bug 9026 - 3.6.6 upgrade from 3.5.x fails with "Couldn't migrate
  printers tdb file: NT_STATUS_NO_MEMORY" has been resolved

- Bug 9016 - Connection to outbound trusted domain goes offline has
  been resolved

Less visible, but important changes under the hood include:

- Continued work to support SMB2 and SMB3

- Correct restrictions and permissions on LSA calls over TCP and via
  Schannel have been implemented and tested

- Continued work to use async IO to improve file server performance.

KNOWN ISSUES
============

- This release makes the s3fs file server the default, as this is the
  file server combination we will use for the Samba 4.0 release.
  Users should still expect some rough edges: in particular, there are
  warnings about invalid parameters from the two respective parameter
  parsing engines.

- Modifying of group policies by members of the Domain Administrators
  group is not possible with the s3fs file server, only with the ntvfs
  file server.  This is due to the underlying POSIX ACL not being set
  at provision time.

- For similar reasons, sites with ACLs stored by the ntvfs file server
  may wish to continue to use that file server implementation, as a
  posix ACL will similarly not be set in this case.

- Replication of DNS data from one AD server to another may not work.
  The DNS data used by the internal DNS server and bind9_dlz is stored
  in an application partition in our directory.  The replication of
  this partition is not yet reliable.

- Replication may fail on FreeBSD due to getaddrinfo() rejecting names
  containing _.  A workaround will be in the next beta.

- upgradeprovision should not be run when upgrading to this release
  from a recent release.  No important database format changes have
  been made since alpha16.  

- Installation on systems without a system iconv (and developer
  headers at compile time) is known to cause errors when dealing with
  non-ASCII characters.

- Domain member support in the 'samba' binary is in it's infancy, and
  is not comparable to the support found in winbindd.  As such, do not
  use the 'samba' binary (provided for the AD server) on a member
  server.

- There is no NetBIOS browsing support (network neighbourhood) in the
  'samba' binary (use nmbd and smbd instead)

- Clock Synchronisation is critical.  Many 'wrong password' errors are
  actually due to Kerberos objecting to a clock skew between client
  and server.  (The NTP work in the previous alphas are partly to assist
  with this problem).

- The DRS replication code may fail.  Please contact the team if you
  experience issues with DRS replication, as we have fixed many issues
  here in response to feedback from our production users. 


RUNNING Samba 4.0 as an AD DC
=============================

A short guide to setting up Samba 4 as an AD DC can be found on the wiki:

  http://wiki.samba.org/index.php/Samba4/HOWTO

#######################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 4.0 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================



Download Details
================

The release tarball is available from the following location:
 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0beta4.tar.gz

This release has been signed using GPG with Andrew's GPG key 28B436BB).

 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0beta4.tar.asc

To verify that the signature is correct, make sure that the tarball has
been unzipped and run:

$ gpg --verify samba-4.0.0beta4.tar.asc

Happy testing!

The Samba team
-- 
Andrew Bartlett                                http://samba.org/~abartlet/
Authentication Developer, Samba Team           http://samba.org











From abartlet at samba.org  Wed Aug  1 04:03:57 2012
From: abartlet at samba.org (Andrew Bartlett)
Date: Wed, 01 Aug 2012 20:03:57 +1000
Subject: [ANNOUNCE] Samba 4.0 beta5
Message-ID: <1343815437.13532.21.camel@obed>

We are proud to a announce another beta release of Samba 4.0, beta5
(the required ldb 1.1.9 release will follow shortly). 


What's new in Samba 4.0 beta5
=============================

Samba 4.0 will be the next version of the Samba suite and incorporates
all the technology found in both the Samba4 alpha series and the
stable 3.x series. The primary additional features over Samba 3.6 are
support for the Active Directory logon protocols used by Windows 2000
and above.


WARNINGS
========

Samba 4.0 beta5 is not a final Samba release, however we are now making
good progress towards a Samba 4.0 release, of which this is a preview.
Be aware the this release contains the best of all of Samba's
technology parts, both a file server (that you can reasonably expect
to upgrade existing Samba 3.x releases to) and the AD domain
controller work previously known as 'samba4'.

Samba 4.0 is subjected to an awesome battery of tests on an automated
basis, we have found Samba 4.0 to be very stable in it's behavior.
However, we still recommend against upgrading production servers from
Samba 3.x release to Samba 4.0 beta at this stage.

In particular note that the new default configuration 's3fs' may have
different stability characteristics compared with our previous default
file server.  We are making this release so that we can find and fix
any of these issues that arise in the real world.  New AD DC
installations can provision or join with --use-ntvfs to obtain the
previous default file server.  See below how to continue using ntvfs
in an existing installation.

If you are upgrading, or looking to develop, test or deploy Samba 4.0
beta releases, you should backup all configuration and data.


UPGRADING
=========

Users upgrading from Samba 3.x domain controllers and wanting to use
Samba 4.0 as an AD DC should use the 'samba-tool domain
classicupgrade' command.  See the wiki for more details:
https://wiki.samba.org/index.php/Samba4/samba3upgrade/HOWTO 

Users upgrading from Samba 4.0 alpha and beta releases since alpha15 
should run 'samba-tool dbcheck --cross-ncs --fix'.  Users upgrading
from earlier alpha releases should contact the team for advice. 


NEW FEATURES
============

Samba 4.0 beta supports the server-side of the Active Directory logon
environment used by Windows 2000 and later, so we can do full domain
join and domain logon operations with these clients.

Our Domain Controller (DC) implementation includes our own built-in
LDAP server and Kerberos Key Distribution Center (KDC) as well as the
Samba3-like logon services provided over CIFS.  We correctly generate
the infamous Kerberos PAC, and include it with the Kerberos tickets we
issue.

Samba 4.0 beta ships with two distinct file servers.  We now use the
file server from the Samba 3.x series 'smbd' for all file serving by
default.  For pure file server work, the binaries users would expect
from that series (nmbd, winbindd, smbpasswd) continue to be available.

Samba 4.0 also ships with the 'NTVFS' file server.  This file server
is what was used in all previous alpha releases of Samba 4.0, and is
tuned to match the requirements of an AD domain controller.  We
continue to support this, not only to provide continuity to
installations that have deployed it as part of an AD DC, but also as a
running example of the NT-FSA architecture we expect to move smbd to in
the longer term.  

As mentioned above, this change to the default file server may cause
instability, as we learn about the real-world interactions between
these two key components. 

As DNS is an integral part of Active Directory, we also provide a DNS
solution, using the BIND DLZ mechanism in versions 9.8 and 9.9.
During the provision, a configuration file will be generated for bind
to make it use this plugin.  We also have a project to provide a
minimal internal DNS server from within the Samba process, for easier
'out of the box' configuration.  Note however that this is not yet
complete (pending addition of secure DNS update support).

To provide accurate timestamps to Windows clients, we integrate with
the NTP project to provide secured NTP replies. 

Finally, a new scripting interface has been added to Samba 4, allowing
Python programs to interface to Samba's internals, and many tools and
internal workings of the DC code is now implemented in python.


CHANGES SINCE beta4
=====================

For a list of changes since beta4, please see the git log.

$ git clone git://git.samba.org/samba.git
$ cd samba.git
$ git log samba-4.0.0beta4..samba-4.0.0beta5

Some major user-visible changes include:

- The issue with beta4 being unable to build with a released version of
  ldb has been resolved. 

- The two parameter tables for our two smb.conf parsing engines have
  been merged.  This removes the ugly (but harmless) "unknown
  parameter xxx" warnings, particularly from the smbd child process.

- Major issues have been fixed in conflict and missing/deleted parent
  handling in or DRS replication engine.

- Safety improvements to prevent corruption of read-write replicas
  by manual replication from a read-only replica.

- Improvements to dbcheck to correct incorrect instanceType values from
  the above and to relocate objects with missing parents.

- smbd no longer places all accounts in the 'Domain Users' of the AD
  domain to which it is joined

- AES support in NETLOGON Schannel

- DCE/RPC timeout handling no longer crashes

- "socket address" is now "nbt client socket address" as it only
  controls the binding of the NetBIOS client, not other protocols.
  See 'bind interfaces only = yes'.  This parameter is also now depricated.

- nmbd now always binds to it's broadcast sockets explicitly, rather
  than just relying on the socket address above.

Less visible, but important changes under the hood include:

- Continued work to support SMB2 and SMB3

- Continued work to use async IO to improve file server performance.

- Patches to ensure that talloc_tos() and talloc_stackframe() are
  always used correctly.

KNOWN ISSUES
============

- This release makes the s3fs file server the default, as this is the
  file server combination we will use for the Samba 4.0 release.

- Modifying of group policies by members of the Domain Administrators
  group is not possible with the s3fs file server, only with the ntvfs
  file server.  This is due to the underlying POSIX ACL not being set
  at provision time.

- For similar reasons, sites with ACLs stored by the ntvfs file server
  may wish to continue to use that file server implementation, as a
  posix ACL will similarly not be set in this case.

- Replication of DNS data from one AD server to another may not work.
  The DNS data used by the internal DNS server and bind9_dlz is stored
  in an application partition in our directory.  The replication of
  this partition is not yet reliable.

- Replication may fail on FreeBSD due to getaddrinfo() rejecting names
  containing _.  A workaround will be in the next beta.

- upgradeprovision should not be run when upgrading to this release
  from a recent release.  No important database format changes have
  been made since alpha16.  

- Installation on systems without a system iconv (and developer
  headers at compile time) is known to cause errors when dealing with
  non-ASCII characters.

- Domain member support in the 'samba' binary is in it's infancy, and
  is not comparable to the support found in winbindd.  As such, do not
  use the 'samba' binary (provided for the AD server) on a member
  server.

- There is no NetBIOS browsing support (network neighbourhood) in the
  'samba' binary (use nmbd and smbd instead)

- Clock Synchronisation is critical.  Many 'wrong password' errors are
  actually due to Kerberos objecting to a clock skew between client
  and server.  (The NTP work in the previous alphas are partly to assist
  with this problem).

- The DRS replication code may fail.  Please contact the team if you
  experience issues with DRS replication, as we have fixed many issues
  here in response to feedback from our production users. 


RUNNING Samba 4.0 as an AD DC
=============================

A short guide to setting up Samba 4 as an AD DC can be found on the wiki:

  http://wiki.samba.org/index.php/Samba4/HOWTO

#######################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 4.0 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================




Download Details
================

The release tarball is available from the following location:
 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0beta5.tar.gz

This release has been signed using GPG with Andrew's GPG key 28B436BB).

 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0beta5.tar.asc

To verify that the signature is correct, make sure that the tarball has
been unzipped and run:

$ gpg --verify samba-4.0.0beta5.tar.asc

Happy testing!

The Samba team
-- 
Andrew Bartlett                                http://samba.org/~abartlet/
Authentication Developer, Samba Team           http://samba.org












From kseeger at samba.org  Mon Aug  6 11:33:14 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Mon, 6 Aug 2012 19:33:14 +0200
Subject: [Announce] Samba 3.6.7 Available for Download
Message-ID: <E1SyRB4-00AZeM-Nm@intern.SerNet.DE>

===================================================================
					"Change is such hard work."

					 Billy Crystal
===================================================================


Release Announcements
=====================

This is is the latest stable release of Samba 3.6.

Major enhancements in Samba 3.6.7 include:

o  Fix resolving our own "Domain Local" groups (bug #9052).
o  Fix migrating printers while upgrading from 3.5.x (bug #9026).


Changes since 3.6.6:
--------------------

o   Jeremy Allison <jra at samba.org>
    * BUG 8974: Fix kernel oplocks when uid(file) != uid(process).
    * BUG 8989: Send correct responses to NT Transact Secondary when no data and
      no params for the Trans2 calls are set.
    * BUG 9034: Fix typo in set_re_uid() call when USE_SETRESUID selected in
      configure.


o   David Binderman <dcb314 at hotmail.com>
    * BUG 9062: rpcclient: Fix bad call to data_blob_const.


o   G?nther Deschner <gd at samba.org>
    * BUG 9026: Fix migrating printers while upgrading from 3.5.x.


o   David Disseldorp <ddiss at samba.org>
    * BUG 8719: Printing fails in function cups_job_submit.
    * BUG 9026: Fix migrating printers while upgrading from 3.5.x.


o   Olaf Flebbe <o.flebbe at science-computing.de>
    * BUG 8552: Correct documentation of "case sensitive".


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 8996: Fix build without ads support.


o   Volker Lendecke <vl at samba.org>
    * BUG 9003: Fix posix acl on gpfs.
    * BUG 9040: Using asynchronous IO with SMB2 can return NT_STATUS_FILE_CLOSED
      in error instead ofNT_STATUS_FILE_LOCK_CONFLICT.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 9002: Don't turn negative cache entries into valid idmappings.
    * BUG 9022: Make vfs_gpfs less verbose in get/set_xattr functions.
    * BUG 9057: Fix bugs in SMB2 credit handling code.


o   Jiri Popelka <jpopelka at redhat.com>
    * BUG 9055: Fix build against CUPS 1.6.


o   Jura Sasek <jiri.sasek at oracle.com>
    * BUG 9037: Fix 'net ads join' on T4 (sun4v) systems on Solaris 10.


o   Andreas Schneider <asn at samba.org>
    * BUG 9052: Fix resolving our own "Domain Local" groups.


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba corresponding product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/

The release notes are available online at:

        http://www.samba.org/samba/ftp/history/samba-3.6.7.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team


From kseeger at samba.org  Sun Aug 12 22:35:21 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Mon, 13 Aug 2012 06:35:21 +0200
Subject: [Announce] Samba 3.5.17 Available for Download
Message-ID: <E1T0mN7-00HSTW-EQ@intern.SerNet.DE>

=====================================================================
				"Sing like no one's listening,
				 love like you've never been hurt,
				 dance like nobody's watching,
				 and live like it's heaven on earth."

				 Mark Twain

=====================================================================


Release Announcements
=====================

This is the latest stable release of Samba 3.5.


Changes since 3.5.16:
---------------------

o   Jeremy Allison <jra at samba.org>
    * BUG 9034: Fix typo in set_re_uid() call when USE_SETRESUID selected in
      configure.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 8996: Fix build without ads support.
    * BUG 9011: Second part of a fix for bug #9011 (Build on HP-UX broken).


o   Stefan Metzmacher <metze at samba.org>
    * BUG 9022: Make vfs_gpfs less verbose in get/set_xattr functions.


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 3.5 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/stable

The release notes are available online at:

        http://www.samba.org/samba/history/samba-3.5.17.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team




From abartlet at samba.org  Tue Aug 14 04:39:19 2012
From: abartlet at samba.org (Andrew Bartlett)
Date: Tue, 14 Aug 2012 20:39:19 +1000
Subject: [ANNOUNCE] Samba 4.0 beta6
Message-ID: <1344940759.30439.97.camel@ruth>

We are proud to announce another beta release of Samba 4.0, beta6

(note: since this release was prepared, I think I've actually found the
memory leak mentioned below, and the fix for this is in master)


What's new in Samba 4.0 beta6
=============================

Samba 4.0 will be the next version of the Samba suite and incorporates
all the technology found in both the Samba4 alpha series and the
stable 3.x series. The primary additional features over Samba 3.6 are
support for the Active Directory logon protocols used by Windows 2000
and above.


WARNINGS
========

Samba 4.0 beta6 is not a final Samba release, however we are now making
good progress towards a Samba 4.0 release, of which this is a preview.
Be aware the this release contains the best of all of Samba's
technology parts, both a file server (that you can reasonably expect
to upgrade existing Samba 3.x releases to) and the AD domain
controller work previously known as 'samba4'.

Samba 4.0 is subjected to an awesome battery of tests on an automated
basis, we have found Samba 4.0 to be very stable in it's behavior.
However, we still recommend against upgrading production servers from
Samba 3.x release to Samba 4.0 beta at this stage.

In particular note that the new default configuration 's3fs' may have
different stability characteristics compared with our previous default
file server.  We are making this release so that we can find and fix
any of these issues that arise in the real world.  New AD DC
installations can provision or join with --use-ntvfs to obtain the
previous default file server.  See below how to continue using ntvfs
in an existing installation.

If you are upgrading, or looking to develop, test or deploy Samba 4.0
beta releases, you should backup all configuration and data.


UPGRADING
=========

Users upgrading from Samba 3.x domain controllers and wanting to use
Samba 4.0 as an AD DC should use the 'samba-tool domain
classicupgrade' command.  See the wiki for more details:
https://wiki.samba.org/index.php/Samba4/samba3upgrade/HOWTO 

Users upgrading from Samba 4.0 alpha and beta releases since alpha15 
should run 'samba-tool dbcheck --cross-ncs --fix'.  Users upgrading
from earlier alpha releases should contact the team for advice. 


NEW FEATURES
============

Samba 4.0 beta supports the server-side of the Active Directory logon
environment used by Windows 2000 and later, so we can do full domain
join and domain logon operations with these clients.

Our Domain Controller (DC) implementation includes our own built-in
LDAP server and Kerberos Key Distribution Center (KDC) as well as the
Samba3-like logon services provided over CIFS.  We correctly generate
the infamous Kerberos PAC, and include it with the Kerberos tickets we
issue.

Samba 4.0 beta ships with two distinct file servers.  We now use the
file server from the Samba 3.x series 'smbd' for all file serving by
default.  For pure file server work, the binaries users would expect
from that series (nmbd, winbindd, smbpasswd) continue to be available.

Samba 4.0 also ships with the 'NTVFS' file server.  This file server
is what was used in all previous alpha releases of Samba 4.0, and is
tuned to match the requirements of an AD domain controller.  We
continue to support this, not only to provide continuity to
installations that have deployed it as part of an AD DC, but also as a
running example of the NT-FSA architecture we expect to move smbd to in
the longer term.  

As mentioned above, this change to the default file server may cause
instability, as we learn about the real-world interactions between
these two key components. 

As DNS is an integral part of Active Directory, we also provide a DNS
solution, using the BIND DLZ mechanism in versions 9.8 and 9.9.
During the provision, a configuration file will be generated for bind
to make it use this plugin.  We also have a project to provide a
minimal internal DNS server from within the Samba process, for easier
'out of the box' configuration.  Note however that this is not yet
complete (pending addition of secure DNS update support).

To provide accurate timestamps to Windows clients, we integrate with
the NTP project to provide secured NTP replies. 

Finally, a new scripting interface has been added to Samba 4, allowing
Python programs to interface to Samba's internals, and many tools and
internal workings of the DC code is now implemented in python.


CHANGES SINCE beta5
=====================

For a list of changes since beta5, please see the git log.

$ git clone git://git.samba.org/samba.git
$ cd samba.git
$ git log samba-4.0.0beta5..samba-4.0.0beta6

Some major user-visible changes include:

- Provision is now faster, as we now correctly use the database
  indicies during the provision

- Support for handling of Extended Signatures (Session Key Protection)

- A (unverified at this time) fix for expanding memory use in our
  AD DRS replication server.

- A fix for supporting the userWorkstations restriction in the KDC

- Support for upgrading classic domains that may not have all the
  default domain policies set.

Less visible, but important changes under the hood include:

- Continued work to support SMB2 and SMB3

- Continued work to use async IO to improve file server performance.

- Patches to ensure that talloc_tos() and talloc_stackframe() are
  always used correctly.

- Preparation for correctly setting POSIX ACLs during provision.

KNOWN ISSUES
============

- This release makes the s3fs file server the default, as this is the
  file server combination we will use for the Samba 4.0 release.

- Modifying of group policies by members of the Domain Administrators
  group is not possible with the s3fs file server, only with the ntvfs
  file server.  This is due to the underlying POSIX ACL not being set
  at provision time.

- For similar reasons, sites with ACLs stored by the ntvfs file server
  may wish to continue to use that file server implementation, as a
  posix ACL will similarly not be set in this case.

- Replication of DNS data from one AD server to another may not work.
  The DNS data used by the internal DNS server and bind9_dlz is stored
  in an application partition in our directory.  The replication of
  this partition is not yet reliable.

- Replication may fail on FreeBSD due to getaddrinfo() rejecting names
  containing _.  A workaround will be in a future next beta.

- upgradeprovision should not be run when upgrading to this release
  from a recent release.  No important database format changes have
  been made since alpha16.  

- Installation on systems without a system iconv (and developer
  headers at compile time) is known to cause errors when dealing with
  non-ASCII characters.

- Domain member support in the 'samba' binary is in it's infancy, and
  is not comparable to the support found in winbindd.  As such, do not
  use the 'samba' binary (provided for the AD server) on a member
  server.

- There is no NetBIOS browsing support (network neighbourhood) in the
  'samba' binary (use nmbd and smbd instead)

- Clock Synchronisation is critical.  Many 'wrong password' errors are
  actually due to Kerberos objecting to a clock skew between client
  and server.  (The NTP work in the previous alphas are partly to assist
  with this problem).

- The DRS replication code may fail.  Please contact the team if you
  experience issues with DRS replication, as we have fixed many issues
  here in response to feedback from our production users. 


RUNNING Samba 4.0 as an AD DC
=============================

A short guide to setting up Samba 4 as an AD DC can be found on the wiki:

  http://wiki.samba.org/index.php/Samba4/HOWTO

#######################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 4.0 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================




Download Details
================

The release tarball is available from the following location:
 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0beta6.tar.gz

This release has been signed using GPG with Andrew's GPG key 28B436BB).

 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0beta6.tar.asc

To verify that the signature is correct, make sure that the tarball has
been unzipped and run:

$ gpg --verify samba-4.0.0beta6.tar.asc

Happy testing!

The Samba team
-- 
Andrew Bartlett                                http://samba.org/~abartlet/
Authentication Developer, Samba Team           http://samba.org













From abartlet at samba.org  Mon Aug 27 18:25:39 2012
From: abartlet at samba.org (Andrew Bartlett)
Date: Tue, 28 Aug 2012 10:25:39 +1000
Subject: [ANNOUNCE] Samba 4.0 beta7
Message-ID: <1346113539.28906.15.camel@obed>

We are proud to announce another beta release of Samba 4.0, beta7


What's new in Samba 4.0 beta7
=============================

Samba 4.0 will be the next version of the Samba suite and incorporates
all the technology found in both the Samba4 alpha series and the
stable 3.x series. The primary additional features over Samba 3.6 are
support for the Active Directory logon protocols used by Windows 2000
and above.


WARNINGS
========

Samba 4.0 beta7 is not a final Samba release, however we are now making
good progress towards a Samba 4.0 release.  However, this is expected to be the
last beta release before we start on our release candidate series.

This release contains the best of all of Samba's
technology parts, both a file server (that you can reasonably expect
to upgrade existing Samba 3.x releases to) and the AD domain
controller work previously known as 'samba4'.

Samba 4.0 is subjected to an awesome battery of tests on an automated
basis, we have found Samba 4.0 to be very stable in it's behaviour.
However, as with all our pre-releases we still recommend against
upgrading production servers from Samba 3.x release to Samba 4.0 beta
at this stage.

If you are upgrading, or looking to develop, test or deploy Samba 4.0
beta releases, you should backup all configuration and data.


UPGRADING
=========

Users upgrading from Samba 3.x domain controllers and wanting to use
Samba 4.0 as an AD DC should use the 'samba-tool domain
classicupgrade' command.  See the wiki for more details:
https://wiki.samba.org/index.php/Samba4/samba3upgrade/HOWTO 

Users upgrading from Samba 4.0 alpha and beta releases since alpha15
should run 'samba-tool dbcheck --cross-ncs --fix' before re-starting
Samba.  Users upgrading from earlier alpha releases should contact the
team for advice.

Users upgrading an AD DC from any previous release should run
'samba-tool ntacl sysvolreset' to re-sync ACLs on the sysvol share
with those matching the GPOs in LDAP and the defaults from an initial
provision.  This will set an underlying POSIX ACL if required (eg not
using the NTVFS file server).

NEW FEATURES
============

Samba 4.0 beta supports the server-side of the Active Directory logon
environment used by Windows 2000 and later, so we can do full domain
join and domain logon operations with these clients.

Our Domain Controller (DC) implementation includes our own built-in
LDAP server and Kerberos Key Distribution Center (KDC) as well as the
Samba3-like logon services provided over CIFS.  We correctly generate
the infamous Kerberos PAC, and include it with the Kerberos tickets we
issue.

Samba 4.0 beta ships with two distinct file servers.  We now use the
file server from the Samba 3.x series 'smbd' for all file serving by
default.

Samba 4.0 also ships with the 'NTVFS' file server.  This file server
is what was used in all previous alpha releases of Samba 4.0, and is
tuned to match the requirements of an AD domain controller.  We
continue to support this, not only to provide continuity to
installations that have deployed it as part of an AD DC, but also as a
running example of the NT-FSA architecture we expect to move smbd to in
the longer term.  

For pure file server work, the binaries users would expect from that
series (nmbd, winbindd, smbpasswd) continue to be available.  When
running an AD DC, you only need to run 'samba' (not
nmbd/smbd/winbind), as the required services are co-ordinated by this
master binary.

As DNS is an integral part of Active Directory, we also provide a DNS
solution, using the BIND DLZ mechanism in versions 9.8 and 9.9.
During the provision, a configuration file will be generated for bind
to make it use this plugin.  We also have a project to provide a
minimal internal DNS server from within the Samba process, for easier
'out of the box' configuration.  Note however that this is not yet
complete (pending addition of secure DNS update support).

To provide accurate timestamps to Windows clients, we integrate with
the NTP project to provide secured NTP replies.  To use you need to
start ntpd and configure it with the 'restrict ... ms-sntp' and
ntpsigndsocket options.

Finally, a new scripting interface has been added to Samba 4, allowing
Python programs to interface to Samba's internals, and many tools and
internal workings of the DC code is now implemented in python.


CHANGES SINCE beta6
=====================

For a list of changes since beta6, please see the git log.

$ git clone git://git.samba.org/samba.git
$ cd samba.git
$ git log samba-4.0.0beta6..samba-4.0.0beta7

Some major user-visible changes include:

- ACLs are now set during provision at the POSIX layer for the sysvol
  share.  This allows group policies to be modified by Domain
  Administrators (Policy Administrators) that are not the actual
  Administrator user.

- A number of verified fixes for expanding memory use across the AD
  domain controller, including in the Bind9 DLZ module.

- A fix for bug #9097 (the winbind in the AD DC would lock up under
  parallel requests).

- wbinfo --ping-dc now returns helpful information on what failed and
  against which DC it failed

- SMB3 encryption support

- New 'samba-tool ntacl' commands:
  - samba-tool ntacl sysvolreset
  - samba-tool ntacl sysvolcheck

Less visible, but important changes under the hood include:

- Continued work to support SMB2 and SMB3

- Continued work to use async IO to improve file server performance.

- Patches to ensure that talloc_tos() and talloc_stackframe() are
  always used correctly.

- We can now test the implementation of NT -> POSIX ACL mapping in a
  unit test with VFS bindings exposing both to python.  We also store
  the posix ACL in a tdb during make test, allowing testing of this
  feature on all platforms, regardless of local FS settings.

- Python bindings for the source3 async libsmb library (for use in testing)

KNOWN ISSUES
============

- This release makes the s3fs file server the default, as this is the
  file server combination we will use for the Samba 4.0 release.

- For similar reasons, sites with ACLs stored by the ntvfs file server
  may wish to continue to use that file server implementation, as a
  posix ACL will similarly not be set in this case.

- Replication of DNS data from one AD server to another may not work.
  The DNS data used by the internal DNS server and bind9_dlz is stored
  in an application partition in our directory.  The replication of
  this partition is not yet reliable.

- Replication may fail on FreeBSD due to getaddrinfo() rejecting names
  containing _.  A workaround will be in a future next beta.

- upgradeprovision should not be run when upgrading to this release
  from a recent release.  No important database format changes have
  been made since alpha16.  

- Installation on systems without a system iconv (and developer
  headers at compile time) is known to cause errors when dealing with
  non-ASCII characters.

- Domain member support in the 'samba' binary is in it's infancy, and
  is not comparable to the support found in winbindd.  As such, do not
  use the 'samba' binary (provided for the AD server) on a member
  server.

- There is no NetBIOS browsing support (network neighbourhood)
  available for the AD domain controller.  (Support in nmbd and smbd
  for classic domains and member/standalone servers is unchanged).

- Clock Synchronisation is critical.  Many 'wrong password' errors are
  actually due to Kerberos objecting to a clock skew between client
  and server.  (The NTP work in the previous alphas are partly to assist
  with this problem).

- The DRS replication code may fail.  Please contact the team if you
  experience issues with DRS replication, as we have fixed many issues
  here in response to feedback from our production users. 


RUNNING Samba 4.0 as an AD DC
=============================

A short guide to setting up Samba 4 as an AD DC can be found on the wiki:

  http://wiki.samba.org/index.php/Samba4/HOWTO

#######################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 4.0 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================



Download Details
================

The release tarball is available from the following location:
 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0beta7.tar.gz

This release has been signed using GPG with Andrew's GPG key 28B436BB).

 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0beta7.tar.asc

To verify that the signature is correct, make sure that the tarball has
been unzipped and run:

$ gpg --verify samba-4.0.0beta7.tar.asc

Happy testing!

The Samba team
-- 
Andrew Bartlett                                http://samba.org/~abartlet/
Authentication Developer, Samba Team           http://samba.org














From abartlet at samba.org  Thu Aug 30 20:22:50 2012
From: abartlet at samba.org (Andrew Bartlett)
Date: Fri, 31 Aug 2012 12:22:50 +1000
Subject: [ANNOUNCE] Samba 4.0 beta8
Message-ID: <1346379770.11136.1.camel@obed>

We are proud to announce another beta release of Samba 4.0, beta8

Specifically, this release addresses the panic on startup all users
upgrading to beta7 experienced.


What's new in Samba 4.0 beta8
=============================

Samba 4.0 will be the next version of the Samba suite and incorporates
all the technology found in both the Samba4 alpha series and the
stable 3.x series. The primary additional features over Samba 3.6 are
support for the Active Directory logon protocols used by Windows 2000
and above.


WARNINGS
========

Samba 4.0 beta8 is not a final Samba release, however we are now making
good progress towards a Samba 4.0 release.  However, this is expected to be the
last beta release before we start on our release candidate series.

This release contains the best of all of Samba's
technology parts, both a file server (that you can reasonably expect
to upgrade existing Samba 3.x releases to) and the AD domain
controller work previously known as 'samba4'.

Samba 4.0 is subjected to an awesome battery of tests on an automated
basis, we have found Samba 4.0 to be very stable in it's behaviour.
However, as with all our pre-releases we still recommend against
upgrading production servers from Samba 3.x release to Samba 4.0 beta
at this stage.

If you are upgrading, or looking to develop, test or deploy Samba 4.0
beta releases, you should backup all configuration and data.


UPGRADING
=========

Users upgrading from Samba 3.x domain controllers and wanting to use
Samba 4.0 as an AD DC should use the 'samba-tool domain
classicupgrade' command.  See the wiki for more details:
https://wiki.samba.org/index.php/Samba4/samba3upgrade/HOWTO 

Users upgrading from Samba 4.0 alpha and beta releases since alpha15
should run 'samba-tool dbcheck --cross-ncs --fix' before re-starting
Samba.  Users upgrading from earlier alpha releases should contact the
team for advice.

Users upgrading an AD DC from any previous release should run
'samba-tool ntacl sysvolreset' to re-sync ACLs on the sysvol share
with those matching the GPOs in LDAP and the defaults from an initial
provision.  This will set an underlying POSIX ACL if required (eg not
using the NTVFS file server).

NEW FEATURES
============

Samba 4.0 beta supports the server-side of the Active Directory logon
environment used by Windows 2000 and later, so we can do full domain
join and domain logon operations with these clients.

Our Domain Controller (DC) implementation includes our own built-in
LDAP server and Kerberos Key Distribution Center (KDC) as well as the
Samba3-like logon services provided over CIFS.  We correctly generate
the infamous Kerberos PAC, and include it with the Kerberos tickets we
issue.

Samba 4.0 beta ships with two distinct file servers.  We now use the
file server from the Samba 3.x series 'smbd' for all file serving by
default.

Samba 4.0 also ships with the 'NTVFS' file server.  This file server
is what was used in all previous alpha releases of Samba 4.0, and is
tuned to match the requirements of an AD domain controller.  We
continue to support this, not only to provide continuity to
installations that have deployed it as part of an AD DC, but also as a
running example of the NT-FSA architecture we expect to move smbd to in
the longer term.  

For pure file server work, the binaries users would expect from that
series (nmbd, winbindd, smbpasswd) continue to be available.  When
running an AD DC, you only need to run 'samba' (not
nmbd/smbd/winbind), as the required services are co-coordinated by this
master binary.

As DNS is an integral part of Active Directory, we also provide a DNS
solution, using the BIND DLZ mechanism in versions 9.8 and 9.9.
During the provision, a configuration file will be generated for bind
to make it use this plugin.  We also have a project to provide a
minimal internal DNS server from within the Samba process, for easier
'out of the box' configuration.  Note however that this is not yet
complete (pending addition of secure DNS update support).

To provide accurate timestamps to Windows clients, we integrate with
the NTP project to provide secured NTP replies.  To use you need to
start ntpd and configure it with the 'restrict ... ms-sntp' and
ntpsigndsocket options.

Finally, a new scripting interface has been added to Samba 4, allowing
Python programs to interface to Samba's internals, and many tools and
internal workings of the DC code is now implemented in python.


CHANGES SINCE beta7
=====================

For a list of changes since beta7, please see the git log.

$ git clone git://git.samba.org/samba.git
$ cd samba.git
$ git log samba-4.0.0beta7..samba-4.0.0beta8

Some major user-visible changes include:

- A fix for a segfault/abort on startup of the 'samba' binary in the
  credentials_secrets code. 

- A fix for samba-tool classicupgrade of pdb_ldap-based domains

- A fix for samba-tool domain exportkeyab only exporting DES keys

- Printing is now enabled on the AD DC

- Fix bug #9124 - Samba fails to set "inherited" bit on inherited ACE's.

- We now avoid printing secret attributes (such as unicodePwd and
  suppliementalCredentials) in ldb trace logs

- s3-printing: fix bug 9123 lprng job tracking errors

- A fix for building with MIT Kerberos

KNOWN ISSUES
============

- 'samba-tool domain classicupgrade' will fail when setting ACLs on
  the GPO folders with NT_STATUS_INVALID_ONWER in the default
  configuration.  This happens if, as is typical a 'domain admins'
  group (-512) is mapped in the passdb backend being upgraded.  This
  is because the group mapping to a GID only prevents Samba from
  allocating a uid for that group.  The uid is needed so the 'domain
  admins' group can own the GPO file objects.

  To work around this issue, remove the 'domain admins' group before
  upgrade, as it will be re-created automatically.  You will
  of course need to fill in the group membership again.  A future release
  will make this automatic, or find some other workaround.

- This release makes the s3fs file server the default, as this is the
  file server combination we will use for the Samba 4.0 release.

- For similar reasons, sites with ACLs stored by the ntvfs file server
  may wish to continue to use that file server implementation, as a
  posix ACL will similarly not be set in this case.

- Replication of DNS data from one AD server to another may not work.
  The DNS data used by the internal DNS server and bind9_dlz is stored
  in an application partition in our directory.  The replication of
  this partition is not yet reliable.

- Replication may fail on FreeBSD due to getaddrinfo() rejecting names
  containing _.  A workaround will be in a future beta.

- upgradeprovision should not be run when upgrading to this release
  from a recent release.  No important database format changes have
  been made since alpha16.  

- Installation on systems without a system iconv (and developer
  headers at compile time) is known to cause errors when dealing with
  non-ASCII characters.

- Domain member support in the 'samba' binary is in it's infancy, and
  is not comparable to the support found in winbindd.  As such, do not
  use the 'samba' binary (provided for the AD server) on a member
  server.

- There is no NetBIOS browsing support (network neighbourhood)
  available for the AD domain controller.  (Support in nmbd and smbd
  for classic domains and member/standalone servers is unchanged).

- Clock Synchronisation is critical.  Many 'wrong password' errors are
  actually due to Kerberos objecting to a clock skew between client
  and server.  (The NTP work in the previous alphas are partly to assist
  with this problem).

- The DRS replication code may fail.  Please contact the team if you
  experience issues with DRS replication, as we have fixed many issues
  here in response to feedback from our production users. 


RUNNING Samba 4.0 as an AD DC
=============================

A short guide to setting up Samba 4 as an AD DC can be found on the wiki:

  http://wiki.samba.org/index.php/Samba4/HOWTO

#######################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 4.0 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================



Download Details
================

The release tarball is available from the following location:
 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0beta8.tar.gz

This release has been signed using GPG with Andrew's GPG key 28B436BB).

 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0beta8.tar.asc

To verify that the signature is correct, make sure that the tarball has
been unzipped and run:

$ gpg --verify samba-4.0.0beta8.tar.asc

Happy testing!

The Samba team
-- 
Andrew Bartlett                                http://samba.org/~abartlet/
Authentication Developer, Samba Team           http://samba.org















From kseeger at samba.org  Thu Sep 13 04:40:56 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Thu, 13 Sep 2012 12:40:56 +0200
Subject: [Announce] Samba 4.0.0rc1 Available for Download
Message-ID: <E1TC6qu-00BM8L-E8@intern.SerNet.DE>

Release Announcements
---------------------

This is the first release candidate of Samba 4.0.0!  This is *not*
intended for production environments and is designed for testing
purposes only.  Please report any defects via the Samba bug reporting
system at https://bugzilla.samba.org/.


What's new in Samba 4.0.0rc1
=============================

Samba 4.0 will be the next version of the Samba suite and incorporates
all the technology found in both the Samba4 alpha series and the
stable 3.x series. The primary additional features over Samba 3.6 are
support for the Active Directory logon protocols used by Windows 2000
and above.


WARNINGS
========

Samba 4.0.0rc1 is not a final Samba release, however we are now making
good progress towards a Samba 4.0 release.

This release contains the best of all of Samba's
technology parts, both a file server (that you can reasonably expect
to upgrade existing Samba 3.x releases to) and the AD domain
controller work previously known as 'samba4'.

Samba 4.0 is subjected to an awesome battery of tests on an automated
basis, we have found Samba 4.0 to be very stable in it's behaviour.
However, as with all our pre-releases we still recommend against
upgrading production servers from Samba 3.x release to Samba 4.0.0rc1
at this stage.

If you are upgrading, or looking to develop, test or deploy Samba 4.0.0
release candidates, you should backup all configuration and data.


UPGRADING
=========

Users upgrading from Samba 3.x domain controllers and wanting to use
Samba 4.0 as an AD DC should use the 'samba-tool domain
classicupgrade' command.  See the wiki for more details:
https://wiki.samba.org/index.php/Samba4/samba3upgrade/HOWTO

Users upgrading from Samba 4.0 alpha and beta releases since alpha15
should run 'samba-tool dbcheck --cross-ncs --fix' before re-starting
Samba.  Users upgrading from earlier alpha releases should contact the
team for advice.

Users upgrading an AD DC from any previous release should run
'samba-tool ntacl sysvolreset' to re-sync ACLs on the sysvol share
with those matching the GPOs in LDAP and the defaults from an initial
provision.  This will set an underlying POSIX ACL if required (eg not
using the NTVFS file server).

If you used the BIND9_FLATFILE or BIND9_DLZ features,
you'll have to add '-dns' to the 'server services' option,
as the internal dns server (SAMBA_INTERNAL) is the default now.


NEW FEATURES
============

Samba 4.0 supports the server-side of the Active Directory logon
environment used by Windows 2000 and later, so we can do full domain
join and domain logon operations with these clients.

Our Domain Controller (DC) implementation includes our own built-in
LDAP server and Kerberos Key Distribution Center (KDC) as well as the
Samba3-like logon services provided over CIFS.  We correctly generate
the infamous Kerberos PAC, and include it with the Kerberos tickets we
issue.

Samba 4.0 ships with two distinct file servers.  We now use the
file server from the Samba 3.x series 'smbd' for all file serving by
default.

Samba 4.0 also ships with the 'NTVFS' file server.  This file server
is what was used in all previous alpha releases of Samba 4.0, and is
tuned to match the requirements of an AD domain controller.  We
continue to support this, not only to provide continuity to
installations that have deployed it as part of an AD DC, but also as a
running example of the NT-FSA architecture we expect to move smbd to in
the longer term.

For pure file server work, the binaries users would expect from that
series (nmbd, winbindd, smbpasswd) continue to be available.  When
running an AD DC, you only need to run 'samba' (not
nmbd/smbd/winbind), as the required services are co-coordinated by this
master binary.

As DNS is an integral part of Active Directory, we also provide two DNS
solutions, a simple internal DNS server for 'out of the box' configurations
and a more elaborate BIND plugin using the BIND DLZ mechanism in versions
9.8 and 9.9. During the provision, you can select which backend to use.
With the internal backend, your DNS server is good to go.
If you chose the BIND_DLZ backend, a configuration file will be generated
for bind to make it use this plugin, as well as a file explaining how to
set up bind.

To provide accurate timestamps to Windows clients, we integrate with
the NTP project to provide secured NTP replies.  To use you need to
start ntpd and configure it with the 'restrict ... ms-sntp' and
ntpsigndsocket options.

Finally, a new scripting interface has been added to Samba 4, allowing
Python programs to interface to Samba's internals, and many tools and
internal workings of the DC code is now implemented in python.


CHANGES SINCE beta8
===================

For a list of changes since beta8, please see the git log.

$ git clone git://git.samba.org/samba.git
$ cd samba.git
$ git log samba-4.0.0beta8..samba-4.0.0rc1

Some major user-visible changes include:

- The smbd file server now offers SMB3 as the maximum protocol
  by default. Samba can negotiate version 3 of the SMB protocol
  and supports the required features, including all required
  features of SMB 2.1 and SMB 2.0. Note that this does not imply
  that Samba implements all features of SMB3 since many of them
  are optional capabilities. Examples of features that Samba does
  not implement yet are leases (SMB 2.1) and multi-channel (SMB 3).

  Samba now offers an initial support for SMB2 durable file handles.
  These are enabled by default and can be turned off on a per share
  basis by setting "durable handles = no" on the share configuration.
  Note that in order to prevent conflicts with other applications
  accessing the same files, durable handles are only granted on
  shares that are configured for CIFS/SMB2-only access, i.e. more
  explicitly shares that are configured for minimal interoperability
  with these settings:

    kernel oplocks = no
    kernel share modes = no
    posix locking = no

  The option "kernel share modes" has been introduced to be able
  to turn the translation of SMB share modes into kernel flocks
  off.

- The 'provision' script was merged into 'samba-tool'
  as 'samba-tool domain provision' the arguments are still
  the same.

- The 'updateprovision' script was renamed to 'samba_upgradeprovision'.

- We changed the default dns implementation to the internal dns server
  (SAMBA_INTERNAL). BIND9_FLATFILE and BIND9_DLZ are still available,
  but you'll have to add '-dns' to the 'server services' option
  to disable the internal dns server.
  The default for 'allow dns updates' has changed to 'secure only'.


KNOWN ISSUES
============

- 'samba-tool domain classicupgrade' will fail when setting ACLs on
  the GPO folders with NT_STATUS_INVALID_ONWER in the default
  configuration.  This happens if, as is typical a 'domain admins'
  group (-512) is mapped in the passdb backend being upgraded.  This
  is because the group mapping to a GID only prevents Samba from
  allocating a uid for that group.  The uid is needed so the 'domain
  admins' group can own the GPO file objects.

  To work around this issue, remove the 'domain admins' group before
  upgrade, as it will be re-created automatically.  You will
  of course need to fill in the group membership again.  A future release
  will make this automatic, or find some other workaround.

- This release makes the s3fs file server the default, as this is the
  file server combination we will use for the Samba 4.0 release.

- For similar reasons, sites with ACLs stored by the ntvfs file server
  may wish to continue to use that file server implementation, as a
  posix ACL will similarly not be set in this case.

- Replication of DNS data from one AD server to another may not work.
  The DNS data used by the internal DNS server and bind9_dlz is stored
  in an application partition in our directory.  The replication of
  this partition is not yet reliable.

- Replication may fail on FreeBSD due to getaddrinfo() rejecting names
  containing _.  A workaround will be in a future release.

- samba_upgradeprovision should not be run when upgrading to this release
  from a recent release.  No important database format changes have
  been made since alpha16.

- Installation on systems without a system iconv (and developer
  headers at compile time) is known to cause errors when dealing with
  non-ASCII characters.

- Domain member support in the 'samba' binary is in it's infancy, and
  is not comparable to the support found in winbindd.  As such, do not
  use the 'samba' binary (provided for the AD server) on a member
  server.

- There is no NetBIOS browsing support (network neighbourhood)
  available for the AD domain controller.  (Support in nmbd and smbd
  for classic domains and member/standalone servers is unchanged).

- Clock Synchronisation is critical.  Many 'wrong password' errors are
  actually due to Kerberos objecting to a clock skew between client
  and server.  (The NTP work in the previous alphas are partly to assist
  with this problem).

- The DRS replication code may fail.  Please contact the team if you
  experience issues with DRS replication, as we have fixed many issues
  here in response to feedback from our production users. 


RUNNING Samba 4.0 as an AD DC
=============================

A short guide to setting up Samba 4 as an AD DC can be found on the wiki:

  http://wiki.samba.org/index.php/Samba4/HOWTO


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 4.0 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================



================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/rc/

The release notes are available online at:

	http://www.samba.org/samba/ftp/rc/WHATSNEW-4-0-0rc1.txt

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team

From kseeger at samba.org  Fri Sep 14 00:58:30 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Fri, 14 Sep 2012 08:58:30 +0200
Subject: [Announce] Samba 4.0.0rc1 Available for Download
In-Reply-To: <CAFB9KM3WAPDZcbj-1vSerpGwy7AcA3JwFottQK5rZ5X0XrphEw@mail.gmail.com>
References: <E1TC6qu-00BM8L-E8@intern.SerNet.DE>
	<CAFB9KM3WAPDZcbj-1vSerpGwy7AcA3JwFottQK5rZ5X0XrphEw@mail.gmail.com>
Message-ID: <E1TCPrD-00CBYE-7F@intern.SerNet.DE>

Hi Scott,

On Thu, Sep 13, 2012 at 10:55:55PM -0400, Scott Lovenberg wrote:
> On Thu, Sep 13, 2012 at 6:40 AM, Karolin Seeger <kseeger at samba.org> wrote:
> [...]
> > - Domain member support in the 'samba' binary is in it's infancy, and
> >   is not comparable to the support found in winbindd.  As such, do not
> >   use the 'samba' binary (provided for the AD server) on a member
> >   server.
> 
> Stupid "bug" report, "its" should be used above, not "it's".  You want
> the possessive, not the contraction.
> Just for future RC release notes (it's been bothering me since the
> later beta release notes). :)

right, thanks for reporting!
A patch has been pushed to autobuild.

Cheers,
Karolin

-- 
Samba			http://www.samba.org
SerNet			http://www.sernet.de
sambaXP			http://www.sambaxp.org


From kseeger at samba.org  Fri Sep 14 01:01:18 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Fri, 14 Sep 2012 09:01:18 +0200
Subject: [Announce] Samba 4.0.0rc1 Available for Download
In-Reply-To: <CAA=pZzMKPM+q=aSAV_DrpSA7-aL85U4K3QgLUm1ST62jx9mc3g@mail.gmail.com>
References: <E1TC6qu-00BM8L-E8@intern.SerNet.DE>
	<CAFB9KM3WAPDZcbj-1vSerpGwy7AcA3JwFottQK5rZ5X0XrphEw@mail.gmail.com>
	<CAA=pZzMKPM+q=aSAV_DrpSA7-aL85U4K3QgLUm1ST62jx9mc3g@mail.gmail.com>
Message-ID: <E1TCPtu-00CBo9-Eo@intern.SerNet.DE>

Hi Ricky,

On Thu, Sep 13, 2012 at 11:48:44PM -0500, Ricky Nance wrote:
> Maybe this will help ;) I also cleaned up references to 'beta'.

thanks for reporting and providing the patch!
Your changes have been pushed to autobuild (together with other fixes).

Thanks!

Cheers,
Karolin

-- 
Samba			http://www.samba.org
SerNet			http://www.sernet.de
sambaXP			http://www.sambaxp.org


From kseeger at samba.org  Mon Sep 17 02:00:58 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Mon, 17 Sep 2012 10:00:58 +0200
Subject: [Announce] Samba 3.6.8 Available for Download
Message-ID: <E1TDWGI-00EOCU-VR@intern.SerNet.DE>

====================================================================
					"Laughter is inner jogging."

					 Norman Cousins
====================================================================


Release Announcements
=====================

This is is the latest stable release of Samba 3.6.

Major enhancements in Samba 3.6.8 include:

o  Fix crash bug in smbd caused by a blocking lock followed by
   close (bug #9084).
o  Fix Winbind panic if we couldn't find the domain (bug #9135).


Changes since 3.6.7:
--------------------

o   Jeremy Allison <jra at samba.org>
    * BUG 9058: Fix smbstatus code dump when a file entry has delete tokens.
    * BUG 9098: Fix refreshing of Kerberos tickets in Winbind.
    * BUG 9124: Fix setting of "inherited" bit on inherited ACE's.


o   Christian Ambach <ambi at samba.org>
    * BUG 9137: Make 'smbclient allinfo' show the snapshot list.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 9066: "Domain Users" incorrectly added as additional group on domain
      members.
    * BUG 9067: Use correct RID for "Domain Guests" primary group.


o   David Binderman <dcb314 at hotmail.com>
    * BUG 9065: Fix bad call to memcpy source3/registry/regfio.c.


o   David Disseldorp <ddiss at samba.org>
    * BUG 9123: Fix lprng job tracking errors.


o   Salvador I. Gonzalez <sgonzalez at codejunkie.net>
    * BUG 9088: Fix smbclient/tarmode panic when connecting to Windows 2000
      clients.


o   Hargagan <shargagan at novell.com>
    * BUG 9085: Fix NMB registration for a duplicate workstation.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 9037: Open and netbsd have the md5 symbols in libc.
    * BUG 9144: Fix nfs quota support with Linux nfs4 mounts.


o   Volker Lendecke <vl at samba.org>
    * BUG 9037: Fix name clash in MD5 causing the "net ads join" to fail on
      T4 (sun4v) systems on Solaris 10.
    * BUG 9058: Backport FSCTL codes from master.
    * BUG 9084: Fix crash bug in smbd caused by a blocking lock followed by
      close.
    * BUG 9150: Valid open requests can cause smbd assert due to incorrect
      oplock handling on delete requests.


o   Herb Lewis <hlewis at panasas.com>
    * BUG 9104: Fix identification of idle clients in Winbind to avoid crashes
      and NDR parsing errors.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 9058: Fix segfault in smbstatus.


o   Andreas Schneider <asn at samba.org>
    * BUG 9111: Fix compilation with newer MIT Kerberos which hides internal
      symbols.
    * BUG 9112: Fix flooding the logs with records we don't find in pcap.
    * BUG 9122: Initialize the print backend after we setup winreg.
    * BUG 9135: Fix Winbind panic if we couldn't find the domain.


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba corresponding product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/

The release notes are available online at:

        http://www.samba.org/samba/ftp/history/samba-3.6.8.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team


From kseeger at samba.org  Mon Sep 24 11:55:24 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Mon, 24 Sep 2012 19:55:24 +0200
Subject: [Announce] Samba 3.5.18 Available for Download
Message-ID: <E1TGCsO-005Gom-Te@intern.SerNet.DE>

=====================================================================
				"When you are courting a nice girl an
				 hour seems like a second. When you
				 sit on a red-hot cinder a second
				 seems like an hour.
				 That's relativity.

				 Albert Einstein

=====================================================================


Release Announcements
=====================

This is the latest stable release of Samba 3.5.

Major enhancements in Samba 3.5.18 include:

o  Fix a smbd crash in reply_lockingX_error (bug #9084).
o  Fix Winbind crashes caused by mis-identified idle clients (bug #9104).
o  Desktop Managers (xdm, gdm, lightdm...) crash with SIGSEGV in
   _pam_winbind_change_pwd() when password is expiring (bug #9013).


Changes since 3.5.17:
---------------------

o   Michael Adam <obnox at samba.org>
    * BUG 7788: Clarify the idmap_rid manpage.


o   Jeremy Allison <jra at samba.org>
    * BUG 9098: Winbind does not refresh Kerberos tickets.
    * BUG 9147: Winbind can't fetch user or group info from AD via LDAP.
    * BUG 9150: Valid open requests can cause smbd assert due to incorrect
      oplock handling on delete requests.


o   Neil R. Goldberg <ngoldber at mitre.org>
    * BUG 9100: Winbind doesn't return "Domain Local" groups from own domain.


o   Hargagan <shargagan at novell.com>
    * BUG 9085: NMB registration for a duplicate workstation fails with
      registration refuse.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 7814: Fix build of sysquote_xfs.
    * BUG 8402: Winbind log spammed with idmap messages.


o   Volker Lendecke <vl at samba.org>
    * BUG 9084: Fix a smbd crash in reply_lockingX_error.


o   Herb Lewis <hlewis at panasas.com>
    * BUG 9104: Fix Winbind crashes caused by mis-identified idle clients.


o   Luca Lorenzetto <lorenzetto-luca at ubuntu-it.org>
    * BUG 9013: Desktop Managers (xdm, gdm, lightdm...) crash with SIGSEGV in
      _pam_winbind_change_pwd() when password is expiring.


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 3.5 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/stable

The release notes are available online at:

        http://www.samba.org/samba/history/samba-3.5.18.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team




From kseeger at samba.org  Tue Oct  2 04:18:17 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Tue, 2 Oct 2012 12:18:17 +0200
Subject: [Announce] Samba 4.0.0rc2 Available for Download
Message-ID: <E1TIzYQ-00BxfA-Jq@intern.SerNet.DE>

Release Announcements
---------------------

This is the second release candidate of Samba 4.0.  This is *not*
intended for production environments and is designed for testing
purposes only.  Please report any defects via the Samba bug reporting
system at https://bugzilla.samba.org/.

Samba 4.0 will be the next version of the Samba suite and incorporates
all the technology found in both the Samba4 series and the
stable 3.x series. The primary additional features over Samba 3.6 are
support for the Active Directory logon protocols used by Windows 2000
and above.

This release contains the best of all of Samba's
technology parts, both a file server (that you can reasonably expect
to upgrade existing Samba 3.x releases to) and the AD domain
controller work previously known as 'samba4'.

If you are upgrading, or looking to develop, test or deploy Samba 4.0
releases candidates, you should backup all configuration and data.


UPGRADING
=========

Users upgrading from Samba 3.x domain controllers and wanting to use
Samba 4.0 as an AD DC should use the 'samba-tool domain
classicupgrade' command.  See the wiki for more details:
https://wiki.samba.org/index.php/Samba4/samba3upgrade/HOWTO.

Users upgrading from Samba 4.0 alpha and beta releases since alpha15
should run 'samba-tool dbcheck --cross-ncs --fix' before re-starting
Samba.  Users upgrading from earlier alpha releases should contact the
team for advice.

Users upgrading an AD DC from any previous release should run
'samba-tool ntacl sysvolreset' to re-sync ACLs on the sysvol share
with those matching the GPOs in LDAP and the defaults from an initial
provision.  This will set an underlying POSIX ACL if required (eg not
using the NTVFS file server).

If you used the BIND9_FLATFILE or BIND9_DLZ features,
you'll have to add '-dns' to the 'server services' option,
as the internal dns server (SAMBA_INTERNAL) is the default now.


NEW FEATURES
============

Samba 4.0 supports the server-side of the Active Directory logon
environment used by Windows 2000 and later, so we can do full domain
join and domain logon operations with these clients.

Our Domain Controller (DC) implementation includes our own built-in
LDAP server and Kerberos Key Distribution Center (KDC) as well as the
Samba3-like logon services provided over CIFS.  We correctly generate
the infamous Kerberos PAC, and include it with the Kerberos tickets we
issue.

Samba 4.0.0rc2 ships with two distinct file servers.  We now use the
file server from the Samba 3.x series 'smbd' for all file serving by
default.

Samba 4.0 also ships with the 'NTVFS' file server.  This file server
is what was used in all previous releases of Samba 4.0, and is
tuned to match the requirements of an AD domain controller.  We
continue to support this, not only to provide continuity to
installations that have deployed it as part of an AD DC, but also as a
running example of the NT-FSA architecture we expect to move smbd to in
the longer term.

For pure file server work, the binaries users would expect from that
series (nmbd, winbindd, smbpasswd) continue to be available.  When
running an AD DC, you only need to run 'samba' (not
nmbd/smbd/winbind), as the required services are co-coordinated by this
master binary.

As DNS is an integral part of Active Directory, we also provide two DNS
solutions, a simple internal DNS server for 'out of the box' configurations
and a more elaborate BIND plugin using the BIND DLZ mechanism in versions
9.8 and 9.9. During the provision, you can select which backend to use.
With the internal backend, your DNS server is good to go.
If you chose the BIND_DLZ backend, a configuration file will be generated
for bind to make it use this plugin, as well as a file explaining how to
set up bind.

To provide accurate timestamps to Windows clients, we integrate with
the NTP project to provide secured NTP replies.  To use you need to
start ntpd and configure it with the 'restrict ... ms-sntp' and
ntpsigndsocket options.

Finally, a new scripting interface has been added to Samba 4, allowing
Python programs to interface to Samba's internals, and many tools and
internal workings of the DC code is now implemented in python.


######################################################################
Changes
#######

smb.conf changes
----------------

   Parameter Name			Description
   --------------			-----------

   allow dns updates			New
   announce as				Removed
   announce version			Removed
   cldap port				New
   client max protocol			New
   client min protocol			New
   client signing			Changed default
   dcerpc endpoint servers		New
   dgram port				New
   display charset			Removed
   dns forwarder			New
   dns update command			New
   homedir map				Changed default
   kernel oplocks			Changed default
   kernel share modes			New
   kpasswd port				New
   krb5 port				New
   max protocol				Removed
   min protocol				Removed
   nbt client socket address		New
   nbt port				New
   nsupdate command			New
   ntp signd socket directory		New
   ntvfs handler			New
   paranoid server security		Removed
   pid directory			New
   printer admin			Removed
   rndc command 			New
   rpc big endian			New
   samba kcc command			New
   send spnego principal		Removed
   server max protocol			New
   server min protocol			New
   server role				New
   server services			New
   server signing			Changed default
   share backend			New
   share modes				Removed
   smb2 max read			Changed default
   smb2 max write			Changed default
   smb2 max trans			Changed default
   socket address			Removed
   spn update command			New
   time offset				Removed
   tls cafile				New
   tls certfile				New
   tls crlfile				New
   tls dh params file			New
   tls enabled				New
   tls keyfile				New
   unicode				New
   web port				New
   winbindd privileged socket directory	New
   winbind sealed pipes			New
   winbindd socket directory		New


CHANGES SINCE 4.0.0rc1
======================

o   Michael Adam <obnox at samba.org>
    * BUG 9173: Make the SMB2 compound request create/delete_on_close/
      close work as Windows.


o   Jeremy Allison <jra at samba.org>
    * BUG 9161: Re-add the vfs_Chdir() cache.
    * BUG 9189: SMB2 Create doesn't return correct MAX ACCESS access mask in
      blob.
    * BUG 9213: Bad ASN.1 NegTokenInit packet can cause invalid free.


o   Christian Ambach <ambi at samba.org>
    * BUG 9162: Fix the build of the GPFS VFS module.
    * BUG 9197: Only do 'printing_subsystem_update' when printing is enabled.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 9228: Fix build on systems without ldap development headers.


o   Alexander Bokovoy <ab at samba.org>
    * BUG 9157: Cleanup idmap_ldap build dependencies.
    * BUG 9228: Make smbldaphelper subsystem an internal library.
    * BUG 9229: Fix build of winbindd- and krb5 locator-related manpages.


o   Sumit Bose <sbose at redhat.com>
    * BUG 9185: Allow DNS resolution of trusted domains if DNS name is
      available.


o   Ira Cooper <ira at samba.org>
    * BUG 9162: Fix build on Illumos/Solaris using '--with-acl'.
    * BUG 9173: Compound requests should continue processing.


o   G?nther Deschner <gd at samba.org>
    * BUG 9185: Winbind cannot resolve AD DC in a different subnet.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 9162: Fix the build of the ACL VFS modules.
    * BUG 9172: Fix reporting of gfs2 quotas.


o   Volker Lendecke <vl at samba.org>
    * BUG 9217: CreateFile with FILE_DIRECTORY_FILE can create directories
      on read-only shares.


o   Vladimir Marek <Vladimir.Marek at Oracle.COM>
    * BUG 9192: Fix service control for non-internal services.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 9173: Make the SMB2 compound request create/delete_on_close/
      close work as Windows.
    * BUG 9184: Fix receiving of UDP packets from 0 bytes.
    * BUG 9191: Release the share mode lock before calling exit_server().
    * BUG 9193: Fix usage of invalid memory in smb2_signing_check_pdu().
    * BUG 9194: Disallow '--prefix=/usr' and '--prefix=/usr/local' without
      '--enable-fhs'.
    * BUG 9198: Fix RHEL-CTDB packaging.


o   Matthieu Patou <mat at matws.net>
    * BUG 9199: Fix usage of "panic action".
    * BUG 9233: Fix a non handled memory out of memory.


o   Andreas Schneider <asn at samba.org>
    * BUG 8632: Fix builtin forms order to match Windows again.
    * BUG 9159: Fix generating idmap manpages.
    * BUG 9218: Don't segfault if user specified ports out for range.
    * BUG 9231: Fix NT_STATUS_IO_TIMEOUT during slow import of printers into
      registry.


KNOWN ISSUES
============

- 'samba-tool domain classicupgrade' will fail when setting ACLs on
  the GPO folders with NT_STATUS_INVALID_ONWER in the default
  configuration.  This happens if, as is typical a 'domain admins'
  group (-512) is mapped in the passdb backend being upgraded.  This
  is because the group mapping to a GID only prevents Samba from
  allocating a uid for that group.  The uid is needed so the 'domain
  admins' group can own the GPO file objects.

  To work around this issue, remove the 'domain admins' group before
  upgrade, as it will be re-created automatically.  You will
  of course need to fill in the group membership again.  A future release
  will make this automatic, or find some other workaround.

- This release makes the s3fs file server the default, as this is the
  file server combination we will use for the Samba 4.0 release.

- For similar reasons, sites with ACLs stored by the ntvfs file server
  may wish to continue to use that file server implementation, as a
  posix ACL will similarly not be set in this case.

- Replication of DNS data from one AD server to another may not work.
  The DNS data used by the internal DNS server and bind9_dlz is stored
  in an application partition in our directory.  The replication of
  this partition is not yet reliable.

- Replication may fail on FreeBSD due to getaddrinfo() rejecting names
  containing _.  A workaround will be in a future release.

- samba_upgradeprovision should not be run when upgrading to this release
  from a recent release.  No important database format changes have
  been made since alpha16.

- Installation on systems without a system iconv (and developer
  headers at compile time) is known to cause errors when dealing with
  non-ASCII characters.

- Domain member support in the 'samba' binary is in its infancy, and
  is not comparable to the support found in winbindd.  As such, do not
  use the 'samba' binary (provided for the AD server) on a member
  server.

- There is no NetBIOS browsing support (network neighbourhood)
  available for the AD domain controller.  (Support in nmbd and smbd
  for classic domains and member/standalone servers is unchanged).

- Clock Synchronisation is critical.  Many 'wrong password' errors are
  actually due to Kerberos objecting to a clock skew between client
  and server.  (The NTP work in the previous alphas are partly to assist
  with this problem).

- The DRS replication code may fail.  Please contact the team if you
  experience issues with DRS replication, as we have fixed many issues
  here in response to feedback from our production users.


RUNNING Samba 4.0 as an AD DC
=============================

A short guide to setting up Samba 4 as an AD DC can be found on the wiki:

  http://wiki.samba.org/index.php/Samba4/HOWTO

######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 4.0 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/rc/

The release notes are available online at:

	http://www.samba.org/samba/ftp/rc/WHATSNEW-4-0-0rc2.txt

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team

From kseeger at samba.org  Tue Oct 16 02:31:43 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Tue, 16 Oct 2012 10:31:43 +0200
Subject: [Announce] Samba 4.0.0rc3 Available for Download
Message-ID: <E1TO2Yx-0071wV-CC@intern.SerNet.DE>

Release Announcements
---------------------

This is the third release candidate of Samba 4.0.  This is *not*
intended for production environments and is designed for testing
purposes only.  Please report any defects via the Samba bug reporting
system at https://bugzilla.samba.org/.

Samba 4.0 will be the next version of the Samba suite and incorporates
all the technology found in both the Samba4 series and the
stable 3.x series. The primary additional features over Samba 3.6 are
support for the Active Directory logon protocols used by Windows 2000
and above.

This release contains the best of all of Samba's
technology parts, both a file server (that you can reasonably expect
to upgrade existing Samba 3.x releases to) and the AD domain
controller work previously known as 'samba4'.

If you are upgrading, or looking to develop, test or deploy Samba 4.0
releases candidates, you should backup all configuration and data.


UPGRADING
=========

Users upgrading from Samba 3.x domain controllers and wanting to use
Samba 4.0 as an AD DC should use the 'samba-tool domain
classicupgrade' command.  See the wiki for more details:
https://wiki.samba.org/index.php/Samba4/samba3upgrade/HOWTO.

Users upgrading from Samba 4.0 alpha and beta releases since alpha15
should run 'samba-tool dbcheck --cross-ncs --fix' before re-starting
Samba.  Users upgrading from earlier alpha releases should contact the
team for advice.

Users upgrading an AD DC from any previous release should run
'samba-tool ntacl sysvolreset' to re-sync ACLs on the sysvol share
with those matching the GPOs in LDAP and the defaults from an initial
provision.  This will set an underlying POSIX ACL if required (eg not
using the NTVFS file server).

If you used the BIND9_FLATFILE or BIND9_DLZ features,
you'll have to add '-dns' to the 'server services' option,
as the internal dns server (SAMBA_INTERNAL) is the default now.


NEW FEATURES
============

Samba 4.0 supports the server-side of the Active Directory logon
environment used by Windows 2000 and later, so we can do full domain
join and domain logon operations with these clients.

Our Domain Controller (DC) implementation includes our own built-in
LDAP server and Kerberos Key Distribution Center (KDC) as well as the
Samba3-like logon services provided over CIFS.  We correctly generate
the infamous Kerberos PAC, and include it with the Kerberos tickets we
issue.

Samba 4.0.0rc3 ships with two distinct file servers.  We now use the
file server from the Samba 3.x series 'smbd' for all file serving by
default.

Samba 4.0 also ships with the 'NTVFS' file server.  This file server
is what was used in all previous releases of Samba 4.0, and is
tuned to match the requirements of an AD domain controller.  We
continue to support this, not only to provide continuity to
installations that have deployed it as part of an AD DC, but also as a
running example of the NT-FSA architecture we expect to move smbd to in
the longer term.

For pure file server work, the binaries users would expect from that
series (nmbd, winbindd, smbpasswd) continue to be available.  When
running an AD DC, you only need to run 'samba' (not
nmbd/smbd/winbind), as the required services are co-coordinated by this
master binary.

As DNS is an integral part of Active Directory, we also provide two DNS
solutions, a simple internal DNS server for 'out of the box' configurations
and a more elaborate BIND plugin using the BIND DLZ mechanism in versions
9.8 and 9.9. During the provision, you can select which backend to use.
With the internal backend, your DNS server is good to go.
If you chose the BIND_DLZ backend, a configuration file will be generated
for bind to make it use this plugin, as well as a file explaining how to
set up bind.

To provide accurate timestamps to Windows clients, we integrate with
the NTP project to provide secured NTP replies.  To use you need to
start ntpd and configure it with the 'restrict ... ms-sntp' and
ntpsigndsocket options.

Finally, a new scripting interface has been added to Samba 4, allowing
Python programs to interface to Samba's internals, and many tools and
internal workings of the DC code is now implemented in python.


######################################################################
Changes
#######

smb.conf changes
----------------

   Parameter Name			Description
   --------------			-----------

   allow dns updates			New
   announce as				Removed
   announce version			Removed
   cldap port				New
   client max protocol			New
   client min protocol			New
   client signing			Changed default
   dcerpc endpoint servers		New
   dgram port				New
   display charset			Removed
   dns forwarder			New
   dns update command			New
   homedir map				Changed default
   kernel oplocks			Changed default
   kernel share modes			New
   kpasswd port				New
   krb5 port				New
   max protocol				Removed
   min protocol				Removed
   nbt client socket address		New
   nbt port				New
   nsupdate command			New
   ntp signd socket directory		New
   ntvfs handler			New
   paranoid server security		Removed
   pid directory			New
   printer admin			Removed
   rndc command 			New
   rpc big endian			New
   samba kcc command			New
   send spnego principal		Removed
   server max protocol			New
   server min protocol			New
   server role				New
   server services			New
   server signing			Changed default
   share backend			New
   share modes				Removed
   smb2 max read			Changed default
   smb2 max write			Changed default
   smb2 max trans			Changed default
   socket address			Removed
   spn update command			New
   time offset				Removed
   tls cafile				New
   tls certfile				New
   tls crlfile				New
   tls dh params file			New
   tls enabled				New
   tls keyfile				New
   unicode				New
   web port				New
   winbindd privileged socket directory	New
   winbind sealed pipes			New
   winbindd socket directory		New


CHANGES SINCE 4.0.0rc2
======================

o   Jeremy Allison <jra at samba.org>
    * BUG 8966: Fix 'net rpc share allowedusers' to work with 2008r2.
    * BUG 9209: Parse of invalid SMB2 create blob can cause smbd crash.
    * BUG 9214: Bad user supplied SMB2 credit value can cause smbd to call
      smb_panic.
    * BUG 9222: Document that signing cannot be disabled for SMB2 by design.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 9235: Update Samba3-HOWTO Collection.
    * BUG 9271: samba-tool: Skip chown in sysvolreset when it would fail on
      a GID.
    * BUG 9274: Update Samba3-HOWTO Collection.


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 9235: Fix opening and ending tag mismatch in Samba3-HOWTO.
    * BUG 9271: Fix typos in samba_backup.
    * BUG 9274: Add delete_lost option to vfs_streams_depot.8.


o   Kai Blin <kai at samba.org>
    * BUG 9225: Fix return code for deleted DNS records.
    * BUG 8878: Time out UDP requests after DNS_REQUEST_TIMEOUT seconds.


o   G?nther Deschner <gd at samba.org>
    * BUG 9177: pam_winbind: Match more return codes when wbcGetPwnam has
    failed.


o   David Disseldorp <ddiss at samba.org>
    * BUG 9269: Fix 64bit-portability-issue.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 5670: Apply some Solaris packaging fixes.
    * BUG 8107: Fix poll replacement to become a msleep replacement.
    * BUG 8344: Fix --with(out)-sendfile-support option handling.


o   Volker Lendecke <vl at samba.org>
    * BUG 9223: Fix uninitialized variable in the cldap server.
    * BUG 9268: Make tdb robust against improper CLEAR_IF_FIRST restart.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 9271: Several samba-tool fixes.
    * BUG 9196: Don't take 'state->te' as indication for "was_deferred".


o   Matthieu Patou <mat at matws.net>
    * BUG 9240: Remove unused variable in DNS server.
    * BUG 9252: Preliminary tests for dcpromo in Windows 2012 fails with
      Samba DC.
    * BUG 9253: Crackname returns a dns domain name even if there is no cracked
      SID.
    * BUG 9255: Getncchanges with exop for repl_obj returns highest_usn.
    * BUG 9256: Getncchanges with exop for repl_obj_with_secrets should always
      be allowed for RWDC.
    * BUG 9257: LDAP server has at least one un-initialized variable.
    * BUG 9258: LDAP server ignore configuration values set in the database for
      timeout.
    * BUG 9259: rodc join fails complaining that it can't find a RWDC.
    * BUG 9260: kccdrs_replica_get_info returns invalid level when non
      supported should be returned.
    * BUG 9261: ds_replica_sync fails when specifying a name and not a guid.
    * BUG 9264: getncchanges returns invalid_parameters when it should return
      bad_nc.
    * BUG 9254: DsExecuteKCC returns wrong error code if taskid != 0.
    * BUG 9265: Bind dlz fails to start if there is a trustedanchors zone.


o   Rusty Russell <rusty at rustcorp.com.au>
    * BUG 9268: Make tdb robust against shrinking tdbs.


o   Andreas Schneider <asn at samba.org>
    * BUG 8769: Fix RAW printing for normal users.
    * BUG 9112: Increase debug level for info that the db is empty.
    * BUG 9244: Build pam_smbpass module only if enabled.
    * BUG 9245: Make sure the registry is set up before we init printing.
    * BUG 9276: Add config for systemd-tmpfiles.
    * BUG 9280: Add support for reloading systemd services.


o   Karolin Seeger <kseeger at samba.org>
    * BUG 7826: Remove link to Using Samba.
    * BUG 8802: Add basic manpages for 'samba' and 'samba-tool'.
    * BUG 9165: Fix makerpms.sh on RHEL.
    * BUG 9243: Remove duplicate synonym min protocol.
    * BUG 9271: Several samba-tool fixes.


o   Jelmer Vernooij <jelmer at samba.org>
    * BUG 9243: Add basic documentation for 'server min protocol'.
    * BUG 9271: Several samba-tool fixes.
    * BUG 9274: Add documentation for several parameters.


o   Matthias Dieter Walln?fer <mdw at samba.org>
    * BUG 9183: Introduce the wildcard binding feature to allow DNS to listen on
      localhost.


CHANGES SINCE 4.0.0rc1
======================

o   Michael Adam <obnox at samba.org>
    * BUG 9173: Make the SMB2 compound request create/delete_on_close/
      close work as Windows.


o   Jeremy Allison <jra at samba.org>
    * BUG 9161: Re-add the vfs_Chdir() cache.
    * BUG 9189: SMB2 Create doesn't return correct MAX ACCESS access mask in
      blob.
    * BUG 9213: Bad ASN.1 NegTokenInit packet can cause invalid free.


o   Christian Ambach <ambi at samba.org>
    * BUG 9162: Fix the build of the GPFS VFS module.
    * BUG 9197: Only do 'printing_subsystem_update' when printing is enabled.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 9228: Fix build on systems without ldap development headers.


o   Alexander Bokovoy <ab at samba.org>
    * BUG 9157: Cleanup idmap_ldap build dependencies.
    * BUG 9228: Make smbldaphelper subsystem an internal library.
    * BUG 9229: Fix build of winbindd- and krb5 locator-related manpages.


o   Sumit Bose <sbose at redhat.com>
    * BUG 9185: Allow DNS resolution of trusted domains if DNS name is
      available.


o   Ira Cooper <ira at samba.org>
    * BUG 9162: Fix build on Illumos/Solaris using '--with-acl'.
    * BUG 9173: Compound requests should continue processing.


o   G?nther Deschner <gd at samba.org>
    * BUG 9185: Winbind cannot resolve AD DC in a different subnet.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 9162: Fix the build of the ACL VFS modules.
    * BUG 9172: Fix reporting of gfs2 quotas.


o   Volker Lendecke <vl at samba.org>
    * BUG 9217: CreateFile with FILE_DIRECTORY_FILE can create directories
      on read-only shares.


o   Vladimir Marek <Vladimir.Marek at Oracle.COM>
    * BUG 9192: Fix service control for non-internal services.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 9173: Make the SMB2 compound request create/delete_on_close/
      close work as Windows.
    * BUG 9184: Fix receiving of UDP packets from 0 bytes.
    * BUG 9191: Release the share mode lock before calling exit_server().
    * BUG 9193: Fix usage of invalid memory in smb2_signing_check_pdu().
    * BUG 9194: Disallow '--prefix=/usr' and '--prefix=/usr/local' without
      '--enable-fhs'.
    * BUG 9198: Fix RHEL-CTDB packaging.


o   Matthieu Patou <mat at matws.net>
    * BUG 9199: Fix usage of "panic action".
    * BUG 9233: Fix a non handled memory out of memory.


o   Andreas Schneider <asn at samba.org>
    * BUG 8632: Fix builtin forms order to match Windows again.
    * BUG 9159: Fix generating idmap manpages.
    * BUG 9218: Don't segfault if user specified ports out for range.
    * BUG 9231: Fix NT_STATUS_IO_TIMEOUT during slow import of printers into
      registry.


KNOWN ISSUES
============

- 'samba-tool domain classicupgrade' will fail when setting ACLs on
  the GPO folders with NT_STATUS_INVALID_ONWER in the default
  configuration.  This happens if, as is typical a 'domain admins'
  group (-512) is mapped in the passdb backend being upgraded.  This
  is because the group mapping to a GID only prevents Samba from
  allocating a uid for that group.  The uid is needed so the 'domain
  admins' group can own the GPO file objects.

  To work around this issue, remove the 'domain admins' group before
  upgrade, as it will be re-created automatically.  You will
  of course need to fill in the group membership again.  A future release
  will make this automatic, or find some other workaround.

- This release makes the s3fs file server the default, as this is the
  file server combination we will use for the Samba 4.0 release.

- For similar reasons, sites with ACLs stored by the ntvfs file server
  may wish to continue to use that file server implementation, as a
  posix ACL will similarly not be set in this case.

- Replication of DNS data from one AD server to another may not work.
  The DNS data used by the internal DNS server and bind9_dlz is stored
  in an application partition in our directory.  The replication of
  this partition is not yet reliable.

- Replication may fail on FreeBSD due to getaddrinfo() rejecting names
  containing _.  A workaround will be in a future release.

- samba_upgradeprovision should not be run when upgrading to this release
  from a recent release.  No important database format changes have
  been made since alpha16.

- Installation on systems without a system iconv (and developer
  headers at compile time) is known to cause errors when dealing with
  non-ASCII characters.

- Domain member support in the 'samba' binary is in its infancy, and
  is not comparable to the support found in winbindd.  As such, do not
  use the 'samba' binary (provided for the AD server) on a member
  server.

- There is no NetBIOS browsing support (network neighbourhood)
  available for the AD domain controller.  (Support in nmbd and smbd
  for classic domains and member/standalone servers is unchanged).

- Clock Synchronisation is critical.  Many 'wrong password' errors are
  actually due to Kerberos objecting to a clock skew between client
  and server.  (The NTP work in the previous alphas are partly to assist
  with this problem).

- The DRS replication code may fail.  Please contact the team if you
  experience issues with DRS replication, as we have fixed many issues
  here in response to feedback from our production users.

======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/rc/

The release notes are available online at:

	http://www.samba.org/samba/ftp/rc/WHATSNEW-4-0-0rc3.txt

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team

From kseeger at samba.org  Mon Oct 29 03:46:34 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Mon, 29 Oct 2012 10:46:34 +0100
Subject: [Announce] Samba 3.6.9 Available for Download
Message-ID: <E1TSlvW-001OSq-ES@intern.SerNet.DE>

====================================================================
		"What I just said is the fundamental, end-all,
		 final, not-subject-to-opinion absolute truth,
		 depending on where you're standing."

		 Steve Martin
====================================================================


Release Announcements
=====================

This is is the latest stable release of Samba 3.6.

Major enhancements in Samba 3.6.9 include:

o  When setting a non-default ACL, don't forget to apply masks to
   SMB_ACL_USER and SMB_ACL_GROUP entries (bug #9236).
o  Winbind can't fetch user or group info from AD via LDAP (bug #9147).
o  Fix segfault in smbd if user specified ports out for range (bug #9218).


Changes since 3.6.8:
--------------------

o   Michael Adam <obnox at samba.org>
    * BUG 9173: Make SMB2 compound request create/delete_on_close/close work as
      Windows.


o   Jeremy Allison <jra at samba.org>
    * BUG 8966: Fix 'net rpc share allowedusers' to work with 2008r2.
    * BUG 9016: Connection to outbound trusted domain goes offline.
    * BUG 9117: 'smbclient' can't connect to a Windows 7 server using NTLMv2.
    * BUG 9147: Winbind can't fetch user or group info from AD via LDAP.
    * BUG 9174: Empty SPNEGO packet can cause smbd to crash.
    * BUG 9189: SMB2 Create doesn't return correct MAX ACCESS access mask in
      blob.
    * BUG 9209: Parse of invalid SMB2 create blob can cause smbd crash.
    * BUG 9213: Bad ASN.1 NegTokenInit packet can cause invalid free.
    * BUG 9222: Signing cannot be disabled for SMB2 by design, so fix the
      documentation instead.
    * BUG 9236: When setting a non-default ACL, don't forget to apply masks to
      SMB_ACL_USER and SMB_ACL_GROUP entries.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 8788: Initialise ticket to ensure we do not invalid memory.


o   Ira Cooper <ira at samba.org>
    * BUG 9173: Compound requests should continue processing.


o   G?nther Deschner <gd at samba.org>
    * BUG 9177: pam_winbind: Match more return codes when wbcGetPwnam has failed.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 3272: quota: Don't force the block size to 512.
    * BUG 8107: Add some includes for poll.h.
    * BUG 8146: Fix wrong test == syntax in configure.
    * BUG 8344: Fix --with(out)-sendfile-support option handling in autoconf.
    * BUG 9172: Add quota support for gfs2.


o   Volker Lendecke <vl at samba.org>
    * BUG 9188: Fix crash bug in idmap_hash.
    * BUG 9268: Make tdb robust against improper CLEAR_IF_FIRST restart.


o   Luca Lorenzetto <lorenzetto-luca at ubuntu-it.org>
    * BUG 9013: Fix crash on null pam change pw response.


o   Vladimir Marek <Vladimir.Marek at Oracle.COM>
    * BUG 9192: Fix service control for non-internal services.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 9173: Make SMB2 compound request create/delete_on_close/close work as
      Windows.
    * BUG 9196: Don't take 'state->te' as indication for "was_deferred".
    * BUG 9209: Fix unitialized padding in smb2_create_blob_push_one().


o   Matthieu Patou <mat at matws.net>
    * BUG 9259: lib-addns: ensure that allocated buffer are pre set to 0.


o   Rusty Russell <rusty at rustcorp.com.au>
    * BUG 9268: Make robust against shrinking tdbs.


o   Joachim Schmitz <schmitz at hp.com>
    * BUG 8107: Fix poll replacement to become a msleep replacement.


o   Andreas Schneider <asn at samba.org>
    * BUG 8632: Fix builtin forms order to match Windows again.
    * BUG 8769: Fix RAW printing for normal users.
    * BUG 9112: Increase debug level for info that the db is empty.
    * BUG 9154: Open printers with the right access mask.
    * BUG 9171: Remove non-existent option '-Y' from winbindd manpage.
    * BUG 9218: Fix segfault in smbd if user specified ports out for range.
    * BUG 9231: Fix NT_STATUS_IO_TIMEOUT during slow import of printers into
      registry.
    * BUG 9280: Add support for reloading systemd services.


o   Karolin Seeger <kseeger at samba.org>
    * BUG 9165: Fix makerpms.sh on RHEL.


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba corresponding product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/

The release notes are available online at:

        http://www.samba.org/samba/ftp/history/samba-3.6.9.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team


From kseeger at samba.org  Tue Oct 30 02:51:40 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Tue, 30 Oct 2012 09:51:40 +0100
Subject: [Announce] Samba 4.0.0rc4 Available for Download
Message-ID: <E1TT7Xw-002gZ4-QI@intern.SerNet.DE>

Release Announcements
---------------------

This is the fourth release candidate of Samba 4.0.  This is *not*
intended for production environments and is designed for testing
purposes only.  Please report any defects via the Samba bug reporting
system at https://bugzilla.samba.org/.

Samba 4.0 will be the next version of the Samba suite and incorporates
all the technology found in both the Samba4 series and the
stable 3.x series. The primary additional features over Samba 3.6 are
support for the Active Directory logon protocols used by Windows 2000
and above.

This release contains the best of all of Samba's
technology parts, both a file server (that you can reasonably expect
to upgrade existing Samba 3.x releases to) and the AD domain
controller work previously known as 'samba4'.

If you are upgrading, or looking to develop, test or deploy Samba 4.0
releases candidates, you should backup all configuration and data.


UPGRADING
=========

Users upgrading from Samba 3.x domain controllers and wanting to use
Samba 4.0 as an AD DC should use the 'samba-tool domain
classicupgrade' command.  See the wiki for more details:
https://wiki.samba.org/index.php/Samba4/samba3upgrade/HOWTO.

Users upgrading from Samba 4.0 alpha and beta releases since alpha15
should run 'samba-tool dbcheck --cross-ncs --fix' before re-starting
Samba.  Users upgrading from earlier alpha releases should contact the
team for advice.

Users upgrading an AD DC from any previous release should run
'samba-tool ntacl sysvolreset' to re-sync ACLs on the sysvol share
with those matching the GPOs in LDAP and the defaults from an initial
provision.  This will set an underlying POSIX ACL if required (eg not
using the NTVFS file server).

If you used the BIND9_FLATFILE or BIND9_DLZ features,
you'll have to add '-dns' to the 'server services' option,
as the internal dns server (SAMBA_INTERNAL) is the default now.


NEW FEATURES
============

Samba 4.0 supports the server-side of the Active Directory logon
environment used by Windows 2000 and later, so we can do full domain
join and domain logon operations with these clients.

Our Domain Controller (DC) implementation includes our own built-in
LDAP server and Kerberos Key Distribution Center (KDC) as well as the
Samba3-like logon services provided over CIFS.  We correctly generate
the infamous Kerberos PAC, and include it with the Kerberos tickets we
issue.

Samba 4.0.0rc4 ships with two distinct file servers.  We now use the
file server from the Samba 3.x series 'smbd' for all file serving by
default.

Samba 4.0 also ships with the 'NTVFS' file server.  This file server
is what was used in all previous releases of Samba 4.0, and is
tuned to match the requirements of an AD domain controller.  We
continue to support this, not only to provide continuity to
installations that have deployed it as part of an AD DC, but also as a
running example of the NT-FSA architecture we expect to move smbd to in
the longer term.

For pure file server work, the binaries users would expect from that
series (nmbd, winbindd, smbpasswd) continue to be available.  When
running an AD DC, you only need to run 'samba' (not
nmbd/smbd/winbind), as the required services are co-coordinated by this
master binary.

As DNS is an integral part of Active Directory, we also provide two DNS
solutions, a simple internal DNS server for 'out of the box' configurations
and a more elaborate BIND plugin using the BIND DLZ mechanism in versions
9.8 and 9.9. During the provision, you can select which backend to use.
With the internal backend, your DNS server is good to go.
If you chose the BIND_DLZ backend, a configuration file will be generated
for bind to make it use this plugin, as well as a file explaining how to
set up bind.

To provide accurate timestamps to Windows clients, we integrate with
the NTP project to provide secured NTP replies.  To use you need to
start ntpd and configure it with the 'restrict ... ms-sntp' and
ntpsigndsocket options.

Finally, a new scripting interface has been added to Samba 4, allowing
Python programs to interface to Samba's internals, and many tools and
internal workings of the DC code is now implemented in python.


######################################################################
Changes
#######

smb.conf changes
----------------

   Parameter Name			Description
   --------------			-----------

   allow dns updates			New
   announce as				Removed
   announce version			Removed
   cldap port				New
   client max protocol			New
   client min protocol			New
   client signing			Changed default
   dcerpc endpoint servers		New
   dgram port				New
   directory security mask		Removed
   display charset			Removed
   dns forwarder			New
   dns update command			New
   force security mode			Removed
   force directory security mode	Removed
   homedir map				Changed default
   kernel oplocks			Changed default
   kernel share modes			New
   kpasswd port				New
   krb5 port				New
   max protocol				Removed
   min protocol				Removed
   nbt client socket address		New
   nbt port				New
   nsupdate command			New
   ntp signd socket directory		New
   ntvfs handler			New
   paranoid server security		Removed
   pid directory			New
   printer admin			Removed
   rndc command 			New
   rpc big endian			New
   samba kcc command			New
   security mask			Removed
   send spnego principal		Removed
   server max protocol			New
   server min protocol			New
   server role				New
   server services			New
   server signing			Changed default
   share backend			New
   share modes				Removed
   smb2 max read			Changed default
   smb2 max write			Changed default
   smb2 max trans			Changed default
   socket address			Removed
   spn update command			New
   time offset				Removed
   tls cafile				New
   tls certfile				New
   tls crlfile				New
   tls dh params file			New
   tls enabled				New
   tls keyfile				New
   unicode				New
   web port				New
   winbindd privileged socket directory	New
   winbind sealed pipes			New
   winbindd socket directory		New


CHANGES SINCE 4.0.0rc3
======================

o   Michael Adam <obnox at samba.org>
    * BUG 9304: Remove unused sessionid.tdb and connections.tdb related code.
    * BUG 9319: validate stat(2) information before reconnect durable handles.


o   Jeremy Allison <jra at samba.org>
    * BUG 9190: Fix regression (change in behavior) of default acl masks.
      Remove "security mask", "force security mode", "directory security mask"
      "force directory" and "security mode" parameters.
    * BUG 9329: Directory listing with SeBackup can crash smbd.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 9295: Assert that auth_domain, auth_builtin, auth_sam, auth_winbind
      are builtin.
    * BUG 9322: Backport ldb version update.


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 9190: docs: Fix opening and ending tag mismatch: para.


o   Gregor Beck <gbeck at sernet.de>
    * BUG 9304: Remove unused sessionid.tdb and connections.tdb related code.


o   David Disseldorp <ddiss at suse.de>
    * BUG 8564: Fix segfault in pam_sm_authenticate().


o   Stefan Metzmacher <metze at samba.org>
    * BUG 9184: Fix loop in tdgram_bsd_recvfrom().
    * BUG 9209: Fix unitialized padding in smb2_create_blob_push_one().
    * BUG 9304: Remove unused sessionid.tdb and connections.tdb related code.
    * BUG 9309: Avoid a level 0 DEBUG if tstream_npa_connect_recv fails.
    * BUG 9318: Fix write time updates for durable handles.


o   Andreas Schneider <asn at samba.org>
    * BUG 9295: Build standard auth modules as internal modules.
    * BUG 9301: Move 'smbprint' to a common location.


o   Jelmer Vernooij <jelmer at samba.org>
    * BUG 9274: Add documentation and selftest fixes.


CHANGES SINCE 4.0.0rc2
======================

o   Jeremy Allison <jra at samba.org>
    * BUG 8966: Fix 'net rpc share allowedusers' to work with 2008r2.
    * BUG 9209: Parse of invalid SMB2 create blob can cause smbd crash.
    * BUG 9214: Bad user supplied SMB2 credit value can cause smbd to call
      smb_panic.
    * BUG 9222: Document that signing cannot be disabled for SMB2 by design.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 9235: Update Samba3-HOWTO Collection.
    * BUG 9271: samba-tool: Skip chown in sysvolreset when it would fail on
      a GID.
    * BUG 9274: Update Samba3-HOWTO Collection.


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 9235: Fix opening and ending tag mismatch in Samba3-HOWTO.
    * BUG 9271: Fix typos in samba_backup.
    * BUG 9274: Add delete_lost option to vfs_streams_depot.8.


o   Kai Blin <kai at samba.org>
    * BUG 9225: Fix return code for deleted DNS records.
    * BUG 8878: Time out UDP requests after DNS_REQUEST_TIMEOUT seconds.


o   G?nther Deschner <gd at samba.org>
    * BUG 9177: pam_winbind: Match more return codes when wbcGetPwnam has
    failed.


o   David Disseldorp <ddiss at samba.org>
    * BUG 9269: Fix 64bit-portability-issue.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 5670: Apply some Solaris packaging fixes.
    * BUG 8107: Fix poll replacement to become a msleep replacement.
    * BUG 8344: Fix --with(out)-sendfile-support option handling.


o   Volker Lendecke <vl at samba.org>
    * BUG 9223: Fix uninitialized variable in the cldap server.
    * BUG 9268: Make tdb robust against improper CLEAR_IF_FIRST restart.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 9271: Several samba-tool fixes.
    * BUG 9196: Don't take 'state->te' as indication for "was_deferred".


o   Matthieu Patou <mat at matws.net>
    * BUG 9240: Remove unused variable in DNS server.
    * BUG 9252: Preliminary tests for dcpromo in Windows 2012 fails with
      Samba DC.
    * BUG 9253: Crackname returns a dns domain name even if there is no cracked
      SID.
    * BUG 9255: Getncchanges with exop for repl_obj returns highest_usn.
    * BUG 9256: Getncchanges with exop for repl_obj_with_secrets should always
      be allowed for RWDC.
    * BUG 9257: LDAP server has at least one un-initialized variable.
    * BUG 9258: LDAP server ignore configuration values set in the database for
      timeout.
    * BUG 9259: rodc join fails complaining that it can't find a RWDC.
    * BUG 9260: kccdrs_replica_get_info returns invalid level when non
      supported should be returned.
    * BUG 9261: ds_replica_sync fails when specifying a name and not a guid.
    * BUG 9264: getncchanges returns invalid_parameters when it should return
      bad_nc.
    * BUG 9254: DsExecuteKCC returns wrong error code if taskid != 0.
    * BUG 9265: Bind dlz fails to start if there is a trustedanchors zone.


o   Rusty Russell <rusty at rustcorp.com.au>
    * BUG 9268: Make tdb robust against shrinking tdbs.


o   Andreas Schneider <asn at samba.org>
    * BUG 8769: Fix RAW printing for normal users.
    * BUG 9112: Increase debug level for info that the db is empty.
    * BUG 9244: Build pam_smbpass module only if enabled.
    * BUG 9245: Make sure the registry is set up before we init printing.
    * BUG 9276: Add config for systemd-tmpfiles.
    * BUG 9280: Add support for reloading systemd services.


o   Karolin Seeger <kseeger at samba.org>
    * BUG 7826: Remove link to Using Samba.
    * BUG 8802: Add basic manpages for 'samba' and 'samba-tool'.
    * BUG 9165: Fix makerpms.sh on RHEL.
    * BUG 9243: Remove duplicate synonym min protocol.
    * BUG 9271: Several samba-tool fixes.


o   Jelmer Vernooij <jelmer at samba.org>
    * BUG 9243: Add basic documentation for 'server min protocol'.
    * BUG 9271: Several samba-tool fixes.
    * BUG 9274: Add documentation for several parameters.


o   Matthias Dieter Walln?fer <mdw at samba.org>
    * BUG 9183: Introduce the wildcard binding feature to allow DNS to listen on
      localhost.


CHANGES SINCE 4.0.0rc1
======================

o   Michael Adam <obnox at samba.org>
    * BUG 9173: Make the SMB2 compound request create/delete_on_close/
      close work as Windows.


o   Jeremy Allison <jra at samba.org>
    * BUG 9161: Re-add the vfs_Chdir() cache.
    * BUG 9189: SMB2 Create doesn't return correct MAX ACCESS access mask in
      blob.
    * BUG 9213: Bad ASN.1 NegTokenInit packet can cause invalid free.


o   Christian Ambach <ambi at samba.org>
    * BUG 9162: Fix the build of the GPFS VFS module.
    * BUG 9197: Only do 'printing_subsystem_update' when printing is enabled.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 9228: Fix build on systems without ldap development headers.


o   Alexander Bokovoy <ab at samba.org>
    * BUG 9157: Cleanup idmap_ldap build dependencies.
    * BUG 9228: Make smbldaphelper subsystem an internal library.
    * BUG 9229: Fix build of winbindd- and krb5 locator-related manpages.


o   Sumit Bose <sbose at redhat.com>
    * BUG 9185: Allow DNS resolution of trusted domains if DNS name is
      available.


o   Ira Cooper <ira at samba.org>
    * BUG 9162: Fix build on Illumos/Solaris using '--with-acl'.
    * BUG 9173: Compound requests should continue processing.


o   G?nther Deschner <gd at samba.org>
    * BUG 9185: Winbind cannot resolve AD DC in a different subnet.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 9162: Fix the build of the ACL VFS modules.
    * BUG 9172: Fix reporting of gfs2 quotas.


o   Volker Lendecke <vl at samba.org>
    * BUG 9217: CreateFile with FILE_DIRECTORY_FILE can create directories
      on read-only shares.


o   Vladimir Marek <Vladimir.Marek at Oracle.COM>
    * BUG 9192: Fix service control for non-internal services.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 9173: Make the SMB2 compound request create/delete_on_close/
      close work as Windows.
    * BUG 9184: Fix receiving of UDP packets from 0 bytes.
    * BUG 9191: Release the share mode lock before calling exit_server().
    * BUG 9193: Fix usage of invalid memory in smb2_signing_check_pdu().
    * BUG 9194: Disallow '--prefix=/usr' and '--prefix=/usr/local' without
      '--enable-fhs'.
    * BUG 9198: Fix RHEL-CTDB packaging.


o   Matthieu Patou <mat at matws.net>
    * BUG 9199: Fix usage of "panic action".
    * BUG 9233: Fix a non handled memory out of memory.


o   Andreas Schneider <asn at samba.org>
    * BUG 8632: Fix builtin forms order to match Windows again.
    * BUG 9159: Fix generating idmap manpages.
    * BUG 9218: Don't segfault if user specified ports out for range.
    * BUG 9231: Fix NT_STATUS_IO_TIMEOUT during slow import of printers into
      registry.


KNOWN ISSUES
============

- 'samba-tool domain classicupgrade' will fail when setting ACLs on
  the GPO folders with NT_STATUS_INVALID_ONWER in the default
  configuration.  This happens if, as is typical a 'domain admins'
  group (-512) is mapped in the passdb backend being upgraded.  This
  is because the group mapping to a GID only prevents Samba from
  allocating a uid for that group.  The uid is needed so the 'domain
  admins' group can own the GPO file objects.

  To work around this issue, remove the 'domain admins' group before
  upgrade, as it will be re-created automatically.  You will
  of course need to fill in the group membership again.  A future release
  will make this automatic, or find some other workaround.

- This release makes the s3fs file server the default, as this is the
  file server combination we will use for the Samba 4.0 release.

- For similar reasons, sites with ACLs stored by the ntvfs file server
  may wish to continue to use that file server implementation, as a
  posix ACL will similarly not be set in this case.

- Replication of DNS data from one AD server to another may not work.
  The DNS data used by the internal DNS server and bind9_dlz is stored
  in an application partition in our directory.  The replication of
  this partition is not yet reliable.

- Replication may fail on FreeBSD due to getaddrinfo() rejecting names
  containing _.  A workaround will be in a future release.

- samba_upgradeprovision should not be run when upgrading to this release
  from a recent release.  No important database format changes have
  been made since alpha16.

- Installation on systems without a system iconv (and developer
  headers at compile time) is known to cause errors when dealing with
  non-ASCII characters.

- Domain member support in the 'samba' binary is in its infancy, and
  is not comparable to the support found in winbindd.  As such, do not
  use the 'samba' binary (provided for the AD server) on a member
  server.

- There is no NetBIOS browsing support (network neighbourhood)
  available for the AD domain controller.  (Support in nmbd and smbd
  for classic domains and member/standalone servers is unchanged).

- Clock Synchronisation is critical.  Many 'wrong password' errors are
  actually due to Kerberos objecting to a clock skew between client
  and server.  (The NTP work in the previous alphas are partly to assist
  with this problem).

- The DRS replication code may fail.  Please contact the team if you
  experience issues with DRS replication, as we have fixed many issues
  here in response to feedback from our production users.


RUNNING Samba 4.0 as an AD DC
=============================

A short guide to setting up Samba 4 as an AD DC can be found on the wiki:

  http://wiki.samba.org/index.php/Samba4/HOWTO

#######################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 4.0 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================

================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/rc/

The release notes are available online at:

	http://www.samba.org/samba/ftp/rc/WHATSNEW-4-0-0rc4.txt

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team

From kseeger at samba.org  Mon Nov  5 02:15:51 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Mon, 5 Nov 2012 10:15:51 +0100
Subject: [Announce] Samba 3.5.19 Available for Download
Message-ID: <E1TVImd-009ZfY-Rv@intern.SerNet.DE>

==================================================================
				"That?s the thing about needs.
				 Sometimes when you get them met,
				 you don?t need them anymore."

				 Carrie Bradshaw

==================================================================


Release Announcements
=====================

This is the latest stable release of Samba 3.5.

Major enhancements in Samba 3.5.19 include:

o  Connection to outbound trusted domain goes offline (bug #9016).
o  ACL masks incorrectly applied when setting ACLs (bug #9236).
o  Samba panics if a user specifies an invalid port number (bug #9218).


Changes since 3.5.18:
---------------------

o   Jeremy Allison <jra at samba.org>
    * BUG 9016: Connection to outbound trusted domain goes offline.
    * BUG 9117: smbclient can't connect to a Windows 7 server using NTLMv2.
    * BUG 9213: Bad ASN.1 NegTokenInit packet can cause invalid free.
    * BUG 9236: ACL masks incorrectly applied when setting ACLs.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 8788: libsmb: Initialise ticket to ensure we do not free invalid memory.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 8344: autoconf: Fix --with(out)-sendfile-support option handling.
    * BUG 8732: Fix compile of krb5 locator on Solaris.
    * BUG 9172: Add quota support for gfs2.


o   Matthieu Patou <mat at matws.net>
    * BUG 9259: lib-addns: Ensure that allocated buffer are pre set to 0.


o   Andreas Schneider <asn at samba.org>
    * BUG 9218: Samba panics if a user specifies an invalid port number.


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 3.5 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/stable

The release notes are available online at:

        http://www.samba.org/samba/history/samba-3.5.19.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team




From kseeger at samba.org  Tue Nov 13 01:41:10 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Tue, 13 Nov 2012 09:41:10 +0100
Subject: [Announce] Samba 4.0.0rc5 Available for Download 
Message-ID: <E1TYC3S-001dCj-Ru@intern.SerNet.DE>

Release Announcements
---------------------

This is the fifth release candidate of Samba 4.0.  This is *not*
intended for production environments and is designed for testing
purposes only.  Please report any defects via the Samba bug reporting
system at https://bugzilla.samba.org/.

Samba 4.0 will be the next version of the Samba suite and incorporates
all the technology found in both the Samba4 series and the
stable 3.x series. The primary additional features over Samba 3.6 are
support for the Active Directory logon protocols used by Windows 2000
and above.

This release contains the best of all of Samba's
technology parts, both a file server (that you can reasonably expect
to upgrade existing Samba 3.x releases to) and the AD domain
controller work previously known as 'samba4'.

If you are upgrading, or looking to develop, test or deploy Samba 4.0
releases candidates, you should backup all configuration and data.


UPGRADING
=========

Users upgrading from Samba 3.x domain controllers and wanting to use
Samba 4.0 as an AD DC should use the 'samba-tool domain
classicupgrade' command.  See the wiki for more details:
https://wiki.samba.org/index.php/Samba4/samba3upgrade/HOWTO.

Users upgrading from Samba 4.0 alpha and beta releases since alpha15
should run 'samba-tool dbcheck --cross-ncs --fix' before re-starting
Samba.  Users upgrading from earlier alpha releases should contact the
team for advice.

Users upgrading an AD DC from any previous release should run
'samba-tool ntacl sysvolreset' to re-sync ACLs on the sysvol share
with those matching the GPOs in LDAP and the defaults from an initial
provision.  This will set an underlying POSIX ACL if required (eg not
using the NTVFS file server).

If you used the BIND9_FLATFILE or BIND9_DLZ features,
you'll have to add '-dns' to the 'server services' option,
as the internal dns server (SAMBA_INTERNAL) is the default now.


NEW FEATURES
============

Samba 4.0 supports the server-side of the Active Directory logon
environment used by Windows 2000 and later, so we can do full domain
join and domain logon operations with these clients.

Our Domain Controller (DC) implementation includes our own built-in
LDAP server and Kerberos Key Distribution Center (KDC) as well as the
Samba3-like logon services provided over CIFS.  We correctly generate
the infamous Kerberos PAC, and include it with the Kerberos tickets we
issue.

Samba 4.0.0rc5 ships with two distinct file servers.  We now use the
file server from the Samba 3.x series 'smbd' for all file serving by
default.

Samba 4.0 also ships with the 'NTVFS' file server.  This file server
is what was used in all previous releases of Samba 4.0, and is
tuned to match the requirements of an AD domain controller.  We
continue to support this, not only to provide continuity to
installations that have deployed it as part of an AD DC, but also as a
running example of the NT-FSA architecture we expect to move smbd to in
the longer term.

For pure file server work, the binaries users would expect from that
series (nmbd, winbindd, smbpasswd) continue to be available.  When
running an AD DC, you only need to run 'samba' (not
nmbd/smbd/winbind), as the required services are co-coordinated by this
master binary.

As DNS is an integral part of Active Directory, we also provide two DNS
solutions, a simple internal DNS server for 'out of the box' configurations
and a more elaborate BIND plugin using the BIND DLZ mechanism in versions
9.8 and 9.9. During the provision, you can select which backend to use.
With the internal backend, your DNS server is good to go.
If you chose the BIND_DLZ backend, a configuration file will be generated
for bind to make it use this plugin, as well as a file explaining how to
set up bind.

To provide accurate timestamps to Windows clients, we integrate with
the NTP project to provide secured NTP replies.  To use you need to
start ntpd and configure it with the 'restrict ... ms-sntp' and
ntpsigndsocket options.

Finally, a new scripting interface has been added to Samba 4, allowing
Python programs to interface to Samba's internals, and many tools and
internal workings of the DC code is now implemented in python.


######################################################################
Changes
#######

smb.conf changes
----------------

   Parameter Name			Description
   --------------			-----------

   allow dns updates			New
   announce as				Removed
   announce version			Removed
   cldap port				New
   client max protocol			New
   client min protocol			New
   client signing			Changed default
   dcerpc endpoint servers		New
   dgram port				New
   directory security mask		Removed
   display charset			Removed
   dns forwarder			New
   dns update command			New
   force security mode			Removed
   force directory security mode	Removed
   homedir map				Changed default
   kernel oplocks			Changed default
   kernel share modes			New
   kpasswd port				New
   krb5 port				New
   nbt client socket address		New
   nbt port				New
   nsupdate command			New
   ntp signd socket directory		New
   ntvfs handler			New
   paranoid server security		Removed
   pid directory			New
   printer admin			Removed
   rndc command 			New
   rpc big endian			New
   samba kcc command			New
   security mask			Removed
   send spnego principal		Removed
   server max protocol			New
   server min protocol			New
   server role				New
   server services			New
   server signing			Changed default
   share backend			New
   share modes				Removed
   smb2 max read			Changed default
   smb2 max write			Changed default
   smb2 max trans			Changed default
   socket address			Removed
   spn update command			New
   time offset				Removed
   tls cafile				New
   tls certfile				New
   tls crlfile				New
   tls dh params file			New
   tls enabled				New
   tls keyfile				New
   unicode				New
   web port				New
   winbindd privileged socket directory	New
   winbind sealed pipes			New
   winbindd socket directory		New


CHANGES SINCE 4.0.0rc4
======================

With this release candidate the location of the socket samba accepts
connections from NTPd has changed, as has the enforced permissions.

This means the ntp.conf will need to change from (eg)

ntpsigndsocket /usr/local/samba/var/run/ntp_signd/

to

ntpsigndsocket /usr/local/samba/var/lib/ntp_signd/

To use the socket with ntp on a system with an ntp user and group, you must
run:

chgrp ntp /usr/local/samba/var/lib/ntp_signd/

o   Michael Adam <obnox at samba.org>
    * BUG 9321: winbindd:cache: Fix offline logons with cached credentials.
    * BUG 9339: Build and quota fixes.
    * BUG 9353: Fix the cluster(ctdb) build without system talloc installed.


o   Christian Ambach <ambi at samba.org>
    * BUG 9208: Cannot migrate files with inheritance flags to share on top of
      NFSv4 filesystem.
    * BUG 9361: Quotas management doesn't work with SMB2/3.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 9317: Cannot easily change to internal DNS server.
    * BUG 9338: lib/replace: Return size of xattr if size argument is 0.
    * BUG 9339: Build and quota fixes.
    * BUG 9340: Do not use the wheel group for 'administrators'.
    * BUG 9347: winbind: Extend wbcAuthenticateUserEx to provide PAC.
    * BUG 9352: Fix samba crashes with certain RPC calls.
    * BUG 9355: Set mask values to 0777 and use fileserver.conf.
    * BUG 9357: Don't expose more symbols than specified by abi_match setting.
    * BUG 9379: ntp_signd permissions are too broad.


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 9300: vfs_streams_depot: Add delete_lost option.
    * BUG 9348: Fix the build against older ctdb versions.
    * BUG 9345: fix use of <smbconfoption> tag.
    * BUG 9349: Fix check for ctdb_private.h
    * BUG 9351: Fail "configure --with-cluster-support" if ctdb support is not
      available.


o   Ira Cooper <ira at samba.org>
    * BUG 9339: Build and quota fixes.


o   G?nther Deschner <gd at samba.org>
    * BUG 9272: 'net ads join' does not provide AES keys in host keytab.


o   David Disseldorp <ddiss at samba.org>
    * BUG 9125: Revert "s3-winbindd: make sure we obey the -n switch
      also for samlogon cache access" and describe samlogon cache caveat for
      'winbindd -n'.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 7472: Check for dn_expand also in libinet.
    * BUG 9339: Build and quota fixes.


o   Volker Lendecke <vl at samba.org>
    * BUG 9208: Cannot migrate files with inheritance flags to share on top of
      NFSv4 filesystem.
    * BUG 9352: dsdb: Simplify DsCrackNameOneFilter a bit.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 8620: Read ACL are not enabled by default on DS.
    * BUG 9175: Add smbXcli_session_set_disconnect_expired().
    * BUG 9341: Fix SMBD_SMB2_NUM_IOV_PER_REQ check for sendfile().
    * BUG 9359: Optimization needed for SMB2 performance sensitive workloads.
    * BUG 9360: SMB1 tree connect time is wrong.


o   Ricky Nance <ricky.nance at weaubleau.k12.mo.us>
    * BUG 9339: Build and quota fixes.


o   Rusty Russell <rusty at rustcorp.com.au>
    * BUG 9339: Build and quota fixes.


o   Christof Schmitt <christof.schmitt at us.ibm.com>
    * BUG 9347: winbind: Extend wbcAuthenticateUserEx to provide PAC.


o   Andreas Schneider <asn at samba.org>
    * BUG 9326: Fix 'net ads join' message for the dns domain.
    * BUG 9336: Add NetworkManager dispatcher script for Winbind.
    * BUG 9339: Build and quota fixes.


o   Jelmer Vernooij <jelmer at samba.org>
    * BUG 9357: Don't expose more symbols than specified by abi_match setting.


CHANGES SINCE 4.0.0rc3
======================

o   Michael Adam <obnox at samba.org>
    * BUG 9304: Remove unused sessionid.tdb and connections.tdb related code.
    * BUG 9319: validate stat(2) information before reconnect durable handles.


o   Jeremy Allison <jra at samba.org>
    * BUG 9190: Fix regression (change in behavior) of default acl masks.
      Remove "security mask", "force security mode", "directory security mask"
      "force directory" and "security mode" parameters.
    * BUG 9329: Directory listing with SeBackup can crash smbd.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 9295: Assert that auth_domain, auth_builtin, auth_sam, auth_winbind
      are builtin.
    * BUG 9322: Backport ldb version update.


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 9190: docs: Fix opening and ending tag mismatch: para.


o   Gregor Beck <gbeck at sernet.de>
    * BUG 9304: Remove unused sessionid.tdb and connections.tdb related code.


o   David Disseldorp <ddiss at suse.de>
    * BUG 8564: Fix segfault in pam_sm_authenticate().


o   Stefan Metzmacher <metze at samba.org>
    * BUG 9184: Fix loop in tdgram_bsd_recvfrom().
    * BUG 9209: Fix unitialized padding in smb2_create_blob_push_one().
    * BUG 9304: Remove unused sessionid.tdb and connections.tdb related code.
    * BUG 9309: Avoid a level 0 DEBUG if tstream_npa_connect_recv fails.
    * BUG 9318: Fix write time updates for durable handles.


o   Andreas Schneider <asn at samba.org>
    * BUG 9295: Build standard auth modules as internal modules.
    * BUG 9301: Move 'smbprint' to a common location.


o   Jelmer Vernooij <jelmer at samba.org>
    * BUG 9274: Add documentation and selftest fixes.


CHANGES SINCE 4.0.0rc2
======================

o   Jeremy Allison <jra at samba.org>
    * BUG 8966: Fix 'net rpc share allowedusers' to work with 2008r2.
    * BUG 9209: Parse of invalid SMB2 create blob can cause smbd crash.
    * BUG 9214: Bad user supplied SMB2 credit value can cause smbd to call
      smb_panic.
    * BUG 9222: Document that signing cannot be disabled for SMB2 by design.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 9235: Update Samba3-HOWTO Collection.
    * BUG 9271: samba-tool: Skip chown in sysvolreset when it would fail on
      a GID.
    * BUG 9274: Update Samba3-HOWTO Collection.


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 9235: Fix opening and ending tag mismatch in Samba3-HOWTO.
    * BUG 9271: Fix typos in samba_backup.
    * BUG 9274: Add delete_lost option to vfs_streams_depot.8.


o   Kai Blin <kai at samba.org>
    * BUG 9225: Fix return code for deleted DNS records.
    * BUG 8878: Time out UDP requests after DNS_REQUEST_TIMEOUT seconds.


o   G?nther Deschner <gd at samba.org>
    * BUG 9177: pam_winbind: Match more return codes when wbcGetPwnam has
    failed.


o   David Disseldorp <ddiss at samba.org>
    * BUG 9269: Fix 64bit-portability-issue.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 5670: Apply some Solaris packaging fixes.
    * BUG 8107: Fix poll replacement to become a msleep replacement.
    * BUG 8344: Fix --with(out)-sendfile-support option handling.


o   Volker Lendecke <vl at samba.org>
    * BUG 9223: Fix uninitialized variable in the cldap server.
    * BUG 9268: Make tdb robust against improper CLEAR_IF_FIRST restart.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 9271: Several samba-tool fixes.
    * BUG 9196: Don't take 'state->te' as indication for "was_deferred".


o   Matthieu Patou <mat at matws.net>
    * BUG 9240: Remove unused variable in DNS server.
    * BUG 9252: Preliminary tests for dcpromo in Windows 2012 fails with
      Samba DC.
    * BUG 9253: Crackname returns a dns domain name even if there is no cracked
      SID.
    * BUG 9255: Getncchanges with exop for repl_obj returns highest_usn.
    * BUG 9256: Getncchanges with exop for repl_obj_with_secrets should always
      be allowed for RWDC.
    * BUG 9257: LDAP server has at least one un-initialized variable.
    * BUG 9258: LDAP server ignore configuration values set in the database for
      timeout.
    * BUG 9259: rodc join fails complaining that it can't find a RWDC.
    * BUG 9260: kccdrs_replica_get_info returns invalid level when non
      supported should be returned.
    * BUG 9261: ds_replica_sync fails when specifying a name and not a guid.
    * BUG 9264: getncchanges returns invalid_parameters when it should return
      bad_nc.
    * BUG 9254: DsExecuteKCC returns wrong error code if taskid != 0.
    * BUG 9265: Bind dlz fails to start if there is a trustedanchors zone.


o   Rusty Russell <rusty at rustcorp.com.au>
    * BUG 9268: Make tdb robust against shrinking tdbs.


o   Andreas Schneider <asn at samba.org>
    * BUG 8769: Fix RAW printing for normal users.
    * BUG 9112: Increase debug level for info that the db is empty.
    * BUG 9244: Build pam_smbpass module only if enabled.
    * BUG 9245: Make sure the registry is set up before we init printing.
    * BUG 9276: Add config for systemd-tmpfiles.
    * BUG 9280: Add support for reloading systemd services.


o   Karolin Seeger <kseeger at samba.org>
    * BUG 7826: Remove link to Using Samba.
    * BUG 8802: Add basic manpages for 'samba' and 'samba-tool'.
    * BUG 9165: Fix makerpms.sh on RHEL.
    * BUG 9243: Remove duplicate synonym min protocol.
    * BUG 9271: Several samba-tool fixes.


o   Jelmer Vernooij <jelmer at samba.org>
    * BUG 9243: Add basic documentation for 'server min protocol'.
    * BUG 9271: Several samba-tool fixes.
    * BUG 9274: Add documentation for several parameters.


o   Matthias Dieter Walln?fer <mdw at samba.org>
    * BUG 9183: Introduce the wildcard binding feature to allow DNS to listen on
      localhost.


CHANGES SINCE 4.0.0rc1
======================

o   Michael Adam <obnox at samba.org>
    * BUG 9173: Make the SMB2 compound request create/delete_on_close/
      close work as Windows.


o   Jeremy Allison <jra at samba.org>
    * BUG 9161: Re-add the vfs_Chdir() cache.
    * BUG 9189: SMB2 Create doesn't return correct MAX ACCESS access mask in
      blob.
    * BUG 9213: Bad ASN.1 NegTokenInit packet can cause invalid free.


o   Christian Ambach <ambi at samba.org>
    * BUG 9162: Fix the build of the GPFS VFS module.
    * BUG 9197: Only do 'printing_subsystem_update' when printing is enabled.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 9228: Fix build on systems without ldap development headers.


o   Alexander Bokovoy <ab at samba.org>
    * BUG 9157: Cleanup idmap_ldap build dependencies.
    * BUG 9228: Make smbldaphelper subsystem an internal library.
    * BUG 9229: Fix build of winbindd- and krb5 locator-related manpages.


o   Sumit Bose <sbose at redhat.com>
    * BUG 9185: Allow DNS resolution of trusted domains if DNS name is
      available.


o   Ira Cooper <ira at samba.org>
    * BUG 9162: Fix build on Illumos/Solaris using '--with-acl'.
    * BUG 9173: Compound requests should continue processing.


o   G?nther Deschner <gd at samba.org>
    * BUG 9185: Winbind cannot resolve AD DC in a different subnet.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 9162: Fix the build of the ACL VFS modules.
    * BUG 9172: Fix reporting of gfs2 quotas.


o   Volker Lendecke <vl at samba.org>
    * BUG 9217: CreateFile with FILE_DIRECTORY_FILE can create directories
      on read-only shares.


o   Vladimir Marek <Vladimir.Marek at Oracle.COM>
    * BUG 9192: Fix service control for non-internal services.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 9173: Make the SMB2 compound request create/delete_on_close/
      close work as Windows.
    * BUG 9184: Fix receiving of UDP packets from 0 bytes.
    * BUG 9191: Release the share mode lock before calling exit_server().
    * BUG 9193: Fix usage of invalid memory in smb2_signing_check_pdu().
    * BUG 9194: Disallow '--prefix=/usr' and '--prefix=/usr/local' without
      '--enable-fhs'.
    * BUG 9198: Fix RHEL-CTDB packaging.


o   Matthieu Patou <mat at matws.net>
    * BUG 9199: Fix usage of "panic action".
    * BUG 9233: Fix a non handled memory out of memory.


o   Andreas Schneider <asn at samba.org>
    * BUG 8632: Fix builtin forms order to match Windows again.
    * BUG 9159: Fix generating idmap manpages.
    * BUG 9218: Don't segfault if user specified ports out for range.
    * BUG 9231: Fix NT_STATUS_IO_TIMEOUT during slow import of printers into
      registry.


KNOWN ISSUES
============

- 'samba-tool domain classicupgrade' will fail when setting ACLs on
  the GPO folders with NT_STATUS_INVALID_ONWER in the default
  configuration.  This happens if, as is typical a 'domain admins'
  group (-512) is mapped in the passdb backend being upgraded.  This
  is because the group mapping to a GID only prevents Samba from
  allocating a uid for that group.  The uid is needed so the 'domain
  admins' group can own the GPO file objects.

  To work around this issue, remove the 'domain admins' group before
  upgrade, as it will be re-created automatically.  You will
  of course need to fill in the group membership again.  A future release
  will make this automatic, or find some other workaround.

- This release makes the s3fs file server the default, as this is the
  file server combination we will use for the Samba 4.0 release.

- For similar reasons, sites with ACLs stored by the ntvfs file server
  may wish to continue to use that file server implementation, as a
  posix ACL will similarly not be set in this case.

- Replication of DNS data from one AD server to another may not work.
  The DNS data used by the internal DNS server and bind9_dlz is stored
  in an application partition in our directory.  The replication of
  this partition is not yet reliable.

- Replication may fail on FreeBSD due to getaddrinfo() rejecting names
  containing _.  A workaround will be in a future release.

- samba_upgradeprovision should not be run when upgrading to this release
  from a recent release.  No important database format changes have
  been made since alpha16.

- Installation on systems without a system iconv (and developer
  headers at compile time) is known to cause errors when dealing with
  non-ASCII characters.

- Domain member support in the 'samba' binary is in its infancy, and
  is not comparable to the support found in winbindd.  As such, do not
  use the 'samba' binary (provided for the AD server) on a member
  server.

- There is no NetBIOS browsing support (network neighbourhood)
  available for the AD domain controller.  (Support in nmbd and smbd
  for classic domains and member/standalone servers is unchanged).

- Clock Synchronisation is critical.  Many 'wrong password' errors are
  actually due to Kerberos objecting to a clock skew between client
  and server.  (The NTP work in the previous alphas are partly to assist
  with this problem).

- The DRS replication code may fail.  Please contact the team if you
  experience issues with DRS replication, as we have fixed many issues
  here in response to feedback from our production users.


RUNNING Samba 4.0 as an AD DC
=============================

A short guide to setting up Samba 4 as an AD DC can be found on the wiki:

  http://wiki.samba.org/index.php/Samba4/HOWTO

#######################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 4.0 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================

================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/rc/

The release notes are available online at:

	http://www.samba.org/samba/ftp/rc/WHATSNEW-4-0-0rc5.txt

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team

From kseeger at samba.org  Tue Dec  4 03:46:13 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Tue, 4 Dec 2012 11:46:13 +0100
Subject: [Announce] Samba 4.0.0rc6 Available for Download
Message-ID: <E1Tfq0z-009fPA-Vp@intern.SerNet.DE>

Release Announcements
---------------------

This is the sixth release candidate of Samba 4.0.  This is *not*
intended for production environments and is designed for testing
purposes only.  Please report any defects via the Samba bug reporting
system at https://bugzilla.samba.org/.

In this release candidate, we have a significant number of improvements
to our Access Control List (ACL) code, particularly for the Active
Directory Domain Controller, but also in our general purpose file
server.

These changes are important, as they enable Group Policy Objects to work
correctly, allow administrators to impose restrictions on some users
reading certain parts of the directory and correctly propagating
inherited ACLs down the LDAP directory tree.

Users of the Active Directory Domain Controller upgrading from any
previous release should run 'samba-tool ntacl sysvolreset' to re-sync
ACLs on the sysvol share with those matching the GPOs in LDAP and the
defaults from an initial provision.  This will set an underlying POSIX
ACL if required.

Samba 4.0 will be the next version of the Samba suite and incorporates
all the technology found in both the Samba4 series and the
stable 3.x series. The primary additional features over Samba 3.6 are
support for the Active Directory logon protocols used by Windows 2000
and above.

This release contains the best of all of Samba's
technology parts, both a file server (that you can reasonably expect
to upgrade existing Samba 3.x releases to) and the AD domain
controller work previously known as 'samba4'.

If you are upgrading, or looking to develop, test or deploy Samba 4.0
releases candidates, you should backup all configuration and data.


UPGRADING
=========

Users upgrading from Samba 3.x domain controllers and wanting to use
Samba 4.0 as an AD DC should use the 'samba-tool domain
classicupgrade' command.  See the wiki for more details:
https://wiki.samba.org/index.php/Samba4/samba3upgrade/HOWTO.

Users upgrading from Samba 4.0 alpha and beta releases since alpha15
should run 'samba-tool dbcheck --cross-ncs --fix' before re-starting
Samba.  Users upgrading from earlier alpha releases should contact the
team for advice.

Users upgrading an AD DC from any previous release should run
'samba-tool ntacl sysvolreset' to re-sync ACLs on the sysvol share
with those matching the GPOs in LDAP and the defaults from an initial
provision.  This will set an underlying POSIX ACL if required (eg not
using the NTVFS file server).

If you used the BIND9_FLATFILE or BIND9_DLZ features,
you'll have to add '-dns' to the 'server services' option,
as the internal dns server (SAMBA_INTERNAL) is the default now.


NEW FEATURES
============

Samba 4.0 supports the server-side of the Active Directory logon
environment used by Windows 2000 and later, so we can do full domain
join and domain logon operations with these clients.

Our Domain Controller (DC) implementation includes our own built-in
LDAP server and Kerberos Key Distribution Center (KDC) as well as the
Samba3-like logon services provided over CIFS.  We correctly generate
the infamous Kerberos PAC, and include it with the Kerberos tickets we
issue.

Samba 4.0.0rc5 ships with two distinct file servers.  We now use the
file server from the Samba 3.x series 'smbd' for all file serving by
default.

Samba 4.0 also ships with the 'NTVFS' file server.  This file server
is what was used in all previous releases of Samba 4.0, and is
tuned to match the requirements of an AD domain controller.  We
continue to support this, not only to provide continuity to
installations that have deployed it as part of an AD DC, but also as a
running example of the NT-FSA architecture we expect to move smbd to in
the longer term.

For pure file server work, the binaries users would expect from that
series (nmbd, winbindd, smbpasswd) continue to be available.  When
running an AD DC, you only need to run 'samba' (not
nmbd/smbd/winbind), as the required services are co-coordinated by this
master binary.

As DNS is an integral part of Active Directory, we also provide two DNS
solutions, a simple internal DNS server for 'out of the box' configurations
and a more elaborate BIND plugin using the BIND DLZ mechanism in versions
9.8 and 9.9. During the provision, you can select which backend to use.
With the internal backend, your DNS server is good to go.
If you chose the BIND_DLZ backend, a configuration file will be generated
for bind to make it use this plugin, as well as a file explaining how to
set up bind.

To provide accurate timestamps to Windows clients, we integrate with
the NTP project to provide secured NTP replies.  To use you need to
start ntpd and configure it with the 'restrict ... ms-sntp' and
ntpsigndsocket options.

Finally, a new scripting interface has been added to Samba 4, allowing
Python programs to interface to Samba's internals, and many tools and
internal workings of the DC code is now implemented in python.


######################################################################
Changes
#######

smb.conf changes
----------------

   Parameter Name			Description
   --------------			-----------

   acl compatibility			Removed
   allow dns updates			New
   announce as				Removed
   announce version			Removed
   cldap port				New
   client max protocol			New
   client min protocol			New
   client signing			Changed default
   dcerpc endpoint servers		New
   dgram port				New
   directory security mask		Removed
   display charset			Removed
   dns forwarder			New
   dns update command			New
   force security mode			Removed
   force directory security mode	Removed
   homedir map				Changed default
   kernel oplocks			Changed default
   kernel share modes			New
   kpasswd port				New
   krb5 port				New
   nbt client socket address		New
   nbt port				New
   nsupdate command			New
   ntp signd socket directory		New
   ntvfs handler			New
   paranoid server security		Removed
   pid directory			New
   printer admin			Removed
   rndc command 			New
   rpc big endian			New
   samba kcc command			New
   security mask			Removed
   send spnego principal		Removed
   server max protocol			New
   server min protocol			New
   server role				New
   server services			New
   server signing			Changed default
   share backend			New
   share modes				Removed
   smb2 max read			Changed default
   smb2 max write			Changed default
   smb2 max trans			Changed default
   socket address			Removed
   spn update command			New
   time offset				Removed
   tls cafile				New
   tls certfile				New
   tls crlfile				New
   tls dh params file			New
   tls enabled				New
   tls keyfile				New
   unicode				New
   web port				New
   winbindd privileged socket directory	New
   winbind sealed pipes			New
   winbindd socket directory		New


CHANGES SINCE 4.0.0rc5
======================

With this release candidate the ACLs in the Active Directory
are also checked on searches by default. The automatic inheritance
of ACLs is also correctly recalculated on changes now.

o   Michael Adam <obnox at samba.org>
    * BUG 9350: Fail "configure --with-ads" if ads support is not available.
    * BUG 9446: Id mapping code delivers inconsistent results.
    * BUG 9453: Fix building pdb_ldap as shared module.


o   Jeremy Allison <jra at samba.org>
    * BUG 9236: ACL masks incorrectly applied when setting ACLs.
    * BUG 9374: Allow smb2.acls torture test to pass against smbd with a POSIX
      ACLs backend.


o   Christian Ambach <ambi at samba.org>
    * BUG 9178: Add DMAPI configure option and checks.
    * BUG 9274: Document shadow:snapdirseverywhere option of vfs_shadow_copy2.
    * BUG 9339: Backport build fixes from master.
    * BUG 9411: aio read marks the file as modified.
    * BUG 9413: Fix waf build on AIX6.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 9121: Provide and use setproctitle replacement function for samba4
      processes on linux.
    * BUG 9271: samba-tool: Rework ldap attribute fetch in classicupgrade for
      missing attributes.
    * BUG 9421: Fix several build issues.
    * BUG 9448: Backport several crash bugs from master.


o   Sumit Bose <sbose at redhat.com>
    * BUG 9367: Use work around for 'winbind use default domain' only if it
      is set.


o   Kai Blin <kai at samba.org>
    * BUG 9399 - 'samba-tool dns serverinfo localhost' returns 'Memory
      allocation error'.
    * BUG 9449: Remove unused samba-dig tool.


o   G?nther Deschner <gd at samba.org>
    * BUG 9426: rpc_client: lookup nametype 0x20 in rpc_pipe_open_tcp_port().
    * BUG 9439: Fix ncacn_ip_tcp reconnection code for lsa lookups.
    * BUG 9451: Allow to force DNS updates using net.


o   David Disseldorp <ddiss at samba.org>
    * BUG 9433: spoolss: Fix segfault when "default devmode" is disabled.


o   Amitay Isaacs <amitay at gmail.com>
    * BUG 9265: Bind dlz fails to start if there is a trustedanchors zone.
    * BUG 9354: Fix format string vulnerability in an error message.


o   Volker Lendecke <vl at samba.org>
    * BUG 9422: Large read requests cause server to issue malformed reply.
    * BUG 9440: Do not rely on dbwrap_record_get_value to return a talloc
      object.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 8620: Read ACL are not enabled by default on DS.
    * BUG 8621: ACL are not recalculated if parent is changed and inherit is
      enabled.
    * BUG 9373: samba-tool: Report a CommandError if loading of the config file
      fails.
    * BUG 9385: Add missing newline in the output of ldb_ldif_write_trace().
    * BUG 9390: Fix segfaults in "log level = 10" on Solaris.
    * BUG 9402: lib/addns: Fix working with a bind9 server.
    * BUG 9406: ACL fixes since 4.0 rc1.
    * BUG 9447: Backport tests from master.
    * BUG 9448: Backport several crash bugs from master.


o   Ricky Nance <ricky.nance at weaubleau.k12.mo.us>
    * BUG 9449: Remove phpldapadmin inclusion.


o   Matthieu Patou <mat at matws.net>
    * BUG 9418: Fix MD5 detection in the autoconf build.


o   Arvid Requate <requate at univention.de>
    * BUG 9376: Fix typo in got_duplicate_group check.
    * BUG 9392: Fix 'samba-tool fsmo --role=schema'.


o   Andreas Schneider <asn at samba.org>
    * BUG 9386: Failover if netlogon pipe is not available.
    * BUG 9436: Fix leaking sockets of SMB connections to a DC.


o   Karolin Seeger <kseeger at samba.org>
    * BUG 9425: Do not build ntdb by default.
    * BUG 9437: Warnings when building manpages with waf.
    * BUG 9443: Manpages of the libraries are located in different
      subdirectories.
    * BUG 9444: Merge both samba.8 manpages.
    * BUG 9445: Update man 7 samba.


o   Jelmer Vernooij <jelmer at samba.org>
    * BUG 9339: Backport build fixes from master.


CHANGES SINCE 4.0.0rc4
======================

With this release candidate the location of the socket samba accepts
connections from NTPd has changed, as has the enforced permissions.

This means the ntp.conf will need to change from (eg)

ntpsigndsocket /usr/local/samba/var/run/ntp_signd/

to

ntpsigndsocket /usr/local/samba/var/lib/ntp_signd/

To use the socket with ntp on a system with an ntp user and group, you must
run:

chgrp ntp /usr/local/samba/var/lib/ntp_signd/

o   Michael Adam <obnox at samba.org>
    * BUG 9321: winbindd:cache: Fix offline logons with cached credentials.
    * BUG 9339: Build and quota fixes.
    * BUG 9353: Fix the cluster(ctdb) build without system talloc installed.


o   Christian Ambach <ambi at samba.org>
    * BUG 9208: Cannot migrate files with inheritance flags to share on top of
      NFSv4 filesystem.
    * BUG 9361: Quotas management doesn't work with SMB2/3.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 9317: Cannot easily change to internal DNS server.
    * BUG 9338: lib/replace: Return size of xattr if size argument is 0.
    * BUG 9339: Build and quota fixes.
    * BUG 9340: Do not use the wheel group for 'administrators'.
    * BUG 9347: winbind: Extend wbcAuthenticateUserEx to provide PAC.
    * BUG 9352: Fix samba crashes with certain RPC calls.
    * BUG 9355: Set mask values to 0777 and use fileserver.conf.
    * BUG 9357: Don't expose more symbols than specified by abi_match setting.
    * BUG 9379: ntp_signd permissions are too broad.


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 9300: vfs_streams_depot: Add delete_lost option.
    * BUG 9348: Fix the build against older ctdb versions.
    * BUG 9345: fix use of <smbconfoption> tag.
    * BUG 9349: Fix check for ctdb_private.h
    * BUG 9351: Fail "configure --with-cluster-support" if ctdb support is not
      available.


o   Ira Cooper <ira at samba.org>
    * BUG 9339: Build and quota fixes.


o   G?nther Deschner <gd at samba.org>
    * BUG 9272: 'net ads join' does not provide AES keys in host keytab.


o   David Disseldorp <ddiss at samba.org>
    * BUG 9125: Revert "s3-winbindd: make sure we obey the -n switch
      also for samlogon cache access" and describe samlogon cache caveat for
      'winbindd -n'.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 7472: Check for dn_expand also in libinet.
    * BUG 9339: Build and quota fixes.


o   Volker Lendecke <vl at samba.org>
    * BUG 9208: Cannot migrate files with inheritance flags to share on top of
      NFSv4 filesystem.
    * BUG 9352: dsdb: Simplify DsCrackNameOneFilter a bit.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 8620: Read ACL are not enabled by default on DS.
    * BUG 9175: Add smbXcli_session_set_disconnect_expired().
    * BUG 9341: Fix SMBD_SMB2_NUM_IOV_PER_REQ check for sendfile().
    * BUG 9359: Optimization needed for SMB2 performance sensitive workloads.
    * BUG 9360: SMB1 tree connect time is wrong.


o   Ricky Nance <ricky.nance at weaubleau.k12.mo.us>
    * BUG 9339: Build and quota fixes.


o   Rusty Russell <rusty at rustcorp.com.au>
    * BUG 9339: Build and quota fixes.


o   Christof Schmitt <christof.schmitt at us.ibm.com>
    * BUG 9347: winbind: Extend wbcAuthenticateUserEx to provide PAC.


o   Andreas Schneider <asn at samba.org>
    * BUG 9326: Fix 'net ads join' message for the dns domain.
    * BUG 9336: Add NetworkManager dispatcher script for Winbind.
    * BUG 9339: Build and quota fixes.


o   Jelmer Vernooij <jelmer at samba.org>
    * BUG 9357: Don't expose more symbols than specified by abi_match setting.


CHANGES SINCE 4.0.0rc3
======================

o   Michael Adam <obnox at samba.org>
    * BUG 9304: Remove unused sessionid.tdb and connections.tdb related code.
    * BUG 9319: validate stat(2) information before reconnect durable handles.


o   Jeremy Allison <jra at samba.org>
    * BUG 9190: Fix regression (change in behavior) of default acl masks.
      Remove "security mask", "force security mode", "directory security mask"
      "force directory" and "security mode" parameters.
    * BUG 9329: Directory listing with SeBackup can crash smbd.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 9295: Assert that auth_domain, auth_builtin, auth_sam, auth_winbind
      are builtin.
    * BUG 9322: Backport ldb version update.


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 9190: docs: Fix opening and ending tag mismatch: para.


o   Gregor Beck <gbeck at sernet.de>
    * BUG 9304: Remove unused sessionid.tdb and connections.tdb related code.


o   David Disseldorp <ddiss at suse.de>
    * BUG 8564: Fix segfault in pam_sm_authenticate().


o   Stefan Metzmacher <metze at samba.org>
    * BUG 9184: Fix loop in tdgram_bsd_recvfrom().
    * BUG 9209: Fix unitialized padding in smb2_create_blob_push_one().
    * BUG 9304: Remove unused sessionid.tdb and connections.tdb related code.
    * BUG 9309: Avoid a level 0 DEBUG if tstream_npa_connect_recv fails.
    * BUG 9318: Fix write time updates for durable handles.


o   Andreas Schneider <asn at samba.org>
    * BUG 9295: Build standard auth modules as internal modules.
    * BUG 9301: Move 'smbprint' to a common location.


o   Jelmer Vernooij <jelmer at samba.org>
    * BUG 9274: Add documentation and selftest fixes.


CHANGES SINCE 4.0.0rc2
======================

o   Jeremy Allison <jra at samba.org>
    * BUG 8966: Fix 'net rpc share allowedusers' to work with 2008r2.
    * BUG 9209: Parse of invalid SMB2 create blob can cause smbd crash.
    * BUG 9214: Bad user supplied SMB2 credit value can cause smbd to call
      smb_panic.
    * BUG 9222: Document that signing cannot be disabled for SMB2 by design.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 9235: Update Samba3-HOWTO Collection.
    * BUG 9271: samba-tool: Skip chown in sysvolreset when it would fail on
      a GID.
    * BUG 9274: Update Samba3-HOWTO Collection.


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 9235: Fix opening and ending tag mismatch in Samba3-HOWTO.
    * BUG 9271: Fix typos in samba_backup.
    * BUG 9274: Add delete_lost option to vfs_streams_depot.8.


o   Kai Blin <kai at samba.org>
    * BUG 9225: Fix return code for deleted DNS records.
    * BUG 8878: Time out UDP requests after DNS_REQUEST_TIMEOUT seconds.


o   G?nther Deschner <gd at samba.org>
    * BUG 9177: pam_winbind: Match more return codes when wbcGetPwnam has
    failed.


o   David Disseldorp <ddiss at samba.org>
    * BUG 9269: Fix 64bit-portability-issue.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 5670: Apply some Solaris packaging fixes.
    * BUG 8107: Fix poll replacement to become a msleep replacement.
    * BUG 8344: Fix --with(out)-sendfile-support option handling.


o   Volker Lendecke <vl at samba.org>
    * BUG 9223: Fix uninitialized variable in the cldap server.
    * BUG 9268: Make tdb robust against improper CLEAR_IF_FIRST restart.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 9271: Several samba-tool fixes.
    * BUG 9196: Don't take 'state->te' as indication for "was_deferred".


o   Matthieu Patou <mat at matws.net>
    * BUG 9240: Remove unused variable in DNS server.
    * BUG 9252: Preliminary tests for dcpromo in Windows 2012 fails with
      Samba DC.
    * BUG 9253: Crackname returns a dns domain name even if there is no cracked
      SID.
    * BUG 9255: Getncchanges with exop for repl_obj returns highest_usn.
    * BUG 9256: Getncchanges with exop for repl_obj_with_secrets should always
      be allowed for RWDC.
    * BUG 9257: LDAP server has at least one un-initialized variable.
    * BUG 9258: LDAP server ignore configuration values set in the database for
      timeout.
    * BUG 9259: rodc join fails complaining that it can't find a RWDC.
    * BUG 9260: kccdrs_replica_get_info returns invalid level when non
      supported should be returned.
    * BUG 9261: ds_replica_sync fails when specifying a name and not a guid.
    * BUG 9264: getncchanges returns invalid_parameters when it should return
      bad_nc.
    * BUG 9254: DsExecuteKCC returns wrong error code if taskid != 0.
    * BUG 9265: Bind dlz fails to start if there is a trustedanchors zone.


o   Rusty Russell <rusty at rustcorp.com.au>
    * BUG 9268: Make tdb robust against shrinking tdbs.


o   Andreas Schneider <asn at samba.org>
    * BUG 8769: Fix RAW printing for normal users.
    * BUG 9112: Increase debug level for info that the db is empty.
    * BUG 9244: Build pam_smbpass module only if enabled.
    * BUG 9245: Make sure the registry is set up before we init printing.
    * BUG 9276: Add config for systemd-tmpfiles.
    * BUG 9280: Add support for reloading systemd services.


o   Karolin Seeger <kseeger at samba.org>
    * BUG 7826: Remove link to Using Samba.
    * BUG 8802: Add basic manpages for 'samba' and 'samba-tool'.
    * BUG 9165: Fix makerpms.sh on RHEL.
    * BUG 9243: Remove duplicate synonym min protocol.
    * BUG 9271: Several samba-tool fixes.


o   Jelmer Vernooij <jelmer at samba.org>
    * BUG 9243: Add basic documentation for 'server min protocol'.
    * BUG 9271: Several samba-tool fixes.
    * BUG 9274: Add documentation for several parameters.


o   Matthias Dieter Walln?fer <mdw at samba.org>
    * BUG 9183: Introduce the wildcard binding feature to allow DNS to listen on
      localhost.


CHANGES SINCE 4.0.0rc1
======================

o   Michael Adam <obnox at samba.org>
    * BUG 9173: Make the SMB2 compound request create/delete_on_close/
      close work as Windows.


o   Jeremy Allison <jra at samba.org>
    * BUG 9161: Re-add the vfs_Chdir() cache.
    * BUG 9189: SMB2 Create doesn't return correct MAX ACCESS access mask in
      blob.
    * BUG 9213: Bad ASN.1 NegTokenInit packet can cause invalid free.


o   Christian Ambach <ambi at samba.org>
    * BUG 9162: Fix the build of the GPFS VFS module.
    * BUG 9197: Only do 'printing_subsystem_update' when printing is enabled.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 9228: Fix build on systems without ldap development headers.


o   Alexander Bokovoy <ab at samba.org>
    * BUG 9157: Cleanup idmap_ldap build dependencies.
    * BUG 9228: Make smbldaphelper subsystem an internal library.
    * BUG 9229: Fix build of winbindd- and krb5 locator-related manpages.


o   Sumit Bose <sbose at redhat.com>
    * BUG 9185: Allow DNS resolution of trusted domains if DNS name is
      available.


o   Ira Cooper <ira at samba.org>
    * BUG 9162: Fix build on Illumos/Solaris using '--with-acl'.
    * BUG 9173: Compound requests should continue processing.


o   G?nther Deschner <gd at samba.org>
    * BUG 9185: Winbind cannot resolve AD DC in a different subnet.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 9162: Fix the build of the ACL VFS modules.
    * BUG 9172: Fix reporting of gfs2 quotas.


o   Volker Lendecke <vl at samba.org>
    * BUG 9217: CreateFile with FILE_DIRECTORY_FILE can create directories
      on read-only shares.


o   Vladimir Marek <Vladimir.Marek at Oracle.COM>
    * BUG 9192: Fix service control for non-internal services.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 9173: Make the SMB2 compound request create/delete_on_close/
      close work as Windows.
    * BUG 9184: Fix receiving of UDP packets from 0 bytes.
    * BUG 9191: Release the share mode lock before calling exit_server().
    * BUG 9193: Fix usage of invalid memory in smb2_signing_check_pdu().
    * BUG 9194: Disallow '--prefix=/usr' and '--prefix=/usr/local' without
      '--enable-fhs'.
    * BUG 9198: Fix RHEL-CTDB packaging.


o   Matthieu Patou <mat at matws.net>
    * BUG 9199: Fix usage of "panic action".
    * BUG 9233: Fix a non handled memory out of memory.


o   Andreas Schneider <asn at samba.org>
    * BUG 8632: Fix builtin forms order to match Windows again.
    * BUG 9159: Fix generating idmap manpages.
    * BUG 9218: Don't segfault if user specified ports out for range.
    * BUG 9231: Fix NT_STATUS_IO_TIMEOUT during slow import of printers into
      registry.


KNOWN ISSUES
============

- 'samba-tool domain classicupgrade' will fail when setting ACLs on
  the GPO folders with NT_STATUS_INVALID_ONWER in the default
  configuration.  This happens if, as is typical a 'domain admins'
  group (-512) is mapped in the passdb backend being upgraded.  This
  is because the group mapping to a GID only prevents Samba from
  allocating a uid for that group.  The uid is needed so the 'domain
  admins' group can own the GPO file objects.

  To work around this issue, remove the 'domain admins' group before
  upgrade, as it will be re-created automatically.  You will
  of course need to fill in the group membership again.  A future release
  will make this automatic, or find some other workaround.

- This release makes the s3fs file server the default, as this is the
  file server combination we will use for the Samba 4.0 release.

- For similar reasons, sites with ACLs stored by the ntvfs file server
  may wish to continue to use that file server implementation, as a
  posix ACL will similarly not be set in this case.

- Replication of DNS data from one AD server to another may not work.
  The DNS data used by the internal DNS server and bind9_dlz is stored
  in an application partition in our directory.  The replication of
  this partition is not yet reliable.

- Replication may fail on FreeBSD due to getaddrinfo() rejecting names
  containing _.  A workaround will be in a future release.

- samba_upgradeprovision should not be run when upgrading to this release
  from a recent release.  No important database format changes have
  been made since alpha16.

- Installation on systems without a system iconv (and developer
  headers at compile time) is known to cause errors when dealing with
  non-ASCII characters.

- Domain member support in the 'samba' binary is in its infancy, and
  is not comparable to the support found in winbindd.  As such, do not
  use the 'samba' binary (provided for the AD server) on a member
  server.

- There is no NetBIOS browsing support (network neighbourhood)
  available for the AD domain controller.  (Support in nmbd and smbd
  for classic domains and member/standalone servers is unchanged).

- Clock Synchronisation is critical.  Many 'wrong password' errors are
  actually due to Kerberos objecting to a clock skew between client
  and server.  (The NTP work in the previous alphas are partly to assist
  with this problem).

- The DRS replication code may fail.  Please contact the team if you
  experience issues with DRS replication, as we have fixed many issues
  here in response to feedback from our production users.


RUNNING Samba 4.0 as an AD DC
=============================

A short guide to setting up Samba 4 as an AD DC can be found on the wiki:

  http://wiki.samba.org/index.php/Samba4/HOWTO

#######################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 4.0 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================

================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/rc/

The release notes are available online at:

	http://www.samba.org/samba/ftp/rc/WHATSNEW-4-0-0rc6.txt

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team

From kseeger at samba.org  Mon Dec 10 01:10:52 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Mon, 10 Dec 2012 09:10:52 +0100
Subject: [Announce] Samba 3.6.10 Available for Download
Message-ID: <E1ThyRw-00GaoM-Ed@intern.SerNet.DE>

===================================================================
				"United we stand, divided we fall."

				 Aesop
===================================================================


Release Announcements
=====================

This is is the latest stable release of Samba 3.6.

Major enhancements in Samba 3.6.10 include:

o  Respond correctly to FILE_STREAM_INFO requests (bug #9460).
o  Fix segfault when "default devmode" is disabled (bug #9433).
o  Fix segfaults in "log level = 10" on Solaris (bug #9390).


Changes since 3.6.9:
--------------------

o   Jeremy Allison <jra at samba.org>
    * BUG 9236: ACL masks incorrectly applied when setting ACLs.
    * BUG 9374: Allow smb2.acls torture test to pass against smbd with a POSIX
      ACLs backend.


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 9345: Manpages: Fix use of <smbconfoption> tag.


o   Sumit Bose <sbose at redhat.com>
    * BUG 9367: Use work around for 'winbind use default domain' only if it is
      set.


o   G?nther Deschner <gd at samba.org>
    * BUG 9272: 'net ads join' does not provide AES keys in host keytab.
    * BUG 9426: Lookup nametype 0x20 in rpc_pipe_open_tcp_port().
    * BUG 9439: Fix ncacn_ip_tcp reconnection code for lsa lookups.
    * BUG 9451: Allow to force DNS updates using net.


o   David Disseldorp <ddiss at samba.org>
    * BUG 9433: Fix segfault when "default devmode" is disabled.


o   Volker Lendecke <vl at samba.org>
    * BUG 9359: Optimization needed for SMB2 performance sensitive workloads.
    * BUG 9422: Large read requests cause server to issue malformed reply.
    * BUG 9439: Fix ncacn_ip_tcp reconnection code for lsa lookups.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 9209: Improve the smb2.create.blob test.
    * BUG 9272: 'net ads join' does not provide AES keys in host keytab.
    * BUG 9390: Fix segfaults in "log level = 10" on Solaris.
    * BUG 9402: lib/addns doesn't work with a bind9 server.


o   Matthieu Patou <mat at matws.net>
    * BUG 9418: Fix MD5 detection in the autoconf build.


o   Andreas Schneider <asn at samba.org>
    * BUG 8564: Fix segfault in pam_sm_authenticate().
    * BUG 9326: Fix 'net ads join' message for the dns domain.
    * BUG 9386: Winbind: Failover if netlogon pipe is not available.
    * BUG 9436: Fix leaking sockets of SMB connections to a DC.


o   Richard Sharpe <realrichardsharpe at gmail.com>
    * BUG 9460: Respond correctly to FILE_STREAM_INFO requests.


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba corresponding product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/

The release notes are available online at:

        http://www.samba.org/samba/ftp/history/samba-3.6.10.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team


From jra at samba.org  Tue Dec 11 10:32:42 2012
From: jra at samba.org (Jeremy Allison)
Date: Tue, 11 Dec 2012 09:32:42 -0800
Subject: Samba 4.0 released - The First Free Software Active Directory
	Compatible Server is now available !
Message-ID: <20121211173242.GD20974@samba2>

                      Samba Team Releases Samba 4.0
                      =============================

December 11th 2012.

The Samba Team is proud to announce the release of Samba 4.0, a major
new release of the award-winning Free Software file, print and
authentication server suite for Microsoft Windows clients.


The First Free Software Active Directory Compatible Server
==========================================================

As the culmination of ten years' work, the Samba Team has created the
first compatible Free Software implementation of Microsoft?s Active
Directory protocols. Familiar to all network administrators, the
Active Directory protocols are the heart of modern directory service
implementations.

Samba 4.0 comprises an LDAP directory server, Heimdal Kerberos
authentication server, a secure Dynamic DNS server, and
implementations of all necessary remote procedure calls for Active
Directory. Samba 4.0 provides everything needed to serve as an Active
Directory Compatible Domain Controller for all versions of Microsoft
Windows clients currently supported by Microsoft, including the
recently released Windows 8.

The Samba 4.0 Active Directory Compatible Server provides support for
features such as Group Policy, Roaming Profiles, Windows
Administration tools and integrates with Microsoft Exchange and Free
Software compatible services such as OpenChange.

The Samba 4.0 Active Directory Compatible Server can also be joined to
an existing Microsoft Active Directory domain, and Microsoft Active
Directory Domain Controllers can be joined to a Samba 4.0 Active
Directory Compatible Server, showing true peer-to-peer
interoperability of the Microsoft and Samba implementations of the
Active Directory protocols.

Acknowledging the value of the interoperability of the Samba 4.0
Active Directory Compatible Server, Steve van Maanen, the co-founder
of Starsphere LLC, an IT services company in Tokyo, said:

"Thanks to Samba4, I have two fully replicating Active Directory
Domain controllers that boot in under 10 seconds ! It is nice to have
alternatives, and Samba4 is a great one."

Upgrade scripts are also provided for organizations using the previous
Microsoft Windows NT Domain Controller functionality in Samba 3.x, to
allow them to migrate smoothly to Samba 4.0.

Suitable for low-power and embedded applications, yet scaling to large
clusters, Samba 4.0 is efficient and flexible. Its Python programming
interface and administration toolkit help in enterprise deployments.


Created Using Microsoft Documentation
=====================================

The Samba 4.0 Active Directory Compatible Server was created with help
from the official protocol documentation published by Microsoft
Corporation and the Samba Team would like acknowledge the
documentation help and interoperability testing by Microsoft engineers
that made our implementation interoperable.

"Active Directory is a mainstay of enterprise IT environments, and
Microsoft is committed to support for interoperability across
platforms," said Thomas Pfenning, director of development, Windows
Server. "We are pleased that the documentation and interoperability
labs that Microsoft has provided have been key in the development of
the Samba 4.0 Active Directory functionality."


Introducing SMB2.1 File Serving Support
=======================================

Samba 4.0 includes the first Free Software implementation of
Microsoft's SMB2.1 file serving protocol. Building on the success of
the SMB2.0 server in Samba 3.6, the Samba 4.0 file server component is
an evolution of the trusted Samba file serving code that is used
worldwide by vendors of file servers, such as IBM's clustered Scale
Out Network Attached Storage (SONAS), and many other commercial
products.

In addition, the Samba 4.0 file server contains an initial
implementation of SMB3, which will be further developed in later Samba
4 releases into a fully-featured SMB3 clustered file server
implementation.

Future developments of our SMB3 server and client suite, in
combination with our expanding number of SMB3 tests, will keep driving
the performance improvements and improved compatibility with Microsoft
Windows that Samba users have come to expect from our software.


Integrated Clustered File Server Support
========================================

Building on our success as the first commercial implementation of a
clustered SMB/CIFS server, Samba 4.0 provides industry-leading
scalability and performance as a clustered SMB2/SMB/CIFS file server,
using our "clustered tdb" (ctdb) technology - also available as Free
Software.

Clustered Samba provides a "Single Server" view of clustered file
storage, allowing clients to connect to the least loaded server and
still providing a completely coherent view of the underlying clustered
file system.

Written and tested to be compatible with most clustered file systems,
both Free Software and proprietary, Samba 4.0 with ctdb provides a
scalable clustered file server solution with full Windows file sharing
semantics.

Samba and ctdb have been shipping in production file serving products
for many years, to some of the most demanding customers in the world.


Easy Integration into Existing Directory Services
=================================================

Samba 4.0 ships with an improved winbind, which allows Samba 4.0 file
servers to easily integrate into existing Active Directory services as
member servers. Both Microsoft Active Directory and Samba 4.0 Active
Directory Compatible servers are supported.


Stability, Security and Performance
===================================

Samba 4.0 has been tested using our widely accepted smbtorture test
suite, created by the Samba Team to test Samba itself and now used by
most of the companies writing SMB3/SMB2/SMB/CIFS file server software
to test their own products. We also regularly test interoperability
with other major vendors at plug-fest events to make sure Samba 4.0
deployments work correctly with existing customer equipment.

In addition, Samba is one of eleven open source projects that leading
software integrity vendor Coverity has certified as "secure" and has
reached Coverity "Integrity Rung 2" certification.

The Samba Team provides immediate responses to any security
vulnerabilities, and provides fixes to all vendors using the Samba
code in coordination with industry standard security reporting
agencies.


A Modular Toolbox for OEM Vendor Needs
======================================

As Free Software, Samba 4.0 is the ideal choice for Original Equipment
Manufacturers (OEMs) to use for their file, print and authentication
products. It is easily integrated into a whole host of different
tasks, and can be customized at will by the vendor to satisfy their
needs.

In addition, Samba 4.0 includes a modular "Virtual File System" (VFS)
interface that vendors can use to quickly and efficiently customize
Samba to take advantage of any specific features of their underlying
technology without having to modify any of the core Samba code. From
advanced file systems to network traffic analysis, the Samba VFS layer
allows external code to be easily integrated with Samba. Example
modules are provided as source code for vendors to customize as they
wish.

Samba is the leading choice for Microsoft Windows connectivity
==================================================================

Samba is the leading technology choice for Windows file serving on
Linux and UNIX platforms and in embedded Network Attached Storage
(NAS) solutions. Samba is used by vendors selling NAS solutions
ranging from high end clustered business-critical systems, to low end
consumer devices, and everything in between. Samba is fully IPv6
enabled and meets all mandates for modern network interoperability.

Commercial support is available for Samba from many different vendors.

Getting Samba 4.0
=================

Samba 4.0 source code is available now from the Samba Web site.

http://www.samba.org

About Active Directory
======================

Microsoft Windows and Active Directory are trademarks of Microsoft
Corporation.

About the Samba Team
====================

The Samba Team is a worldwide group of computer professionals working
together via the Internet to produce the highest quality Free Software
Windows (SMB3/SMB2/SMB/CIFS) server and client software. We are the
undisputed experts in providing interoperability with computers
running Microsoft Windows. Members of the Samba Team work for many of
the largest companies in the software Industry and even helped
Microsoft produce the protocol documentation that fully specifies the
SMB/CIFS protocol.

From kseeger at samba.org  Tue Dec 11 10:40:26 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Tue, 11 Dec 2012 18:40:26 +0100
Subject: [Announce] Samba 4.0.0 Available for Download!
Message-ID: <E1TiToh-001PxQ-An@intern.SerNet.DE>

==================================================================
					"Nothing is impossible,
					 the word itself says
					 'I'm possible'!"

					 Audrey Hepburn

==================================================================


Release Announcements
---------------------

This is is the first stable release of Samba 4.0.

This release contains the best of all of Samba's
technology parts, both a file server (that you can reasonably expect
to upgrade existing Samba 3.x releases to) and the AD domain
controller work previously known as 'Samba4'.

Major enhancements in Samba 4.0.0 include:

Active Directory services
=========================

Samba 4.0 supports the server-side of the Active Directory logon
environment used by Windows 2000 and later, so we can do full domain
join and domain logon operations with these clients.

Our Domain Controller (DC) implementation includes our own built-in
LDAP server and Kerberos Key Distribution Center (KDC) as well as the
Samba3-like logon services provided over CIFS.  We correctly generate
the infamous Kerberos PAC, and include it with the Kerberos tickets we
issue.

When running an AD DC, you only need to run 'samba' (not smbd/nmbd/winbindd),
as the required services are co-coordinated by this master binary.
The tool to administer the Active Directory services is called 'samba-tool'.

A short guide to setting up Samba 4 as an AD DC can be found on the wiki:

  http://wiki.samba.org/index.php/Samba4/HOWTO


File Services
=============

Samba 4.0.0 ships with two distinct file servers.  We now use the
file server from the Samba 3.x series 'smbd' for all file serving by
default.

Samba 4.0 also ships with the 'NTVFS' file server.  This file server
is what was used prior to the beta2 release of Samba 4.0, and is
tuned to match the requirements of an AD domain controller.  We
continue to support this, not only to provide continuity to
installations that have deployed it as part of an AD DC, but also as a
running example of the NT-FSA architecture we expect to move smbd to in
the longer term.

For pure file server work, the binaries users would expect from that
series (smbd, nmbd, winbindd, smbpasswd) continue to be available.


DNS
===

As DNS is an integral part of Active Directory, we also provide two DNS
solutions, a simple internal DNS server for 'out of the box' configurations
and a more elaborate BIND plugin using the BIND DLZ mechanism in versions
9.8 and 9.9. During the provision, you can select which backend to use.
With the internal backend, your DNS server is good to go.
If you chose the BIND_DLZ backend, a configuration file will be generated
for bind to make it use this plugin, as well as a file explaining how to
set up bind.


NTP
===

To provide accurate timestamps to Windows clients, we integrate with
the NTP project to provide secured NTP replies.  To use you need to
start ntpd and configure it with the 'restrict ... ms-sntp' and
ntpsigndsocket options.


Python Scripting Interface
==========================

A new scripting interface has been added to Samba 4, allowing
Python programs to interface to Samba's internals, and many tools and
internal workings of the DC code is now implemented in python.


Known Issues
============

- Replication of DNS data from one AD server to another may not work.
  The DNS data used by the internal DNS server and bind9_dlz is stored
  in an application partition in our directory.  The replication of
  this partition is not yet reliable.

- Replication may fail on FreeBSD due to getaddrinfo() rejecting names
  containing _.  A workaround will be in a future release.

- samba_upgradeprovision should not be run when upgrading to this release
  from a recent release.  No important database format changes have
  been made since alpha16.

- Installation on systems without a system iconv (and developer
  headers at compile time) is known to cause errors when dealing with
  non-ASCII characters.

- Domain member support in the 'samba' binary is in its infancy, and
  is not comparable to the support found in winbindd.  As such, do not
  use the 'samba' binary (provided for the AD server) on a member
  server.

- There is no NetBIOS browsing support (network neighbourhood)
  available for the AD domain controller.  (Support in nmbd and smbd
  for classic domains and member/standalone servers is unchanged).

- Clock Synchronisation is critical.  Many 'wrong password' errors are
  actually due to Kerberos objecting to a clock skew between client
  and server.  (The NTP work in the previous alphas are partly to assist
  with this problem).

- The DRS replication code may fail.  Please contact the team if you
  experience issues with DRS replication, as we have fixed many issues
  here in response to feedback from our production users.

- Linux inotify will now only be supported on systems where glibc also supports
  it (for details, please refer to bug #8850).


Upgrading
=========

Users upgrading from Samba 3.x domain controllers and wanting to use
Samba 4.0 as an AD DC should use the 'samba-tool domain
classicupgrade' command.  See the wiki for more details:
https://wiki.samba.org/index.php/Samba4/samba3upgrade/HOWTO.

Users upgrading from Samba 4.0 alpha and beta releases since alpha15
should run 'samba-tool dbcheck --cross-ncs --fix' before re-starting
Samba.  Users upgrading from earlier alpha releases should contact the
team for advice.

Users upgrading an AD DC from any previous release should run
'samba-tool ntacl sysvolreset' to re-sync ACLs on the sysvol share
with those matching the GPOs in LDAP and the defaults from an initial
provision.  This will set an underlying POSIX ACL if required (eg not
using the NTVFS file server).

If you used the BIND9_FLATFILE or BIND9_DLZ features,
you'll have to add '-dns' to the 'server services' option,
as the internal dns server (SAMBA_INTERNAL) is the default now.


Supported features
==================

A whitepaper of currently (un-)supported features is available on the wiki:

  https://wiki.samba.org/index.php/Samba_4.0_Whitepaper


######################################################################
Changes
#######

smb.conf changes
----------------

   Parameter Name			Description
   --------------			-----------

   acl compatibility			Removed
   allow dns updates			New
   announce as				Removed
   announce version			Removed
   cldap port				New
   client max protocol			New
   client min protocol			New
   client signing			Changed default
   dcerpc endpoint servers		New
   dgram port				New
   directory security mask		Removed
   display charset			Removed
   dns forwarder			New
   dns update command			New
   force security mode			Removed
   force directory security mode	Removed
   homedir map				Changed default
   kernel oplocks			Changed default
   kernel share modes			New
   kpasswd port				New
   krb5 port				New
   nbt client socket address		New
   nbt port				New
   nsupdate command			New
   ntp signd socket directory		New
   ntvfs handler			New
   paranoid server security		Removed
   pid directory			New
   printer admin			Removed
   rndc command 			New
   rpc big endian			New
   samba kcc command			New
   security mask			Removed
   send spnego principal		Removed
   server max protocol			New
   server min protocol			New
   server role				New
   server services			New
   server signing			Changed default
   share backend			New
   share modes				Removed
   smb2 max read			Changed default
   smb2 max write			Changed default
   smb2 max trans			Changed default
   socket address			Removed
   spn update command			New
   time offset				Removed
   tls cafile				New
   tls certfile				New
   tls crlfile				New
   tls dh params file			New
   tls enabled				New
   tls keyfile				New
   unicode				New
   web port				New
   winbindd privileged socket directory	New
   winbind sealed pipes			New
   winbindd socket directory		New


CHANGES SINCE 4.0.0rc6
======================

o   Michael Adam <obnox at samba.org>
    * BUG 9414: Honor password complexity settings.
    * BUG 9456: developer-build: Fix panic when acl_xattr fails with access
      denied.
    * BUG 9457: Fix "map username script" with "security=ads" and Winbind.


o   Jeremy Allison <jra at samba.org>
    * BUG 9462: Users can not be given write permissions any more by default.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 9415: Install SWAT *.msg files with waf.


o   Alexander Bokovoy <ab at samba.org>
    * BUG 9479: Support FIPS mode when building Samba.


o   G?nther Deschner <gd at samba.org>
    * BUG 9438: Fix netr_ServerPasswordSet2, netr_LogonSamLogon with netlogon
      AES.


o   Tsukasa Hamano <hamano at osstech.co.jp>
    * BUG 9471: Fix SEGV when using second vfs module.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 9414: Honor password complexity settings.
    * BUG 9470: Fix MMC crashes.
    * BUG 9481: Fix ACL on "cn=partitions,cn=configuration".


o   Andreas Schneider <asn at samba.org>
    * BUG 9459: Install manpages only if we install the target.


o   Richard Sharpe <realrichardsharpe at gmail.com>
    * BUG 9460: Respond correctly to FILE_STREAM_INFO requests.


CHANGES SINCE 4.0.0rc5
======================

In this release candidate, we have a significant number of improvements
to our Access Control List (ACL) code, particularly for the Active
Directory Domain Controller, but also in our general purpose file
server.

These changes are important, as they enable Group Policy Objects to work
correctly, allow administrators to impose restrictions on some users
reading certain parts of the directory and correctly propagating
inherited ACLs down the LDAP directory tree.

Users of the Active Directory Domain Controller upgrading from any
previous release should run 'samba-tool ntacl sysvolreset' to re-sync
ACLs on the sysvol share with those matching the GPOs in LDAP and the
defaults from an initial provision.  This will set an underlying POSIX
ACL if required.

The ACLs in the Active Directory are also checked on searches by default.
The automatic inheritance of ACLs is also correctly recalculated on
changes now.

o   Michael Adam <obnox at samba.org>
    * BUG 9350: Fail "configure --with-ads" if ads support is not available.
    * BUG 9446: Id mapping code delivers inconsistent results.
    * BUG 9453: Fix building pdb_ldap as shared module.


o   Jeremy Allison <jra at samba.org>
    * BUG 9236: ACL masks incorrectly applied when setting ACLs.
    * BUG 9374: Allow smb2.acls torture test to pass against smbd with a POSIX
      ACLs backend.


o   Christian Ambach <ambi at samba.org>
    * BUG 9178: Add DMAPI configure option and checks.
    * BUG 9274: Document shadow:snapdirseverywhere option of vfs_shadow_copy2.
    * BUG 9339: Backport build fixes from master.
    * BUG 9411: aio read marks the file as modified.
    * BUG 9413: Fix waf build on AIX6.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 9121: Provide and use setproctitle replacement function for samba4
      processes on linux.
    * BUG 9271: samba-tool: Rework ldap attribute fetch in classicupgrade for
      missing attributes.
    * BUG 9421: Fix several build issues.
    * BUG 9448: Backport several crash bugs from master.


o   Sumit Bose <sbose at redhat.com>
    * BUG 9367: Use work around for 'winbind use default domain' only if it
      is set.


o   Kai Blin <kai at samba.org>
    * BUG 9399 - 'samba-tool dns serverinfo localhost' returns 'Memory
      allocation error'.
    * BUG 9449: Remove unused samba-dig tool.


o   G?nther Deschner <gd at samba.org>
    * BUG 9426: rpc_client: lookup nametype 0x20 in rpc_pipe_open_tcp_port().
    * BUG 9439: Fix ncacn_ip_tcp reconnection code for lsa lookups.
    * BUG 9451: Allow to force DNS updates using net.


o   David Disseldorp <ddiss at samba.org>
    * BUG 9433: spoolss: Fix segfault when "default devmode" is disabled.


o   Amitay Isaacs <amitay at gmail.com>
    * BUG 9265: Bind dlz fails to start if there is a trustedanchors zone.
    * BUG 9354: Fix format string vulnerability in an error message.


o   Volker Lendecke <vl at samba.org>
    * BUG 9422: Large read requests cause server to issue malformed reply.
    * BUG 9440: Do not rely on dbwrap_record_get_value to return a talloc
      object.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 8620: Read ACL are not enabled by default on DS.
    * BUG 8621: ACL are not recalculated if parent is changed and inherit is
      enabled.
    * BUG 9373: samba-tool: Report a CommandError if loading of the config file
      fails.
    * BUG 9385: Add missing newline in the output of ldb_ldif_write_trace().
    * BUG 9390: Fix segfaults in "log level = 10" on Solaris.
    * BUG 9402: lib/addns: Fix working with a bind9 server.
    * BUG 9406: ACL fixes since 4.0 rc1.
    * BUG 9447: Backport tests from master.
    * BUG 9448: Backport several crash bugs from master.


o   Ricky Nance <ricky.nance at weaubleau.k12.mo.us>
    * BUG 9449: Remove phpldapadmin inclusion.


o   Matthieu Patou <mat at matws.net>
    * BUG 9418: Fix MD5 detection in the autoconf build.


o   Arvid Requate <requate at univention.de>
    * BUG 9376: Fix typo in got_duplicate_group check.
    * BUG 9392: Fix 'samba-tool fsmo --role=schema'.


o   Andreas Schneider <asn at samba.org>
    * BUG 9386: Failover if netlogon pipe is not available.
    * BUG 9436: Fix leaking sockets of SMB connections to a DC.


o   Karolin Seeger <kseeger at samba.org>
    * BUG 9425: Do not build ntdb by default.
    * BUG 9437: Warnings when building manpages with waf.
    * BUG 9443: Manpages of the libraries are located in different
      subdirectories.
    * BUG 9444: Merge both samba.8 manpages.
    * BUG 9445: Update man 7 samba.


o   Jelmer Vernooij <jelmer at samba.org>
    * BUG 9339: Backport build fixes from master.


CHANGES SINCE 4.0.0rc4
======================

With this release candidate the location of the socket samba accepts
connections from NTPd has changed, as has the enforced permissions.

This means the ntp.conf will need to change from (eg)

ntpsigndsocket /usr/local/samba/var/run/ntp_signd/

to

ntpsigndsocket /usr/local/samba/var/lib/ntp_signd/

To use the socket with ntp on a system with an ntp user and group, you must
run:

chgrp ntp /usr/local/samba/var/lib/ntp_signd/

o   Michael Adam <obnox at samba.org>
    * BUG 9321: winbindd:cache: Fix offline logons with cached credentials.
    * BUG 9339: Build and quota fixes.
    * BUG 9353: Fix the cluster(ctdb) build without system talloc installed.


o   Christian Ambach <ambi at samba.org>
    * BUG 9208: Cannot migrate files with inheritance flags to share on top of
      NFSv4 filesystem.
    * BUG 9361: Quotas management doesn't work with SMB2/3.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 9317: Cannot easily change to internal DNS server.
    * BUG 9338: lib/replace: Return size of xattr if size argument is 0.
    * BUG 9339: Build and quota fixes.
    * BUG 9340: Do not use the wheel group for 'administrators'.
    * BUG 9347: winbind: Extend wbcAuthenticateUserEx to provide PAC.
    * BUG 9352: Fix samba crashes with certain RPC calls.
    * BUG 9355: Set mask values to 0777 and use fileserver.conf.
    * BUG 9357: Don't expose more symbols than specified by abi_match setting.
    * BUG 9379: ntp_signd permissions are too broad.


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 9300: vfs_streams_depot: Add delete_lost option.
    * BUG 9348: Fix the build against older ctdb versions.
    * BUG 9345: fix use of <smbconfoption> tag.
    * BUG 9349: Fix check for ctdb_private.h
    * BUG 9351: Fail "configure --with-cluster-support" if ctdb support is not
      available.


o   Ira Cooper <ira at samba.org>
    * BUG 9339: Build and quota fixes.


o   G?nther Deschner <gd at samba.org>
    * BUG 9272: 'net ads join' does not provide AES keys in host keytab.


o   David Disseldorp <ddiss at samba.org>
    * BUG 9125: Revert "s3-winbindd: make sure we obey the -n switch
      also for samlogon cache access" and describe samlogon cache caveat for
      'winbindd -n'.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 7472: Check for dn_expand also in libinet.
    * BUG 9339: Build and quota fixes.


o   Volker Lendecke <vl at samba.org>
    * BUG 9208: Cannot migrate files with inheritance flags to share on top of
      NFSv4 filesystem.
    * BUG 9352: dsdb: Simplify DsCrackNameOneFilter a bit.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 8620: Read ACL are not enabled by default on DS.
    * BUG 9175: Add smbXcli_session_set_disconnect_expired().
    * BUG 9341: Fix SMBD_SMB2_NUM_IOV_PER_REQ check for sendfile().
    * BUG 9359: Optimization needed for SMB2 performance sensitive workloads.
    * BUG 9360: SMB1 tree connect time is wrong.


o   Ricky Nance <ricky.nance at weaubleau.k12.mo.us>
    * BUG 9339: Build and quota fixes.


o   Rusty Russell <rusty at rustcorp.com.au>
    * BUG 9339: Build and quota fixes.


o   Christof Schmitt <christof.schmitt at us.ibm.com>
    * BUG 9347: winbind: Extend wbcAuthenticateUserEx to provide PAC.


o   Andreas Schneider <asn at samba.org>
    * BUG 9326: Fix 'net ads join' message for the dns domain.
    * BUG 9336: Add NetworkManager dispatcher script for Winbind.
    * BUG 9339: Build and quota fixes.


o   Jelmer Vernooij <jelmer at samba.org>
    * BUG 9357: Don't expose more symbols than specified by abi_match setting.


CHANGES SINCE 4.0.0rc3
======================

o   Michael Adam <obnox at samba.org>
    * BUG 9304: Remove unused sessionid.tdb and connections.tdb related code.
    * BUG 9319: validate stat(2) information before reconnect durable handles.


o   Jeremy Allison <jra at samba.org>
    * BUG 9190: Fix regression (change in behavior) of default acl masks.
      Remove "security mask", "force security mode", "directory security mask"
      "force directory" and "security mode" parameters.
    * BUG 9329: Directory listing with SeBackup can crash smbd.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 9295: Assert that auth_domain, auth_builtin, auth_sam, auth_winbind
      are builtin.
    * BUG 9322: Backport ldb version update.


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 9190: docs: Fix opening and ending tag mismatch: para.


o   Gregor Beck <gbeck at sernet.de>
    * BUG 9304: Remove unused sessionid.tdb and connections.tdb related code.


o   David Disseldorp <ddiss at suse.de>
    * BUG 8564: Fix segfault in pam_sm_authenticate().


o   Stefan Metzmacher <metze at samba.org>
    * BUG 9184: Fix loop in tdgram_bsd_recvfrom().
    * BUG 9209: Fix unitialized padding in smb2_create_blob_push_one().
    * BUG 9304: Remove unused sessionid.tdb and connections.tdb related code.
    * BUG 9309: Avoid a level 0 DEBUG if tstream_npa_connect_recv fails.
    * BUG 9318: Fix write time updates for durable handles.


o   Andreas Schneider <asn at samba.org>
    * BUG 9295: Build standard auth modules as internal modules.
    * BUG 9301: Move 'smbprint' to a common location.


o   Jelmer Vernooij <jelmer at samba.org>
    * BUG 9274: Add documentation and selftest fixes.


CHANGES SINCE 4.0.0rc2
======================

o   Jeremy Allison <jra at samba.org>
    * BUG 8966: Fix 'net rpc share allowedusers' to work with 2008r2.
    * BUG 9209: Parse of invalid SMB2 create blob can cause smbd crash.
    * BUG 9214: Bad user supplied SMB2 credit value can cause smbd to call
      smb_panic.
    * BUG 9222: Document that signing cannot be disabled for SMB2 by design.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 9235: Update Samba3-HOWTO Collection.
    * BUG 9271: samba-tool: Skip chown in sysvolreset when it would fail on
      a GID.
    * BUG 9274: Update Samba3-HOWTO Collection.


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 9235: Fix opening and ending tag mismatch in Samba3-HOWTO.
    * BUG 9271: Fix typos in samba_backup.
    * BUG 9274: Add delete_lost option to vfs_streams_depot.8.


o   Kai Blin <kai at samba.org>
    * BUG 9225: Fix return code for deleted DNS records.
    * BUG 8878: Time out UDP requests after DNS_REQUEST_TIMEOUT seconds.


o   G?nther Deschner <gd at samba.org>
    * BUG 9177: pam_winbind: Match more return codes when wbcGetPwnam has
    failed.


o   David Disseldorp <ddiss at samba.org>
    * BUG 9269: Fix 64bit-portability-issue.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 5670: Apply some Solaris packaging fixes.
    * BUG 8107: Fix poll replacement to become a msleep replacement.
    * BUG 8344: Fix --with(out)-sendfile-support option handling.


o   Volker Lendecke <vl at samba.org>
    * BUG 9223: Fix uninitialized variable in the cldap server.
    * BUG 9268: Make tdb robust against improper CLEAR_IF_FIRST restart.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 9271: Several samba-tool fixes.
    * BUG 9196: Don't take 'state->te' as indication for "was_deferred".


o   Matthieu Patou <mat at matws.net>
    * BUG 9240: Remove unused variable in DNS server.
    * BUG 9252: Preliminary tests for dcpromo in Windows 2012 fails with
      Samba DC.
    * BUG 9253: Crackname returns a dns domain name even if there is no cracked
      SID.
    * BUG 9255: Getncchanges with exop for repl_obj returns highest_usn.
    * BUG 9256: Getncchanges with exop for repl_obj_with_secrets should always
      be allowed for RWDC.
    * BUG 9257: LDAP server has at least one un-initialized variable.
    * BUG 9258: LDAP server ignore configuration values set in the database for
      timeout.
    * BUG 9259: rodc join fails complaining that it can't find a RWDC.
    * BUG 9260: kccdrs_replica_get_info returns invalid level when non
      supported should be returned.
    * BUG 9261: ds_replica_sync fails when specifying a name and not a guid.
    * BUG 9264: getncchanges returns invalid_parameters when it should return
      bad_nc.
    * BUG 9254: DsExecuteKCC returns wrong error code if taskid != 0.
    * BUG 9265: Bind dlz fails to start if there is a trustedanchors zone.


o   Rusty Russell <rusty at rustcorp.com.au>
    * BUG 9268: Make tdb robust against shrinking tdbs.


o   Andreas Schneider <asn at samba.org>
    * BUG 8769: Fix RAW printing for normal users.
    * BUG 9112: Increase debug level for info that the db is empty.
    * BUG 9244: Build pam_smbpass module only if enabled.
    * BUG 9245: Make sure the registry is set up before we init printing.
    * BUG 9276: Add config for systemd-tmpfiles.
    * BUG 9280: Add support for reloading systemd services.


o   Karolin Seeger <kseeger at samba.org>
    * BUG 7826: Remove link to Using Samba.
    * BUG 8802: Add basic manpages for 'samba' and 'samba-tool'.
    * BUG 9165: Fix makerpms.sh on RHEL.
    * BUG 9243: Remove duplicate synonym min protocol.
    * BUG 9271: Several samba-tool fixes.


o   Jelmer Vernooij <jelmer at samba.org>
    * BUG 9243: Add basic documentation for 'server min protocol'.
    * BUG 9271: Several samba-tool fixes.
    * BUG 9274: Add documentation for several parameters.


o   Matthias Dieter Walln?fer <mdw at samba.org>
    * BUG 9183: Introduce the wildcard binding feature to allow DNS to listen on
      localhost.


CHANGES SINCE 4.0.0rc1
======================

o   Michael Adam <obnox at samba.org>
    * BUG 9173: Make the SMB2 compound request create/delete_on_close/
      close work as Windows.


o   Jeremy Allison <jra at samba.org>
    * BUG 9161: Re-add the vfs_Chdir() cache.
    * BUG 9189: SMB2 Create doesn't return correct MAX ACCESS access mask in
      blob.
    * BUG 9213: Bad ASN.1 NegTokenInit packet can cause invalid free.


o   Christian Ambach <ambi at samba.org>
    * BUG 9162: Fix the build of the GPFS VFS module.
    * BUG 9197: Only do 'printing_subsystem_update' when printing is enabled.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 9228: Fix build on systems without ldap development headers.


o   Alexander Bokovoy <ab at samba.org>
    * BUG 9157: Cleanup idmap_ldap build dependencies.
    * BUG 9228: Make smbldaphelper subsystem an internal library.
    * BUG 9229: Fix build of winbindd- and krb5 locator-related manpages.


o   Sumit Bose <sbose at redhat.com>
    * BUG 9185: Allow DNS resolution of trusted domains if DNS name is
      available.


o   Ira Cooper <ira at samba.org>
    * BUG 9162: Fix build on Illumos/Solaris using '--with-acl'.
    * BUG 9173: Compound requests should continue processing.


o   G?nther Deschner <gd at samba.org>
    * BUG 9185: Winbind cannot resolve AD DC in a different subnet.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 9162: Fix the build of the ACL VFS modules.
    * BUG 9172: Fix reporting of gfs2 quotas.


o   Volker Lendecke <vl at samba.org>
    * BUG 9217: CreateFile with FILE_DIRECTORY_FILE can create directories
      on read-only shares.


o   Vladimir Marek <Vladimir.Marek at Oracle.COM>
    * BUG 9192: Fix service control for non-internal services.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 9173: Make the SMB2 compound request create/delete_on_close/
      close work as Windows.
    * BUG 9184: Fix receiving of UDP packets from 0 bytes.
    * BUG 9191: Release the share mode lock before calling exit_server().
    * BUG 9193: Fix usage of invalid memory in smb2_signing_check_pdu().
    * BUG 9194: Disallow '--prefix=/usr' and '--prefix=/usr/local' without
      '--enable-fhs'.
    * BUG 9198: Fix RHEL-CTDB packaging.


o   Matthieu Patou <mat at matws.net>
    * BUG 9199: Fix usage of "panic action".
    * BUG 9233: Fix a non handled memory out of memory.


o   Andreas Schneider <asn at samba.org>
    * BUG 8632: Fix builtin forms order to match Windows again.
    * BUG 9159: Fix generating idmap manpages.
    * BUG 9218: Don't segfault if user specified ports out for range.
    * BUG 9231: Fix NT_STATUS_IO_TIMEOUT during slow import of printers into
      registry.


#######################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 4.0 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================

================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/stable/

The release notes are available online at:

	http://www.samba.org/samba/history/samba-4.0.0.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team

From kseeger at samba.org  Mon Dec 17 01:53:19 2012
From: kseeger at samba.org (Karolin Seeger)
Date: Mon, 17 Dec 2012 09:53:19 +0100
Subject: [Announce] Samba 3.5.20 Available for Download
Message-ID: <E1TkWRr-007tmf-Gy@intern.SerNet.DE>

Please not that this will probably be the last bugfix release of the Samba
3.5 release series. Details about the release planning are available on

  http://wiki.samba.org/index.php/Samba_Release_Planning

==================================================================
			"We keep moving forward,
			 opening new doors, and doing new things,
			 because we're curious and curiosity keeps
			 leading us down new paths.

			 Walt Disney

==================================================================


Release Announcements
=====================

This is the latest stable release of Samba 3.5.

Major enhancements in Samba 3.5.20 include:

o  Fix segfaults in log level = 10 on Solaris (bug #9390).
o  Apply ACL masks correctly when setting ACLs (bug #9236).


Changes since 3.5.19:
---------------------

o   Jeremy Allison <jra at samba.org>
    * BUG 7781: Samba transforms ShareName to lowercase (sharename) when adding
      new share via MMC.
    * BUG 9236: Apply ACL masks correctly when setting ACLs.
    * BUG 9455: munmap called for an address location not mapped by Samba.


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 9345: Fix usage of <smbconfoption> tag.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 9390: Fix segfaults in log level = 10 on Solaris.
    * BUG 9402: Fix dns updates against BIND9 (used in a Samba4 domain).


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 3.5 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/stable

The release notes are available online at:

        http://www.samba.org/samba/history/samba-3.5.20.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team




