From kseeger at samba.org  Sat Jan 22 04:05:21 2011
From: kseeger at samba.org (Karolin Seeger)
Date: Sat, 22 Jan 2011 12:05:21 +0100
Subject: [Announce] Samba 3.4.10 Available for Download
Message-ID: <E1PgbHV-00EtTI-IZ@intern.SerNet.DE>

==================================================================
				"Each day provides its own gifts."

				Marcus Aurelius
==================================================================


Release Announcements
=====================

This is the latest stable release of Samba 3.4.

Major enhancements in Samba 3.4.10 include:

   o Fix smbd coredump (bug #7617).
   o Fix Winbind internal error (bug #7636).
   o Fix flaky Winbind against w2k8 (bug #7881).


Changes since 3.4.9
-------------------

o   Michael Adam <obnox at samba.org>
    * BUG 7507: init_sam_from_ldap stores group in sid2uid cache.


o   Jeremy Allison <jra at samba.org>
    * BUG 7577: Fix SPNEGO auth when contacting Win7 system using Microsoft Live
      Sign-in Assistant.
    * BUG 7590: Fix offline login in Winbind.
    * BUG 7617: Fix smbd coredump.
    * BUG 7636: Fix Winbind internal error.
    * BUG 7892: Fix stale lock in open_file_fchmod().


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 7356: Fix 'net ads dns register' in Win 2008 R2 domains.


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 7875: Fix 'nmbd --port'.
    * BUG 7880: Make 'rpcclient deldriver' delete drivers for all architectures.


o   G?nther Deschner <gd at samba.org>
    * BUG 7341: Fix Winbind over IPv6.
    * BUG 7417: Fix 'net rpc user password' command.
    * BUG 7418: Fix 'net rpc printer list' command.
    * BUG 7500: Fix 'not a string literal' warning in netdomjoin-gui.
    * BUG 7541: Fix smbd crash caused by "%D" in "printer admin" option.
    * BUG 7568: Make sure cm_connect_lsa_tcp does not reset the secure channel.


o   Olaf Flebbe <o.flebbe at science-computing.de>
    * BUG 7421: Fix build on AIX 6.1.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 7821: Set Tru64 cc's PIC switch right.


o   Volker Lendecke <vl at samba.org>
    * BUG 7066: Fix "Your Password expires today" message for users from trusted
      domains.
    * BUG 7262: Fix EnumDomainAliases when no aliases are in LDAP.
    * BUG 7336: Enable idmap_passdb module build as shared.
    * BUG 7715: Stop using the write cache after an oplock break: Stop using the
      write cache after an oplock break.
    * BUG 7800: Make winbind recover from a signing error.
    * BUG 7881: Fix flaky Winbind against w2k8.


o   Jim McDonough <jmcd at samba.org>
    * BUG 7280: Fix loading of auto printers with registry config.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 7607: Fix buffer over-read in pidl generated client code.
    * BUG 7896: Fix 'net rpc user rename'.


o   Andreas Schneider <asn at samba.org>
    * BUG 7423: Add EN ISO 216, A0 and A1 to builtin forms.
    * BUG 7538: Backport fixes for GUID_from_data_blob.


o   Andrew Tridgell <tridge at samba.org>
    * BUG 7538: Backport fixes for GUID_from_data_blob.


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/stable

The release notes are available online at:

        http://www.samba.org/samba/history/samba-3.4.10.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team




From kseeger at samba.org  Sun Jan 23 13:11:18 2011
From: kseeger at samba.org (Karolin Seeger)
Date: Sun, 23 Jan 2011 21:11:18 +0100
Subject: [Announce] Samba 3.4.11 Available for Download
Message-ID: <E1Ph6HO-00GFFC-OM@intern.SerNet.DE>

==================================================================
			"Storms make trees take deeper roots."

			 Dolly Parton
==================================================================


Release Announcements
=====================

This is the latest stable release of Samba 3.4. It addresses the following
issue introduced with Samba 3.4.10:

   o Fix connecting to port-139 only servers (bug 7881).


Changes since 3.4.10
--------------------

o   Volker Lendecke <vl at samba.org>
    * BUG 7881: Fix connecting to port-139 only servers.


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/stable

The release notes are available online at:

        http://www.samba.org/samba/history/samba-3.4.11.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team




From kseeger at samba.org  Mon Feb 28 06:35:38 2011
From: kseeger at samba.org (Karolin Seeger)
Date: Mon, 28 Feb 2011 14:35:38 +0100
Subject: [Announce] Samba 3.5.7, 3.4.12 and 3.3.15 Security Releases Available
Message-ID: <E1Pu3GF-00GD5F-Gl@intern.SerNet.DE>

Release Announcements
=====================

Samba 3.5.7, 3.4.12 and 3.3.15 are security releases in order to
address CVE-2011-0719.


o  CVE-2011-0719:
   All current released versions of Samba are vulnerable to
   a denial of service caused by memory corruption. Range
   checks on file descriptors being used in the FD_SET macro
   were not present allowing stack corruption. This can cause
   the Samba code to crash or to loop attempting to select
   on a bad file descriptor set.

   A connection to a file share, or a local account is needed
   to exploit this problem, either authenticated or unauthenticated
   (guest connection).

   Currently we do not believe this flaw is exploitable
   beyond a crash or causing the code to loop, but on the
   advice of our security reviewers we are releasing fixes
   in case an exploit is discovered at a later date.


Changes
-------


o   Jeremy Allison <jra at samba.org>
    * BUG 7949: Fix DoS in Winbind and smbd with many file descriptors open.


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba corresponding product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/

The release notes are available online at:

        http://www.samba.org/samba/ftp/history/samba-3.5.7.html
        http://www.samba.org/samba/ftp/history/samba-3.4.12.html
        http://www.samba.org/samba/ftp/history/samba-3.3.15.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team


From jra at samba.org  Mon Feb 28 09:36:47 2011
From: jra at samba.org (Jeremy Allison)
Date: Mon, 28 Feb 2011 08:36:47 -0800
Subject: [Samba] [Announce] Samba 3.5.7, 3.4.12 and 3.3.15 Security
	Releases Available
In-Reply-To: <AANLkTinv0NFj4Ue__kVwHhS8E3-8X+4qGJMQ=8sU+PEk@mail.gmail.com>
References: <E1Pu3GF-00GD5F-Gl@intern.SerNet.DE>
	<AANLkTinv0NFj4Ue__kVwHhS8E3-8X+4qGJMQ=8sU+PEk@mail.gmail.com>
Message-ID: <20110228163647.GC4393@jeremy-laptop>

On Mon, Feb 28, 2011 at 10:15:23AM -0500, Chris Smith wrote:
> On Mon, Feb 28, 2011 at 8:35 AM, Karolin Seeger <kseeger at samba.org> wrote:
> > Samba 3.5.7, 3.4.12 and 3.3.15 are security releases in order to
> > address CVE-2011-0719.
> 
> Will there be a new 3.5.7 Jumbo Patch available for those using it
> with 3.5.6 and strict allocate? Or does the current 3.5.6 Jumbo Patch
> work fine with 3.5.7 (I'm assuming it's not included as there was no
> mention of any other fixes in the release notes)?

Both patches should work fine together. As per our policy, security
fix releases contain no other changes than the security bugfix.

Just take the 3.5.7 release and apply the jumbo patch on top of
it, as you did with 3.5.6.

A 3.5.8 will be released soon with all the pending patches we
were planning the next release before it got preempted by the
security fix.

Hope this helps,

Jeremy.

From kseeger at samba.org  Sun Mar  6 23:04:53 2011
From: kseeger at samba.org (Karolin Seeger)
Date: Mon, 7 Mar 2011 07:04:53 +0100
Subject: [Announce] Samba 3.5.8 Available for Download
Message-ID: <E1PwTYr-007V8W-Kv@intern.SerNet.DE>

===================================================================
			"Food is for eating, and good food is to be
			 enjoyed... I think food is, actually, very
			 beautiful in itself."

			 Delia Smith
==================================================================


Release Announcements
=====================


This is the latest stable release of Samba 3.5.

Major enhancements in Samba 3.5.8 include:

o  Fix Winbind crash bug when no DC is available (bug #7730).
o  Fix finding users on domain members (bug #7743).
o  Fix memory leaks in Winbind (bug #7879).
o  Fix printing with Windows 7 clients (bug #7567).


Changes since 3.5.7:
--------------------


o   Michael Adam <obnox at samba.org>
    * BUG 7594: Fix "log=>ndr_pull_error" in 'wbinfo -u' and 'wbinfo -g'.
    * BUG 7871: Fix 'net ads dns register' in cluster setups.
    * BUG 7894: Fix sporadic Winbind panic in rpc query_user_list.


o   Jeremy Allison <jra at samba.org>
    * BUG 7409: Raise debug level for "reduce_name: couldn't get realpath"
      messages.
    * BUG 7716: Store unmodified copies of security descriptors in acl_xattr and
      acl_tdb modules.
    * BUG 7733: Fix incorrect unix mode_t caused by invalid client DOS
      attributes on create.
    * BUG 7734: Apply appropriate create masks when creating files with "inherit
      ACLs" set to true.
    * BUG 7743: Fix finding users on domain members.
    * BUG 7744: Fix "dfree cache time" parameter.
    * BUG 7777: Fix requesting lookups for BUILTIN sids.
    * BUG 7785: Fix atime limit.
    * BUG 7791: Fix copying files from a SMB share using Gnome vfs and SMB
      signing.
    * BUG 7812: ACL inheritance cannot be disabled in vfs_acl_xattr/vfs_acl_tdb.
    * BUG 7835: vfs_fill_sparse() doesn't use posix_fallocate when strict
      allocate is on.
    * BUG 7843: Expand the local SAMs aliases.
    * BUG 7892: Fix stale lock in open_file_fchmod().
    * BUG 7950: Revalidate the pathname once re-constructed from a root fsp.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 7356: Fix 'net ads dns register' in Windows 2008 R2 domains.


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 7875: Fix 'nmbd --port'.
    * BUG 7880: Make 'rpcclient deldriver' delete drivers for all architectures.


o   G?nther Deschner <gd at samba.org>
    * BUG 7567: Fix printing with Windows 7 clients.
    * BUG 7641: Handle Windows 9x adddriver calls without config file.
    * BUG 7945: Let Winbind try to use samlogon validation level 6.


o   Holger Hetterich <hhetter at novell.com>
    * BUG 3185: Fix 'testparm' return code when EOF in encountered in param
      name.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 7821: Fix build of shared libraries on Tru64.


o   Volker Lendecke <vl at samba.org>
    * BUG 7066: Fix "Your Password expires today" message for users of trusted
      domains.
    * BUG 7262: Fix maintaining of users' groups via UsrMgr.
    * BUG 7656: Fix scalability problem with hundreds of printers.
    * BUG 7665: Fix memory leak in the netapi routines.
    * BUG 7730: Fix Winbind crash bug when no DC is available.
    * BUG 7774: Fix a getgrent crash with many groups.
    * BUG 7779: Fix smbd crash caused by expand_msdfs.
    * BUG 7800: Make Winbind recover from a signing error.
    * BUG 7817: Fix "force group" with ntlmssp guest session setup.
    * BUG 7841: Make WINBINDD_LOOKUPRIDS asking the right domain.
    * BUG 7842: Make WINBINDD_LOOKUPRIDS returning the domain name.
    * BUG 7855: ntlm_auth: Support clients which offer a spnego mechs we don't
      support.
    * BUG 7879: Fix memory leaks in Winbind.
    * BUG 7881: Fix flaky Winbind against Windows 2008.
    * BUG 7917: Fix connections from WinCE.
    * BUG 7940: Fix opening MS Powerpoint files.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 7567: Fix printing with Windows 7 clients.
    * BUG 7855: ntlm_auth: Support clients which offer a spnego mechs we don't
      support.
    * BUG 7883: Fix SMB session setups with Kerberos against some closed source
      SMB servers.
    * BUG 7896: Don't set SAMR_FIELD_FULL_NAME if we just want to set the
      account name.
    * BUG 7899: Don't return "-1" on success in 'net rpc vampire keytab'.
    * BUG 7942: Fix endless loops caused by inotify.
    * BUG 7944: Catch lookup_names/sids schannel errors over ncacn_ip_tcp.


o   Jonathan Nieder <jrnieder at gmail.com>
    * BUG 6837:  Make "rlimit_max below minimum Windows limit" notification less
      scary.


o   olivier <olivier at virtscano.fakenet>
    * BUG 7789: vfs_scannedonly: Switch from mtime to ctime which is more reliable.


o   Rusty Russell <rusty at rustcorp.com.au>
    * BUG 7498: Fix updating the time on close in vfs_gpfs.

######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 3.5 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/stable

The release notes are available online at:

        http://www.samba.org/samba/history/samba-3.5.8.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team




From kseeger at samba.org  Tue Apr 12 12:01:44 2011
From: kseeger at samba.org (Karolin Seeger)
Date: Tue, 12 Apr 2011 20:01:44 +0200
Subject: [Announce] Samba 3.6.0pre2 Preview Release Available for Download
Message-ID: <E1Q9huK-00APWL-Ba@intern.SerNet.DE>

Release Announcements
---------------------

This is the second preview release of Samba 3.6.0.  This is *not*
intended for production environments and is designed for testing
purposes only.  Please report any defects via the Samba bug reporting
system at https://bugzilla.samba.org/.


Major enhancements in Samba 3.6.0 include:


Changed security defaults
-------------------------

Samba 3.6 has adopted a number of improved security defaults that will
impact on existing users of Samba.

 client ntlmv2 auth = yes
 client use spnego principal = no
 send spnego principal = no

The impact of 'client ntlmv2 auth = yes' is that by default we will not
use NTLM authentication as a client.  This applies to the Samba client
tools such as smbclient and winbind, but does not change the separately
released in-kernel CIFS client.  To re-enable the poorer NTLM encryption
set '--option=clientusentlmv2auth=no' on your smbclient command line, or
set 'client ntlmv2 auth = no' in your smb.conf

The impact of 'client use spnego principal = no' is that we may be able
to use Kerberos to communicate with a server less often in smbclient,
winbind and other Samba client tools.  We may fall back to NTLMSSP in
more situations where we would previously rely on the insecure
indication from the 'NegProt' CIFS packet.  This mostly occursed when
connecting to a name alias not recorded as a servicePrincipalName for
the server.  This indication is not available from Windows 2008 or later
in any case, and is not used by modern Windows clients, so this makes
Samba's behaviour consistent with other clients and against all servers.

The impact of 'send spnego principal = no' is to match Windows 2008 and
not to send this principal, making existing clients give more consistent
behaviour (more likely to fall back to NTLMSSP) between Samba and
Windows 2008, and between Windows versions that did and no longer use
this insecure hint.


SMB2 support
------------

SMB2 support in 3.6.0 is fully functional (with one omission),
and can be enabled by setting:

max protocol = SMB2

in the [global] section of your smb.conf and re-starting
Samba. All features should work over SMB2 except the modification
of user quotas using the Windows quota management tools.

As this is the first release containing what we consider
to be a fully featured SMB2 protocol, we are not enabling
this by default, but encourage users to enable SMB2 and
test it. Once we have enough confirmation from Samba
users and OEMs that SMB2 support is stable in wide user
testing we will enable SMB2 by default in a future Samba
release.


Internal Winbind passdb changes
-------------------------------

Winbind has been changed to use the internal samr and lsa rpc pipe to get
local user and group information instead of calling passdb functions. The
reason is to use more of our infrastructure and test this infrastructure by
using it. With this approach more code in Winbind is shared.


New Spoolss code
----------------

The spoolss and the old RAP printing code have been completely
overhauled and refactored.

All calls from lanman/printing code has been changed to go through the
spoolss RPC interfaces, this allows us to keep all checks in one place
and avoid special cases in the main printing code.
Printing code has been therefore confined within the spoolss code.

All the printing code, including the spoolss RPC interfaces has been
changed to use the winreg RPC interfaces to store all data.
All data has been migrated from custom, arbitrary TDB files to the
registry interface. This transition allow us to present correct data to
windows client accessing the server registry through the winreg RPC
interfaces to query for printer data. Data is served out from a real
registry implementation and therefore arguably 100% forward compatible.

Migration code from the previous TDB files formats is provided. This
code is automatically invoked the first time the new code is run on the
server. Although manual migration is also available using the 'net
printer migrate' command.

These changes not only make all the spoolss code much more closer to
"the spec", it also greatly improves our internal testing of both
spoolss and winreg interfaces, and reduces overall code duplication.

As part of this work, new tests have been also added to increase
coverage.

This code will also allow, in future, an easy transition to split out
the spooling functions into a separate daemon for those OEMs that do not
need printing functionality in their appliances, reducing the code
footprint.


ID Mapping Changes
------------------

The id mapping configuration has been a source of much grief in the past.
For this release, id mapping has been rewritten yet again with the goal
of making the configuration more simple and more coherent while keeping
the needed flexibility and even adding to the flexibility in some respects.

The major change that implies the configuration simplifications is at
the heart of the id mapping system: The separation of the "idmap alloc
system" that is responsible for the unix id counters in the tdb, tdb2
and ldap idmap backends from the id mapping code itself has been removed.
The sids_to_unixids operation is now atomic and encapsulates (if needed)
the action of allocating a unix id for a mapping that is to be created.
Consequently all idmap alloc configuration parameters have vanished and
it is hence now also not possible any more to specify an idmap alloc
backend different from the idmap backend. Each idmap backend uses its
own idmap unixid creation mechanism transparently.

As a consequence of the id mapping changes, the methods that are used
for storing and deleting id mappings have been removed from the winbindd
API. The "net idmap dump/restore" commands have been rewritten to
not speak through winbindd any more but directly act on the databases.
This is currently available for the tdb and tdb2 backends, the implementation
for ldap still missing.

The allocate_id functionality is preserved for the unix id creator of the
default idmap configuration is also used as the source of unix ids
for the group mapping database and for the posix attributes in a
ldapsam:editposix setup.

As part of the changes, the default idmap configuration has been
changed to be more coherent with the per-domain configuration.
The parameters "idmap uid", "idmap gid" and "idmap range" are now
deprecated in favour of the systematic "idmap config * : range"
and "idmap config * : backend" parameters. The reason for this change
is that the old options only provided an incomplete and hence deceiving
backwards compatibility, which was a source of many problems with
upgrades. By introducing this change in configuration, it should be
brought to the conciousness of the users that even the simple
id mapping is not working exactly as in Samba 3.0 versions any more.


Endpoint Mapper
---------------

As Microsoft is more and more relying on endpoint mapper and we didn't have a
complete implementation we decided to create an instance for Samba. The
endpoint mapper is like a DNS server but for ports. If you want to talk to a
certain RPC service over TCP/IP, you just ask the endpoint mapper on which
port it is running. Then you can connect to the service and make sure that it
is running.
The code is deactivated by default, because it needs more testing and it
doesn't scale yet. We will work on these limitations and hopefully release it
with pre3. If you want to enable and test the endpoint mapper you can set
"rpc_server:epmapper = daemon" in the smb.conf file.


Internal restructuring
----------------------

Ongoing internal restructuring for better separation of internal subsystem to
achieve a faster build, smaller binaries and cleaner dependencies for the samba3
waf build.


SMB Traffic Analyzer
--------------------

Added the new SMB Traffic Analyzer (SMBTA) VFS module protocol 2
featuring encryption, multiple arguments, and easier parseability. A new
tool 'smbta-util' has been created to control the encryption behaviour
of SMBTA. For compatibility, SMBTA by default operates on version 1.
There are programs consuming the data that the module sends.

More information can be found on
http://holger123.wordpress.com/smb-traffic-analyzer/


NFS quota backend on Linux
--------------------------

A new nfs quota backend for Linux has been added that is based
on the existing Solaris/FreeBSD implementation. This allows samba
to communicate correct diskfree information for nfs imports that
are re-exported as samba shares.


######################################################################
Changes
#######

smb.conf changes
----------------

   Parameter Name                      Description     Default
   --------------                      -----------     -------

   async smb echo handler	       New	       No
   client ntlmv2 auth		       Changed Default Yes
   client use spnego principal	       New	       No
   ctdb locktime warn threshold	       New	       0
   idmap alloc backend		       Removed
   log writeable files on exit	       New	       No
   multicast dns register	       New	       Yes
   ncalrpc dir			       New
   send spnego principal	       New	       No
   smb2 max credits		       New	       128
   smb2 max read		       New	       1048576
   smb2 max trans		       New	       1048576
   smb2 max write		       New	       1048576
   strict allocate		       Changed Default Yes
   username map cache time	       New	       0
   winbind max clients		       New	       200


Commit Highlights
-----------------

o   Michael Adam <obnox at samba.org>
    * ID Mapping changes.


o   Jeremy Allison <jra at samba.org>
    * Implement SMB2 support.


o   Stefan Metzmacher <metze at samba.org>
    * Implement SMB2 support.


o   Andreas Schneider <asn at samba.org>
    * Add an Endpoint Mapper daemon.



Changes since 3.6.0pre1
-----------------------

o   Michael Adam <obnox at samba.org>
    * ID Mapping changes.
    * Add "--option" to 'testparm'.


o   Jeremy Allison <jra at samba.org>
    * BUG 7080: Quota only shown when logged as root.
    * BUG 7863: Unlink may unlink wrong file when hardlinks are involved.
    * BUG 7996: Sgid bit lost on folder rename.
    * BUG 8040: Fix smbclient segfault with Cyrillic netbios names.
    * Fix crash bug on smbd shutdown when using FOPENDIR().
    * Ensure we don't return an incorrect access mask.
    * Fix bug against the new Mac client.
    * Fix leak in error path.
    * Fix error where Windows client spoolss returns WERR_INVALID_DATA.


o   Christian Ambach <christian.ambach at de.ibm.com>
    * Fix a segfault in the krb5 locator plugin.
    * Enable sharesec for registry shares.


o   Andrew Bartlett <abartlet at samba.org>
    * Fix memory leak in "security=share" and "force user".


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 7875: Fix 'nmbd --port'.
    * BUG 7880: cmd_spoolss_deletedriver() returned without checking all
      architectures.


o   Gregor Beck <gbeck at sernet.de>
    * Add new 'net idmap check' command.
    * Add new 'net idmap delete' command.
    * Fix segfault on missing input file in 'net idmap restore'.


o   Olly Betts <olly at survex.com>
    * Fix 'net usersidlist' not to skip every other user.


o   Gregor Beck <gbeck at sernet.de>
    * Add "net idmap check", a check and repair tool for the
      id mapping database.

o   G?nther Deschner <gd at samba.org>
    * BUG 7690: Retry DNS updates when connection to one nameserver has failed.
    * BUG 7945: Let winbind try to use samlogon validation level 6.
    * Fix Coverity ID 2041.
    * Fix potential crash bug in spoolss_PrinterEnumValues push path.
    * Internal restructuring.
    * Don't wipe out all printer drivers when only one should be deleted.
    * Fix winbindd_dual_pam_auth_samlogon() for NT4 domains.


o   David Disseldorp <ddiss at suse.de>
    * BUG 7915: Fix cups pcap reload with no printers.
    * BUG 8040: Fix smbclient segfault with Cyrillic netbios names.
    * Fix memory leak in print_cups.c.
    * Remove duplicate cups response processing code.
    * Follow force user/group for driver IO.
    * Initiate pcap reload from parent smbd.
    * Reload shares after pcap cache fill.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 8033: Add explicit configure option whether or not to enable dmapi
      support.


o   Volker Lendecke <vl at samba.org>
    * BUG 7917: Fix bug in chain_reply.
    * BUG 7940: Fall back for utimes calls.
    * BUG 8009: Fix getting username in 'net rap session'.
    * BUG 8010: Use jenkins hash for str_checksum.
    * BUG 8042: Fix file creation on OS/X.
    * Fix numerous Coverity IDs.
    * Fix a memory leak in check_sam_security_info3.
    * Fix a segfault in the nss wrapper when libnss_winbind.so is not loadable.
    * Make "net sam list [users|workstations]" list only the right things.
    * Fix a potential memleak in secrets_fetch_trusted_domain_password.
    * Use the right credentials in check_netlogond_security.
    * Add support for AF_NETLINK addr notifications.
    * Fork multiple Winbind children per domain.
    * Fix a deadlock between smbd and ctdbd.
    * Add 'wbinfo --dc-info'.
    * Make "nmbd socket dir" configurable.
    * Fix a valgrind error.
    * Fix a memleak in receive_getdc_response.


o   Nikolay Martynov <mar.kolya at gmail.com>
    * BUG 8010: Fix inode generation so nautilus can count total dir size
      correctly.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 7567: Fix printing from Windows 7.
    * BUG 7899: Don't return "-1" on success in 'net rpc vampire keytab'.
    * BUG 7944: Catch lookup_names/sids schannel errors over ncacn_ip_tcp.
    * Don't grant SEC_STD_DELETE always to the owner of a file.
    * Fix segfaults on addrchange errors in Winbind.
    * Allow machine accounts as members in groupdb.


o   Jonathan Nieder <jrnieder at gmail.com>
    * BUG 6837: Make "rlimit_max below minimum Windows limit" notification less
      scary.


o   Andreas Schneider <asn at samba.org>
    * Add an Endpoint Mapper daemon.
    * Add IPv6 support for the endpoint mapper.
    * Free unused memory in the rpc server.
    * Fix possible segfaults in svcctl server.
    * Fix possible segfault with client_id in rpc server.
    * Add a 'svcctl shutdown' function to rpc server.
    * Fix a resource leak in net_afs.
    * Fix a resource leak in smbta-util.
    * Fix possible resource leak in net_usershare.
    * Fix possible resource leak in 'smbget'.
    * Fix possible resource leak in 'smbfilter'.
    * Fix a possible null pointer dereference in smbd.


o   Pavel Shilovsky <piastry at etersoft.ru>
    * BUG 7928: Fix problems with "kernel oplocks" option set to "no".
    * Ensure we send the direct levelII oplock break to the correct fid.


o   Simo Sorce <idra at samba.org>
    * Fix private libdir and codepages paths.


o   Andrew Tridgell <tridge at samba.org>
    * Fix a valgrind error.


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 3.6 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/pre/

The release notes are available online at:

	http://www.samba.org/samba/ftp/pre/WHATSNEW-3-6-0pre2.txt

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team

From kseeger at samba.org  Thu Apr 21 02:03:53 2011
From: kseeger at samba.org (Karolin Seeger)
Date: Thu, 21 Apr 2011 10:03:53 +0200
Subject: [Announce] Samba 3.4.13 Available for Download
Message-ID: <E1QCorh-004mUa-I9@intern.SerNet.DE>

=================================================================
			"Everybody gets so much information all
			 day long that they lose their common
			 sense."

			 Gertrude Stein
==================================================================


Release Announcements
=====================

This is the latest stable release of Samba 3.4.

Major enhancements in Samba 3.4.13 include:

o  Fix Winbind crash caused by null pointer reference (bug #8086).
o  Fix incorrect timeout handling in ncacn_ip_tcp client code (bug #8085).


Changes since 3.4.12
--------------------


o   G?nther Deschner <gd at samba.org>
    * BUG 8085: Fix incorrect timeout handling in ncacn_ip_tcp client code.


o   Volker Lendecke <vl at samba.org>
    * BUG 8086: Fix Winbind crash caused by null pointer reference.


o   Sergey Korsak <skif at 1plus1.net>
    * BUG 8099: setpwent() actually does endpwent() on FreeBSD.


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/stable

The release notes are available online at:

        http://www.samba.org/samba/history/samba-3.4.13.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team




From kseeger at samba.org  Tue Apr 26 13:13:53 2011
From: kseeger at samba.org (Karolin Seeger)
Date: Tue, 26 Apr 2011 21:13:53 +0200
Subject: [Announce] Samba 3.6.0pre3 Available for Download
Message-ID: <E1QEnhp-00AphL-Bc@intern.SerNet.DE>

Release Announcements
---------------------

This is the third preview release of Samba 3.6.0.  This is *not*
intended for production environments and is designed for testing
purposes only.  Please report any defects via the Samba bug reporting
system at https://bugzilla.samba.org/.


Major enhancements in Samba 3.6.0 include:


Changed security defaults
-------------------------

Samba 3.6 has adopted a number of improved security defaults that will
impact on existing users of Samba.

 client ntlmv2 auth = yes
 client use spnego principal = no
 send spnego principal = no

The impact of 'client ntlmv2 auth = yes' is that by default we will not
use NTLM authentication as a client.  This applies to the Samba client
tools such as smbclient and winbind, but does not change the separately
released in-kernel CIFS client.  To re-enable the poorer NTLM encryption
set '--option=clientusentlmv2auth=no' on your smbclient command line, or
set 'client ntlmv2 auth = no' in your smb.conf

The impact of 'client use spnego principal = no' is that we may be able
to use Kerberos to communicate with a server less often in smbclient,
winbind and other Samba client tools.  We may fall back to NTLMSSP in
more situations where we would previously rely on the insecure
indication from the 'NegProt' CIFS packet.  This mostly occursed when
connecting to a name alias not recorded as a servicePrincipalName for
the server.  This indication is not available from Windows 2008 or later
in any case, and is not used by modern Windows clients, so this makes
Samba's behaviour consistent with other clients and against all servers.

The impact of 'send spnego principal = no' is to match Windows 2008 and
not to send this principal, making existing clients give more consistent
behaviour (more likely to fall back to NTLMSSP) between Samba and
Windows 2008, and between Windows versions that did and no longer use
this insecure hint.


SMB2 support
------------

SMB2 support in 3.6.0 is fully functional (with one omission),
and can be enabled by setting:

max protocol = SMB2

in the [global] section of your smb.conf and re-starting
Samba. All features should work over SMB2 except the modification
of user quotas using the Windows quota management tools.

As this is the first release containing what we consider
to be a fully featured SMB2 protocol, we are not enabling
this by default, but encourage users to enable SMB2 and
test it. Once we have enough confirmation from Samba
users and OEMs that SMB2 support is stable in wide user
testing we will enable SMB2 by default in a future Samba
release.


Internal Winbind passdb changes
-------------------------------

Winbind has been changed to use the internal samr and lsa rpc pipe to get
local user and group information instead of calling passdb functions. The
reason is to use more of our infrastructure and test this infrastructure by
using it. With this approach more code in Winbind is shared.


New Spoolss code
----------------

The spoolss and the old RAP printing code have been completely
overhauled and refactored.

All calls from lanman/printing code has been changed to go through the
spoolss RPC interfaces, this allows us to keep all checks in one place
and avoid special cases in the main printing code.
Printing code has been therefore confined within the spoolss code.

All the printing code, including the spoolss RPC interfaces has been
changed to use the winreg RPC interfaces to store all data.
All data has been migrated from custom, arbitrary TDB files to the
registry interface. This transition allow us to present correct data to
windows client accessing the server registry through the winreg RPC
interfaces to query for printer data. Data is served out from a real
registry implementation and therefore arguably 100% forward compatible.

Migration code from the previous TDB files formats is provided. This
code is automatically invoked the first time the new code is run on the
server. Although manual migration is also available using the 'net
printer migrate' command.

These changes not only make all the spoolss code much more closer to
"the spec", it also greatly improves our internal testing of both
spoolss and winreg interfaces, and reduces overall code duplication.

As part of this work, new tests have been also added to increase
coverage.

This code will also allow, in future, an easy transition to split out
the spooling functions into a separate daemon for those OEMs that do not
need printing functionality in their appliances, reducing the code
footprint.


ID Mapping Changes
------------------

The id mapping configuration has been a source of much grief in the past.
For this release, id mapping has been rewritten yet again with the goal
of making the configuration more simple and more coherent while keeping
the needed flexibility and even adding to the flexibility in some respects.

The major change that implies the configuration simplifications is at
the heart of the id mapping system: The separation of the "idmap alloc
system" that is responsible for the unix id counters in the tdb, tdb2
and ldap idmap backends from the id mapping code itself has been removed.
The sids_to_unixids operation is now atomic and encapsulates (if needed)
the action of allocating a unix id for a mapping that is to be created.
Consequently all idmap alloc configuration parameters have vanished and
it is hence now also not possible any more to specify an idmap alloc
backend different from the idmap backend. Each idmap backend uses its
own idmap unixid creation mechanism transparently.

As a consequence of the id mapping changes, the methods that are used
for storing and deleting id mappings have been removed from the winbindd
API. The "net idmap dump/restore" commands have been rewritten to
not speak through winbindd any more but directly act on the databases.
This is currently available for the tdb and tdb2 backends, the implementation
for ldap still missing.

The allocate_id functionality is preserved for the unix id creator of the
default idmap configuration is also used as the source of unix ids
for the group mapping database and for the posix attributes in a
ldapsam:editposix setup.

As part of the changes, the default idmap configuration has been
changed to be more coherent with the per-domain configuration.
The parameters "idmap uid", "idmap gid" and "idmap range" are now
deprecated in favour of the systematic "idmap config * : range"
and "idmap config * : backend" parameters. The reason for this change
is that the old options only provided an incomplete and hence deceiving
backwards compatibility, which was a source of many problems with
upgrades. By introducing this change in configuration, it should be
brought to the conciousness of the users that even the simple
id mapping is not working exactly as in Samba 3.0 versions any more.


Endpoint Mapper
---------------

As Microsoft is more and more relying on endpoint mapper and we didn't have a
complete implementation we decided to create an instance for Samba. The
endpoint mapper is like a DNS server but for ports. If you want to talk to a
certain RPC service over TCP/IP, you just ask the endpoint mapper on which
port it is running. Then you can connect to the service and make sure that it
is running.
The code is deactivated by default, because it needs more testing and it
doesn't scale yet. We will work on these limitations and hopefully release it
with pre3. If you want to enable and test the endpoint mapper you can set
"rpc_server:epmapper = daemon" in the smb.conf file.


Internal restructuring
----------------------

Ongoing internal restructuring for better separation of internal subsystem to
achieve a faster build, smaller binaries and cleaner dependencies for the samba3
waf build.


SMB Traffic Analyzer
--------------------

Added the new SMB Traffic Analyzer (SMBTA) VFS module protocol 2
featuring encryption, multiple arguments, and easier parseability. A new
tool 'smbta-util' has been created to control the encryption behaviour
of SMBTA. For compatibility, SMBTA by default operates on version 1.
There are programs consuming the data that the module sends.

More information can be found on
http://holger123.wordpress.com/smb-traffic-analyzer/


NFS quota backend on Linux
--------------------------

A new nfs quota backend for Linux has been added that is based
on the existing Solaris/FreeBSD implementation. This allows samba
to communicate correct diskfree information for nfs imports that
are re-exported as samba shares.


######################################################################
Changes
#######

smb.conf changes
----------------

   Parameter Name                      Description     Default
   --------------                      -----------     -------

   async smb echo handler	       New	       No
   client ntlmv2 auth		       Changed Default Yes
   client use spnego principal	       New	       No
   ctdb locktime warn threshold	       New	       0
   idmap alloc backend		       Removed
   log writeable files on exit	       New	       No
   multicast dns register	       New	       Yes
   ncalrpc dir			       New
   send spnego principal	       New	       No
   smb2 max credits		       New	       128
   smb2 max read		       New	       1048576
   smb2 max trans		       New	       1048576
   smb2 max write		       New	       1048576
   username map cache time	       New	       0
   winbind max clients		       New	       200


Commit Highlights
-----------------

o   Michael Adam <obnox at samba.org>
    * ID Mapping changes.


o   Jeremy Allison <jra at samba.org>
    * Implement SMB2 support.


o   Stefan Metzmacher <metze at samba.org>
    * Implement SMB2 support.


o   Andreas Schneider <asn at samba.org>
    * Add an Endpoint Mapper daemon.


Changes since 3.6.0pre2
-----------------------

o   Michael Adam <obnox at samba.org>
    * Fix build of tdb2.


o   Jeremy Allison <jra at samba.org>
    * BUG 8083: "inherit owner = yes" doesn't interact correctly with
      vfs_acl_xattr or vfs_acl_tdb module.
    * BUG 8088: rpccli_samr_chng_pswd_auth_crap segfaults if any input blobs
      are null.
    * Correctly detect and deny symlinks anywhere in a path (not just the last
      component) if "follow symlinks = no".


o   G?nther Deschner <gd at samba.org>
    * BUG 8106: Fix the build of 'smbget' on HP NonStop.
    * Fix timeout in rpc_pipe_open_tcp_port().
    * Fix the build of "--with-profiling-data".
    * Fix the AIX 5.3 build.


o   Sergey Korsak <skif at 1plus1.net>
    * BUG #8099: setpwent() actually does endpwent() and vice versa on FreeBSD.


o   Volker Lendecke <vl at samba.org>
    * BUG 8066: Fix wrong output in 'smbget'.
    * Fix Coverity IDs 986, 1340, 2047, 2299, 2307, 2325, 2335, 2336, 2470,
      2471, 2478.
    * nsswitch: Add 'wbinfo --lookup-sids'.
    * nsswitch: Add 'wbinfo --sids-to-unix-ids'.
    * Fix smbd with the async echo responder.
    * Fix the build of vfs_gpfs.c.
    * Add a 10-second timeout for the 445 or netbios connection to a DC.
    * Many pthreadpool fixes.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 7383: Listen on IPv6 addresses with IPV6_ONLY.


o   Rusty Russell <rusty at rustcorp.com.au>
    * Fix transaction recovery area for converted tdbs.



Changes since 3.6.0pre1
-----------------------

o   Michael Adam <obnox at samba.org>
    * ID Mapping changes.
    * Add "--option" to 'testparm'.


o   Jeremy Allison <jra at samba.org>
    * BUG 7080: Quota only shown when logged as root.
    * BUG 7863: Unlink may unlink wrong file when hardlinks are involved.
    * BUG 7996: Sgid bit lost on folder rename.
    * BUG 8040: Fix smbclient segfault with Cyrillic netbios names.
    * Fix crash bug on smbd shutdown when using FOPENDIR().
    * Ensure we don't return an incorrect access mask.
    * Fix bug against the new Mac client.
    * Fix leak in error path.
    * Fix error where Windows client spoolss returns WERR_INVALID_DATA.


o   Christian Ambach <christian.ambach at de.ibm.com>
    * Fix a segfault in the krb5 locator plugin.
    * Enable sharesec for registry shares.


o   Andrew Bartlett <abartlet at samba.org>
    * Fix memory leak in "security=share" and "force user".


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 7875: Fix 'nmbd --port'.
    * BUG 7880: cmd_spoolss_deletedriver() returned without checking all
      architectures.


o   Gregor Beck <gbeck at sernet.de>
    * Add new 'net idmap check' command.
    * Add new 'net idmap delete' command.
    * Fix segfault on missing input file in 'net idmap restore'.


o   Olly Betts <olly at survex.com>
    * Fix 'net usersidlist' not to skip every other user.


o   Gregor Beck <gbeck at sernet.de>
    * Add "net idmap check", a check and repair tool for the
      id mapping database.

o   G?nther Deschner <gd at samba.org>
    * BUG 7690: Retry DNS updates when connection to one nameserver has failed.
    * BUG 7945: Let winbind try to use samlogon validation level 6.
    * Fix Coverity ID 2041.
    * Fix potential crash bug in spoolss_PrinterEnumValues push path.
    * Internal restructuring.
    * Don't wipe out all printer drivers when only one should be deleted.
    * Fix winbindd_dual_pam_auth_samlogon() for NT4 domains.


o   David Disseldorp <ddiss at suse.de>
    * BUG 7915: Fix cups pcap reload with no printers.
    * BUG 8040: Fix smbclient segfault with Cyrillic netbios names.
    * Fix memory leak in print_cups.c.
    * Remove duplicate cups response processing code.
    * Follow force user/group for driver IO.
    * Initiate pcap reload from parent smbd.
    * Reload shares after pcap cache fill.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 8033: Add explicit configure option whether or not to enable dmapi
      support.


o   Volker Lendecke <vl at samba.org>
    * BUG 7917: Fix bug in chain_reply.
    * BUG 7940: Fall back for utimes calls.
    * BUG 8009: Fix getting username in 'net rap session'.
    * BUG 8010: Use jenkins hash for str_checksum.
    * BUG 8042: Fix file creation on OS/X.
    * Fix numerous Coverity IDs.
    * Fix a memory leak in check_sam_security_info3.
    * Fix a segfault in the nss wrapper when libnss_winbind.so is not loadable.
    * Make "net sam list [users|workstations]" list only the right things.
    * Fix a potential memleak in secrets_fetch_trusted_domain_password.
    * Use the right credentials in check_netlogond_security.
    * Add support for AF_NETLINK addr notifications.
    * Fork multiple Winbind children per domain.
    * Fix a deadlock between smbd and ctdbd.
    * Add 'wbinfo --dc-info'.
    * Make "nmbd socket dir" configurable.
    * Fix a valgrind error.
    * Fix a memleak in receive_getdc_response.


o   Nikolay Martynov <mar.kolya at gmail.com>
    * BUG 8010: Fix inode generation so nautilus can count total dir size
      correctly.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 7567: Fix printing from Windows 7.
    * BUG 7899: Don't return "-1" on success in 'net rpc vampire keytab'.
    * BUG 7944: Catch lookup_names/sids schannel errors over ncacn_ip_tcp.
    * Don't grant SEC_STD_DELETE always to the owner of a file.
    * Fix segfaults on addrchange errors in Winbind.
    * Allow machine accounts as members in groupdb.


o   Jonathan Nieder <jrnieder at gmail.com>
    * BUG 6837: Make "rlimit_max below minimum Windows limit" notification less
      scary.


o   Andreas Schneider <asn at samba.org>
    * Add an Endpoint Mapper daemon.
    * Add IPv6 support for the endpoint mapper.
    * Free unused memory in the rpc server.
    * Fix possible segfaults in svcctl server.
    * Fix possible segfault with client_id in rpc server.
    * Add a 'svcctl shutdown' function to rpc server.
    * Fix a resource leak in net_afs.
    * Fix a resource leak in smbta-util.
    * Fix possible resource leak in net_usershare.
    * Fix possible resource leak in 'smbget'.
    * Fix possible resource leak in 'smbfilter'.
    * Fix a possible null pointer dereference in smbd.


o   Pavel Shilovsky <piastry at etersoft.ru>
    * BUG 7928: Fix problems with "kernel oplocks" option set to "no".
    * Ensure we send the direct levelII oplock break to the correct fid.


o   Simo Sorce <idra at samba.org>
    * Fix private libdir and codepages paths.


o   Andrew Tridgell <tridge at samba.org>
    * Fix a valgrind error.


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 3.6 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/pre/

The release notes are available online at:

	http://www.samba.org/samba/ftp/pre/WHATSNEW-3-6-0pre3.txt

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team

From kseeger at samba.org  Tue May 17 03:49:01 2011
From: kseeger at samba.org (Karolin Seeger)
Date: Tue, 17 May 2011 11:49:01 +0200
Subject: [Announce] Samba 3.6.0rc1 Available for Download
Message-ID: <E1QMGti-002WfY-3Z@intern.SerNet.DE>

Release Announcements
---------------------

This is the first release candidate of Samba 3.6.0.  This is *not*
intended for production environments and is designed for testing
purposes only.  Please report any defects via the Samba bug reporting
system at https://bugzilla.samba.org/.


Major enhancements in Samba 3.6.0 include:


Changed security defaults
-------------------------

Samba 3.6 has adopted a number of improved security defaults that will
impact on existing users of Samba.

 client ntlmv2 auth = yes
 client use spnego principal = no
 send spnego principal = no

The impact of 'client ntlmv2 auth = yes' is that by default we will not
use NTLM authentication as a client.  This applies to the Samba client
tools such as smbclient and winbind, but does not change the separately
released in-kernel CIFS client.  To re-enable the poorer NTLM encryption
set '--option=clientusentlmv2auth=no' on your smbclient command line, or
set 'client ntlmv2 auth = no' in your smb.conf

The impact of 'client use spnego principal = no' is that we may be able
to use Kerberos to communicate with a server less often in smbclient,
winbind and other Samba client tools.  We may fall back to NTLMSSP in
more situations where we would previously rely on the insecure
indication from the 'NegProt' CIFS packet.  This mostly occursed when
connecting to a name alias not recorded as a servicePrincipalName for
the server.  This indication is not available from Windows 2008 or later
in any case, and is not used by modern Windows clients, so this makes
Samba's behaviour consistent with other clients and against all servers.

The impact of 'send spnego principal = no' is to match Windows 2008 and
not to send this principal, making existing clients give more consistent
behaviour (more likely to fall back to NTLMSSP) between Samba and
Windows 2008, and between Windows versions that did and no longer use
this insecure hint.


SMB2 support
------------

SMB2 support in 3.6.0 is fully functional (with one omission),
and can be enabled by setting:

max protocol = SMB2

in the [global] section of your smb.conf and re-starting
Samba. All features should work over SMB2 except the modification
of user quotas using the Windows quota management tools.

As this is the first release containing what we consider
to be a fully featured SMB2 protocol, we are not enabling
this by default, but encourage users to enable SMB2 and
test it. Once we have enough confirmation from Samba
users and OEMs that SMB2 support is stable in wide user
testing we will enable SMB2 by default in a future Samba
release.


Internal Winbind passdb changes
-------------------------------

Winbind has been changed to use the internal samr and lsa rpc pipe to get
local user and group information instead of calling passdb functions. The
reason is to use more of our infrastructure and test this infrastructure by
using it. With this approach more code in Winbind is shared.


New Spoolss code
----------------

The spoolss and the old RAP printing code have been completely
overhauled and refactored.

All calls from lanman/printing code has been changed to go through the
spoolss RPC interfaces, this allows us to keep all checks in one place
and avoid special cases in the main printing code.
Printing code has been therefore confined within the spoolss code.

All the printing code, including the spoolss RPC interfaces has been
changed to use the winreg RPC interfaces to store all data.
All data has been migrated from custom, arbitrary TDB files to the
registry interface. This transition allow us to present correct data to
windows client accessing the server registry through the winreg RPC
interfaces to query for printer data. Data is served out from a real
registry implementation and therefore arguably 100% forward compatible.

Migration code from the previous TDB files formats is provided. This
code is automatically invoked the first time the new code is run on the
server. Although manual migration is also available using the 'net
printer migrate' command.

These changes not only make all the spoolss code much more closer to
"the spec", it also greatly improves our internal testing of both
spoolss and winreg interfaces, and reduces overall code duplication.

As part of this work, new tests have been also added to increase
coverage.

This code will also allow, in future, an easy transition to split out
the spooling functions into a separate daemon for those OEMs that do not
need printing functionality in their appliances, reducing the code
footprint.


ID Mapping Changes
------------------

The id mapping configuration has been a source of much grief in the past.
For this release, id mapping has been rewritten yet again with the goal
of making the configuration more simple and more coherent while keeping
the needed flexibility and even adding to the flexibility in some respects.

The major change that implies the configuration simplifications is at
the heart of the id mapping system: The separation of the "idmap alloc
system" that is responsible for the unix id counters in the tdb, tdb2
and ldap idmap backends from the id mapping code itself has been removed.
The sids_to_unixids operation is now atomic and encapsulates (if needed)
the action of allocating a unix id for a mapping that is to be created.
Consequently all idmap alloc configuration parameters have vanished and
it is hence now also not possible any more to specify an idmap alloc
backend different from the idmap backend. Each idmap backend uses its
own idmap unixid creation mechanism transparently.

As a consequence of the id mapping changes, the methods that are used
for storing and deleting id mappings have been removed from the winbindd
API. The "net idmap dump/restore" commands have been rewritten to
not speak through winbindd any more but directly act on the databases.
This is currently available for the tdb and tdb2 backends, the implementation
for ldap still missing.

The allocate_id functionality is preserved for the unix id creator of the
default idmap configuration is also used as the source of unix ids
for the group mapping database and for the posix attributes in a
ldapsam:editposix setup.

As part of the changes, the default idmap configuration has been
changed to be more coherent with the per-domain configuration.
The parameters "idmap uid", "idmap gid" and "idmap range" are now
deprecated in favour of the systematic "idmap config * : range"
and "idmap config * : backend" parameters. The reason for this change
is that the old options only provided an incomplete and hence deceiving
backwards compatibility, which was a source of many problems with
upgrades. By introducing this change in configuration, it should be
brought to the conciousness of the users that even the simple
id mapping is not working exactly as in Samba 3.0 versions any more.


Endpoint Mapper
---------------

As Microsoft is more and more relying on endpoint mapper and we didn't have a
complete implementation we decided to create an instance for Samba. The
endpoint mapper is like a DNS server but for ports. If you want to talk to a
certain RPC service over TCP/IP, you just ask the endpoint mapper on which
port it is running. Then you can connect to the service and make sure that it
is running.
The code is deactivated by default, because it needs more testing and it
doesn't scale yet. We will work on these limitations and hopefully release it
with pre3. If you want to enable and test the endpoint mapper you can set
"rpc_server:epmapper = daemon" in the smb.conf file.


Internal restructuring
----------------------

Ongoing internal restructuring for better separation of internal subsystem to
achieve a faster build, smaller binaries and cleaner dependencies for the samba3
waf build.


SMB Traffic Analyzer
--------------------

Added the new SMB Traffic Analyzer (SMBTA) VFS module protocol 2
featuring encryption, multiple arguments, and easier parseability. A new
tool 'smbta-util' has been created to control the encryption behaviour
of SMBTA. For compatibility, SMBTA by default operates on version 1.
There are programs consuming the data that the module sends.

More information can be found on
http://holger123.wordpress.com/smb-traffic-analyzer/


NFS quota backend on Linux
--------------------------

A new nfs quota backend for Linux has been added that is based
on the existing Solaris/FreeBSD implementation. This allows samba
to communicate correct diskfree information for nfs imports that
are re-exported as samba shares.


######################################################################
Changes
#######

smb.conf changes
----------------

   Parameter Name                      Description     Default
   --------------                      -----------     -------

   async smb echo handler	       New	       No
   client ntlmv2 auth		       Changed Default Yes
   client use spnego principal	       New	       No
   ctdb locktime warn threshold	       New	       0
   idmap alloc backend		       Removed
   log writeable files on exit	       New	       No
   multicast dns register	       New	       Yes
   ncalrpc dir			       New
   send spnego principal	       New	       No
   smb2 max credits		       New	       128
   smb2 max read		       New	       1048576
   smb2 max trans		       New	       1048576
   smb2 max write		       New	       1048576
   username map cache time	       New	       0
   winbind max clients		       New	       200

   The variable substitutions for %i and %I no longer
   use IPv4 addresses mapped to IPv6, e.g. '::ffff:192.168.0.1',
   if the host has IPv6 enabled. Now %i and %I contain just
   '192.168.0.1'.

Commit Highlights
-----------------

o   Michael Adam <obnox at samba.org>
    * ID Mapping changes.


o   Jeremy Allison <jra at samba.org>
    * Implement SMB2 support.


o   Stefan Metzmacher <metze at samba.org>
    * Implement SMB2 support.


o   Andreas Schneider <asn at samba.org>
    * Add an Endpoint Mapper daemon.


Changes since 3.6.0pre3
-----------------------

o   Jeremy Allison <jra at samba.org>
    * BUG 8111: CIFS VFS: Fix unexpected error on SMB posix open.
    * BUG 8112: POSIX extension opens of a directory are denied with EISDIR.
    * Remove fstrings from client struct.
    * BUGFIX when converting from safe_strcpy to strlcpy.
    * Fix off-by-one calculations with strlcpy.
    * Ensure we always write the correct incoming mid into the share mode table
      entries.
    * Fix the SMB2 oplock showstopper.


o   Christian Ambach <christian.ambach at de.ibm.com>
    * Convert user-specified domain to uppercase in libsmb.


o   G?nther Deschner <gd at samba.org>
    * BUG 8132: Fix filling printers location field when using cups.
    * Fix Coverity CID #2302: FORWARD_NULL.
    * Fix cups_pull_comment_location().
    * Fix double free of cups request.
    * Make cups_pull_comment_location() work again.
    * Fix potential crash bug in display_print_driver3().


o   Volker Lendecke <vl at samba.org>
    * Properly clean up in pthreadpool_init in case of failure.
    * Make plaintext session setup async.
    * Reduce fd load in Winbind children.
    * Avoid a potential 100% CPU loop in Winbind.
    * Tune broadcast namequeries for unique names.
    * Properly deal with exited winbind children.
    * Fix dup_smb2_vec3.
    * Fix return check in nss_wins.


Changes since 3.6.0pre2
-----------------------

o   Michael Adam <obnox at samba.org>
    * Fix build of tdb2.


o   Jeremy Allison <jra at samba.org>
    * BUG 8083: "inherit owner = yes" doesn't interact correctly with
      vfs_acl_xattr or vfs_acl_tdb module.
    * BUG 8088: rpccli_samr_chng_pswd_auth_crap segfaults if any input blobs
      are null.
    * Correctly detect and deny symlinks anywhere in a path (not just the last
      component) if "follow symlinks = no".


o   G?nther Deschner <gd at samba.org>
    * BUG 8106: Fix the build of 'smbget' on HP NonStop.
    * Fix timeout in rpc_pipe_open_tcp_port().
    * Fix the build of "--with-profiling-data".
    * Fix the AIX 5.3 build.


o   Sergey Korsak <skif at 1plus1.net>
    * BUG #8099: setpwent() actually does endpwent() and vice versa on FreeBSD.


o   Volker Lendecke <vl at samba.org>
    * BUG 8066: Fix wrong output in 'smbget'.
    * Fix Coverity IDs 986, 1340, 2047, 2299, 2307, 2325, 2335, 2336, 2470,
      2471, 2478.
    * nsswitch: Add 'wbinfo --lookup-sids'.
    * nsswitch: Add 'wbinfo --sids-to-unix-ids'.
    * Fix smbd with the async echo responder.
    * Fix the build of vfs_gpfs.c.
    * Add a 10-second timeout for the 445 or netbios connection to a DC.
    * Many pthreadpool fixes.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 7383: Listen on IPv6 addresses with IPV6_ONLY.


o   Rusty Russell <rusty at rustcorp.com.au>
    * Fix transaction recovery area for converted tdbs.



Changes since 3.6.0pre1
-----------------------

o   Michael Adam <obnox at samba.org>
    * ID Mapping changes.
    * Add "--option" to 'testparm'.


o   Jeremy Allison <jra at samba.org>
    * BUG 7080: Quota only shown when logged as root.
    * BUG 7863: Unlink may unlink wrong file when hardlinks are involved.
    * BUG 7996: Sgid bit lost on folder rename.
    * BUG 8040: Fix smbclient segfault with Cyrillic netbios names.
    * Fix crash bug on smbd shutdown when using FOPENDIR().
    * Ensure we don't return an incorrect access mask.
    * Fix bug against the new Mac client.
    * Fix leak in error path.
    * Fix error where Windows client spoolss returns WERR_INVALID_DATA.


o   Christian Ambach <christian.ambach at de.ibm.com>
    * Fix a segfault in the krb5 locator plugin.
    * Enable sharesec for registry shares.


o   Andrew Bartlett <abartlet at samba.org>
    * Fix memory leak in "security=share" and "force user".


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 7875: Fix 'nmbd --port'.
    * BUG 7880: cmd_spoolss_deletedriver() returned without checking all
      architectures.


o   Gregor Beck <gbeck at sernet.de>
    * Add new 'net idmap check' command.
    * Add new 'net idmap delete' command.
    * Fix segfault on missing input file in 'net idmap restore'.


o   Olly Betts <olly at survex.com>
    * Fix 'net usersidlist' not to skip every other user.


o   G?nther Deschner <gd at samba.org>
    * BUG 7690: Retry DNS updates when connection to one nameserver has failed.
    * BUG 7945: Let winbind try to use samlogon validation level 6.
    * Fix Coverity ID 2041.
    * Fix potential crash bug in spoolss_PrinterEnumValues push path.
    * Internal restructuring.
    * Don't wipe out all printer drivers when only one should be deleted.
    * Fix winbindd_dual_pam_auth_samlogon() for NT4 domains.


o   David Disseldorp <ddiss at suse.de>
    * BUG 7915: Fix cups pcap reload with no printers.
    * BUG 8040: Fix smbclient segfault with Cyrillic netbios names.
    * Fix memory leak in print_cups.c.
    * Remove duplicate cups response processing code.
    * Follow force user/group for driver IO.
    * Initiate pcap reload from parent smbd.
    * Reload shares after pcap cache fill.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 8033: Add explicit configure option whether or not to enable dmapi
      support.


o   Volker Lendecke <vl at samba.org>
    * BUG 7917: Fix bug in chain_reply.
    * BUG 7940: Fall back for utimes calls.
    * BUG 8009: Fix getting username in 'net rap session'.
    * BUG 8010: Use jenkins hash for str_checksum.
    * BUG 8042: Fix file creation on OS/X.
    * Fix numerous Coverity IDs.
    * Fix a memory leak in check_sam_security_info3.
    * Fix a segfault in the nss wrapper when libnss_winbind.so is not loadable.
    * Make "net sam list [users|workstations]" list only the right things.
    * Fix a potential memleak in secrets_fetch_trusted_domain_password.
    * Use the right credentials in check_netlogond_security.
    * Add support for AF_NETLINK addr notifications.
    * Fork multiple Winbind children per domain.
    * Fix a deadlock between smbd and ctdbd.
    * Add 'wbinfo --dc-info'.
    * Make "nmbd socket dir" configurable.
    * Fix a valgrind error.
    * Fix a memleak in receive_getdc_response.


o   Nikolay Martynov <mar.kolya at gmail.com>
    * BUG 8010: Fix inode generation so nautilus can count total dir size
      correctly.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 7567: Fix printing from Windows 7.
    * BUG 7899: Don't return "-1" on success in 'net rpc vampire keytab'.
    * BUG 7944: Catch lookup_names/sids schannel errors over ncacn_ip_tcp.
    * Don't grant SEC_STD_DELETE always to the owner of a file.
    * Fix segfaults on addrchange errors in Winbind.
    * Allow machine accounts as members in groupdb.


o   Jonathan Nieder <jrnieder at gmail.com>
    * BUG 6837: Make "rlimit_max below minimum Windows limit" notification less
      scary.


o   Andreas Schneider <asn at samba.org>
    * Add an Endpoint Mapper daemon.
    * Add IPv6 support for the endpoint mapper.
    * Free unused memory in the rpc server.
    * Fix possible segfaults in svcctl server.
    * Fix possible segfault with client_id in rpc server.
    * Add a 'svcctl shutdown' function to rpc server.
    * Fix a resource leak in net_afs.
    * Fix a resource leak in smbta-util.
    * Fix possible resource leak in net_usershare.
    * Fix possible resource leak in 'smbget'.
    * Fix possible resource leak in 'smbfilter'.
    * Fix a possible null pointer dereference in smbd.


o   Pavel Shilovsky <piastry at etersoft.ru>
    * BUG 7928: Fix problems with "kernel oplocks" option set to "no".
    * Ensure we send the direct levelII oplock break to the correct fid.


o   Simo Sorce <idra at samba.org>
    * Fix private libdir and codepages paths.


o   Andrew Tridgell <tridge at samba.org>
    * Fix a valgrind error.


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 3.6 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================



================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/rc/

The release notes are available online at:

	http://www.samba.org/samba/ftp/rc/WHATSNEW-3-6-0rc1.txt

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team

From kseeger at samba.org  Tue Jun  7 12:49:15 2011
From: kseeger at samba.org (Karolin Seeger)
Date: Tue, 7 Jun 2011 20:49:15 +0200
Subject: [Announce] Samba 3.6.0rc2 Available for Download
Message-ID: <E1QU1L1-00Ddoj-GB@intern.SerNet.DE>

Release Announcements
---------------------

This is the second release candidate of Samba 3.6.0.  This is *not*
intended for production environments and is designed for testing
purposes only.  Please report any defects via the Samba bug reporting
system at https://bugzilla.samba.org/.


Major enhancements in Samba 3.6.0 include:


Changed security defaults
-------------------------

Samba 3.6 has adopted a number of improved security defaults that will
impact on existing users of Samba.

 client ntlmv2 auth = yes
 client use spnego principal = no
 send spnego principal = no

The impact of 'client ntlmv2 auth = yes' is that by default we will not
use NTLM authentication as a client.  This applies to the Samba client
tools such as smbclient and winbind, but does not change the separately
released in-kernel CIFS client.  To re-enable the poorer NTLM encryption
set '--option=clientusentlmv2auth=no' on your smbclient command line, or
set 'client ntlmv2 auth = no' in your smb.conf

The impact of 'client use spnego principal = no' is that we may be able
to use Kerberos to communicate with a server less often in smbclient,
winbind and other Samba client tools.  We may fall back to NTLMSSP in
more situations where we would previously rely on the insecure
indication from the 'NegProt' CIFS packet.  This mostly occursed when
connecting to a name alias not recorded as a servicePrincipalName for
the server.  This indication is not available from Windows 2008 or later
in any case, and is not used by modern Windows clients, so this makes
Samba's behaviour consistent with other clients and against all servers.

The impact of 'send spnego principal = no' is to match Windows 2008 and
not to send this principal, making existing clients give more consistent
behaviour (more likely to fall back to NTLMSSP) between Samba and
Windows 2008, and between Windows versions that did and no longer use
this insecure hint.


SMB2 support
------------

SMB2 support in 3.6.0 is fully functional (with one omission),
and can be enabled by setting:

max protocol = SMB2

in the [global] section of your smb.conf and re-starting
Samba. All features should work over SMB2 except the modification
of user quotas using the Windows quota management tools.

As this is the first release containing what we consider
to be a fully featured SMB2 protocol, we are not enabling
this by default, but encourage users to enable SMB2 and
test it. Once we have enough confirmation from Samba
users and OEMs that SMB2 support is stable in wide user
testing we will enable SMB2 by default in a future Samba
release.


Internal Winbind passdb changes
-------------------------------

Winbind has been changed to use the internal samr and lsa rpc pipe to get
local user and group information instead of calling passdb functions. The
reason is to use more of our infrastructure and test this infrastructure by
using it. With this approach more code in Winbind is shared.


New Spoolss code
----------------

The spoolss and the old RAP printing code have been completely
overhauled and refactored.

All calls from lanman/printing code has been changed to go through the
spoolss RPC interfaces, this allows us to keep all checks in one place
and avoid special cases in the main printing code.
Printing code has been therefore confined within the spoolss code.

All the printing code, including the spoolss RPC interfaces has been
changed to use the winreg RPC interfaces to store all data.
All data has been migrated from custom, arbitrary TDB files to the
registry interface. This transition allow us to present correct data to
windows client accessing the server registry through the winreg RPC
interfaces to query for printer data. Data is served out from a real
registry implementation and therefore arguably 100% forward compatible.

Migration code from the previous TDB files formats is provided. This
code is automatically invoked the first time the new code is run on the
server. Although manual migration is also available using the 'net
printer migrate' command.

These changes not only make all the spoolss code much more closer to
"the spec", it also greatly improves our internal testing of both
spoolss and winreg interfaces, and reduces overall code duplication.

As part of this work, new tests have been also added to increase
coverage.

This code will also allow, in future, an easy transition to split out
the spooling functions into a separate daemon for those OEMs that do not
need printing functionality in their appliances, reducing the code
footprint.


ID Mapping Changes
------------------

The id mapping configuration has been a source of much grief in the past.
For this release, id mapping has been rewritten yet again with the goal
of making the configuration more simple and more coherent while keeping
the needed flexibility and even adding to the flexibility in some respects.

The major change that implies the configuration simplifications is at
the heart of the id mapping system: The separation of the "idmap alloc
system" that is responsible for the unix id counters in the tdb, tdb2
and ldap idmap backends from the id mapping code itself has been removed.
The sids_to_unixids operation is now atomic and encapsulates (if needed)
the action of allocating a unix id for a mapping that is to be created.
Consequently all idmap alloc configuration parameters have vanished and
it is hence now also not possible any more to specify an idmap alloc
backend different from the idmap backend. Each idmap backend uses its
own idmap unixid creation mechanism transparently.

As a consequence of the id mapping changes, the methods that are used
for storing and deleting id mappings have been removed from the winbindd
API. The "net idmap dump/restore" commands have been rewritten to
not speak through winbindd any more but directly act on the databases.
This is currently available for the tdb and tdb2 backends, the implementation
for ldap still missing.

The allocate_id functionality is preserved for the unix id creator of the
default idmap configuration is also used as the source of unix ids
for the group mapping database and for the posix attributes in a
ldapsam:editposix setup.

As part of the changes, the default idmap configuration has been
changed to be more coherent with the per-domain configuration.
The parameters "idmap uid", "idmap gid" and "idmap range" are now
deprecated in favour of the systematic "idmap config * : range"
and "idmap config * : backend" parameters. The reason for this change
is that the old options only provided an incomplete and hence deceiving
backwards compatibility, which was a source of many problems with
upgrades. By introducing this change in configuration, it should be
brought to the conciousness of the users that even the simple
id mapping is not working exactly as in Samba 3.0 versions any more.


Endpoint Mapper
---------------

As Microsoft is more and more relying on endpoint mapper and we didn't have a
complete implementation we decided to create an instance for Samba. The
endpoint mapper is like a DNS server but for ports. If you want to talk to a
certain RPC service over TCP/IP, you just ask the endpoint mapper on which
port it is running. Then you can connect to the service and make sure that it
is running.

The code is deactivated by default, because it needs more testing and it
doesn't scale yet. If you want to enable and test the endpoint mapper
you can set "rpc_server:epmapper = daemon" in the smb.conf file.


Internal restructuring
----------------------

Ongoing internal restructuring for better separation of internal subsystem to
achieve a faster build, smaller binaries and cleaner dependencies for the samba3
waf build.


SMB Traffic Analyzer
--------------------

Added the new SMB Traffic Analyzer (SMBTA) VFS module protocol 2
featuring encryption, multiple arguments, and easier parseability. A new
tool 'smbta-util' has been created to control the encryption behaviour
of SMBTA. For compatibility, SMBTA by default operates on version 1.
There are programs consuming the data that the module sends.

More information can be found on
http://holger123.wordpress.com/smb-traffic-analyzer/


NFS quota backend on Linux
--------------------------

A new nfs quota backend for Linux has been added that is based
on the existing Solaris/FreeBSD implementation. This allows samba
to communicate correct diskfree information for nfs imports that
are re-exported as samba shares.


######################################################################
Changes
#######

smb.conf changes
----------------

   Parameter Name                      Description     Default
   --------------                      -----------     -------

   async smb echo handler	       New	       No
   client ntlmv2 auth		       Changed Default Yes
   client use spnego principal	       New	       No
   ctdb locktime warn threshold	       New	       0
   idmap alloc backend		       Removed
   log writeable files on exit	       New	       No
   multicast dns register	       New	       Yes
   ncalrpc dir			       New
   send spnego principal	       New	       No
   smb2 max credits		       New	       128
   smb2 max read		       New	       1048576
   smb2 max trans		       New	       1048576
   smb2 max write		       New	       1048576
   username map cache time	       New	       0
   winbind max clients		       New	       200

   The variable substitutions for %i and %I no longer
   use IPv4 addresses mapped to IPv6, e.g. '::ffff:192.168.0.1',
   if the host has IPv6 enabled. Now %i and %I contain just
   '192.168.0.1'.

Commit Highlights
-----------------

o   Michael Adam <obnox at samba.org>
    * ID Mapping changes.


o   Jeremy Allison <jra at samba.org>
    * Implement SMB2 support.


o   Stefan Metzmacher <metze at samba.org>
    * Implement SMB2 support.


o   Andreas Schneider <asn at samba.org>
    * Add an Endpoint Mapper daemon.


Changes since 3.6.0rc1
----------------------

o   Michael Adam <obnox at samba.org>
    * BUG 8200: Add support for multiple writeable ldap idmap domains.


o   Jeremy Allison <jra at samba.org>
    * BUG 6911: Fix Kerberos authentication from Vista to Samba.
    * BUG 7054: Fix X account flag when "pwdlastset" is "0".
    * BUG 8133: Fix strange behavior for the file (whose filename first
      character is period ) in SMB2 case.
    * BUG 8144: Fix setting timestamp when touching files with CIFS clients.
    * BUG 8150: Ban "dos charset = utf8".
    * BUG 8153: Fix setting up getaddrinfo on IPv6-only machines.
    * BUG 8156: Fix 'net ads join' using the user's Kerberos ticket.
    * BUG 8157: Fix parsing a cups printcap file.
    * BUG 8163: Fix our asn.1 parser to handle negative numbers.
    * BUG 8175: Fix smbd deadlock.
    * BUG 8191: Split the ACE flag mapping between nfs4 and Windows into two
      separate functions.
    * BUG 8197: Winbind does not properly detect when a DC connection is dead.
    * BUG 8203: Winbind needs to reset the DC connection if an RPC times out.


o   Christian Ambach <ambi at samba.org>
    * BUG 8152: Fix smbd crash in release_ip().


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 8151: Deprecate security parameters.


o   Gregor Beck <gbeck at sernet.de>
    * BUG 8191: nfs4_acls: Pass ACE_FLAG_INHERITED_ACE up to the client/down
      from the client.
    * BUG 8192: Fix parsing of multiple flags in 'smbcacls'.


o   Sumit Bose <sbose at redhat.com>
    * BUG 8142: Fix typos in LDAP schema files.


o   Holger Hetterich <hhetter at novell.com>
    * BUG 8148: Default to protocol version 2 for SMB Traffic Analyzer.
    * BUG 8154: Actually make use of SMBTA subversion numbers.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 7998: Remove warning if IOV_MAX is not defined.


o   Jim McDonough <jmcd at samba.org>
    * BUG 8166: Don't lockout users when offline.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 8140: talloc: Fix Valgrind false positives and other backports.
    * BUG 8141: Fix wrong permissions on lp_ncalrpc_dir().


o   Andreas Schneider <asn at samba.org>
    * BUG 8155: Fix registering only named pipes on EPM for a service.


o   Volker Lendecke <vl at samba.org>
    * BUG 8159: Fix memory corruption in fetching cli->server_domain from the
      server.
    * BUG 8185: "security=server" does not obey guest login field.
    * BUG 8189: Support shadow copy display over SMB2.
    * BUG 8199: Fix potential crash in smbd handling smb2.


o   Samuel Thibault <sthibault at debian.org>
    * BUG 7998: Fix build on Hurd.


Changes since 3.6.0pre3
-----------------------

o   Jeremy Allison <jra at samba.org>
    * BUG 8111: CIFS VFS: Fix unexpected error on SMB posix open.
    * BUG 8112: POSIX extension opens of a directory are denied with EISDIR.
    * Remove fstrings from client struct.
    * BUGFIX when converting from safe_strcpy to strlcpy.
    * Fix off-by-one calculations with strlcpy.
    * Ensure we always write the correct incoming mid into the share mode table
      entries.
    * Fix the SMB2 oplock showstopper.


o   Christian Ambach <christian.ambach at de.ibm.com>
    * Convert user-specified domain to uppercase in libsmb.


o   G?nther Deschner <gd at samba.org>
    * BUG 8132: Fix filling printers location field when using cups.
    * Fix Coverity CID #2302: FORWARD_NULL.
    * Fix cups_pull_comment_location().
    * Fix double free of cups request.
    * Make cups_pull_comment_location() work again.
    * Fix potential crash bug in display_print_driver3().


o   Volker Lendecke <vl at samba.org>
    * Properly clean up in pthreadpool_init in case of failure.
    * Make plaintext session setup async.
    * Reduce fd load in Winbind children.
    * Avoid a potential 100% CPU loop in Winbind.
    * Tune broadcast namequeries for unique names.
    * Properly deal with exited winbind children.
    * Fix dup_smb2_vec3.
    * Fix return check in nss_wins.


Changes since 3.6.0pre2
-----------------------

o   Michael Adam <obnox at samba.org>
    * Fix build of tdb2.


o   Jeremy Allison <jra at samba.org>
    * BUG 8083: "inherit owner = yes" doesn't interact correctly with
      vfs_acl_xattr or vfs_acl_tdb module.
    * BUG 8088: rpccli_samr_chng_pswd_auth_crap segfaults if any input blobs
      are null.
    * Correctly detect and deny symlinks anywhere in a path (not just the last
      component) if "follow symlinks = no".


o   G?nther Deschner <gd at samba.org>
    * BUG 8106: Fix the build of 'smbget' on HP NonStop.
    * Fix timeout in rpc_pipe_open_tcp_port().
    * Fix the build of "--with-profiling-data".
    * Fix the AIX 5.3 build.


o   Sergey Korsak <skif at 1plus1.net>
    * BUG #8099: setpwent() actually does endpwent() and vice versa on FreeBSD.


o   Volker Lendecke <vl at samba.org>
    * BUG 8066: Fix wrong output in 'smbget'.
    * Fix Coverity IDs 986, 1340, 2047, 2299, 2307, 2325, 2335, 2336, 2470,
      2471, 2478.
    * nsswitch: Add 'wbinfo --lookup-sids'.
    * nsswitch: Add 'wbinfo --sids-to-unix-ids'.
    * Fix smbd with the async echo responder.
    * Fix the build of vfs_gpfs.c.
    * Add a 10-second timeout for the 445 or netbios connection to a DC.
    * Many pthreadpool fixes.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 7383: Listen on IPv6 addresses with IPV6_ONLY.


o   Rusty Russell <rusty at rustcorp.com.au>
    * Fix transaction recovery area for converted tdbs.



Changes since 3.6.0pre1
-----------------------

o   Michael Adam <obnox at samba.org>
    * ID Mapping changes.
    * Add "--option" to 'testparm'.


o   Jeremy Allison <jra at samba.org>
    * BUG 7080: Quota only shown when logged as root.
    * BUG 7863: Unlink may unlink wrong file when hardlinks are involved.
    * BUG 7996: Sgid bit lost on folder rename.
    * BUG 8040: Fix smbclient segfault with Cyrillic netbios names.
    * Fix crash bug on smbd shutdown when using FOPENDIR().
    * Ensure we don't return an incorrect access mask.
    * Fix bug against the new Mac client.
    * Fix leak in error path.
    * Fix error where Windows client spoolss returns WERR_INVALID_DATA.


o   Christian Ambach <christian.ambach at de.ibm.com>
    * Fix a segfault in the krb5 locator plugin.
    * Enable sharesec for registry shares.


o   Andrew Bartlett <abartlet at samba.org>
    * Fix memory leak in "security=share" and "force user".


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 7875: Fix 'nmbd --port'.
    * BUG 7880: cmd_spoolss_deletedriver() returned without checking all
      architectures.


o   Gregor Beck <gbeck at sernet.de>
    * Add new 'net idmap check' command.
    * Add new 'net idmap delete' command.
    * Fix segfault on missing input file in 'net idmap restore'.


o   Olly Betts <olly at survex.com>
    * Fix 'net usersidlist' not to skip every other user.


o   G?nther Deschner <gd at samba.org>
    * BUG 7690: Retry DNS updates when connection to one nameserver has failed.
    * BUG 7945: Let winbind try to use samlogon validation level 6.
    * Fix Coverity ID 2041.
    * Fix potential crash bug in spoolss_PrinterEnumValues push path.
    * Internal restructuring.
    * Don't wipe out all printer drivers when only one should be deleted.
    * Fix winbindd_dual_pam_auth_samlogon() for NT4 domains.


o   David Disseldorp <ddiss at suse.de>
    * BUG 7915: Fix cups pcap reload with no printers.
    * BUG 8040: Fix smbclient segfault with Cyrillic netbios names.
    * Fix memory leak in print_cups.c.
    * Remove duplicate cups response processing code.
    * Follow force user/group for driver IO.
    * Initiate pcap reload from parent smbd.
    * Reload shares after pcap cache fill.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 8033: Add explicit configure option whether or not to enable dmapi
      support.


o   Volker Lendecke <vl at samba.org>
    * BUG 7917: Fix bug in chain_reply.
    * BUG 7940: Fall back for utimes calls.
    * BUG 8009: Fix getting username in 'net rap session'.
    * BUG 8010: Use jenkins hash for str_checksum.
    * BUG 8042: Fix file creation on OS/X.
    * Fix numerous Coverity IDs.
    * Fix a memory leak in check_sam_security_info3.
    * Fix a segfault in the nss wrapper when libnss_winbind.so is not loadable.
    * Make "net sam list [users|workstations]" list only the right things.
    * Fix a potential memleak in secrets_fetch_trusted_domain_password.
    * Use the right credentials in check_netlogond_security.
    * Add support for AF_NETLINK addr notifications.
    * Fork multiple Winbind children per domain.
    * Fix a deadlock between smbd and ctdbd.
    * Add 'wbinfo --dc-info'.
    * Make "nmbd socket dir" configurable.
    * Fix a valgrind error.
    * Fix a memleak in receive_getdc_response.


o   Nikolay Martynov <mar.kolya at gmail.com>
    * BUG 8010: Fix inode generation so nautilus can count total dir size
      correctly.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 7567: Fix printing from Windows 7.
    * BUG 7899: Don't return "-1" on success in 'net rpc vampire keytab'.
    * BUG 7944: Catch lookup_names/sids schannel errors over ncacn_ip_tcp.
    * Don't grant SEC_STD_DELETE always to the owner of a file.
    * Fix segfaults on addrchange errors in Winbind.
    * Allow machine accounts as members in groupdb.


o   Jonathan Nieder <jrnieder at gmail.com>
    * BUG 6837: Make "rlimit_max below minimum Windows limit" notification less
      scary.


o   Andreas Schneider <asn at samba.org>
    * Add an Endpoint Mapper daemon.
    * Add IPv6 support for the endpoint mapper.
    * Free unused memory in the rpc server.
    * Fix possible segfaults in svcctl server.
    * Fix possible segfault with client_id in rpc server.
    * Add a 'svcctl shutdown' function to rpc server.
    * Fix a resource leak in net_afs.
    * Fix a resource leak in smbta-util.
    * Fix possible resource leak in net_usershare.
    * Fix possible resource leak in 'smbget'.
    * Fix possible resource leak in 'smbfilter'.
    * Fix a possible null pointer dereference in smbd.


o   Pavel Shilovsky <piastry at etersoft.ru>
    * BUG 7928: Fix problems with "kernel oplocks" option set to "no".
    * Ensure we send the direct levelII oplock break to the correct fid.


o   Simo Sorce <idra at samba.org>
    * Fix private libdir and codepages paths.


o   Andrew Tridgell <tridge at samba.org>
    * Fix a valgrind error.


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 3.6 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/rc/

The release notes are available online at:

	http://www.samba.org/samba/ftp/rc/WHATSNEW-3-6-0rc2.txt

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team

From kseeger at samba.org  Tue Jun 14 06:28:49 2011
From: kseeger at samba.org (Karolin Seeger)
Date: Tue, 14 Jun 2011 14:28:49 +0200
Subject: [Announce] Samba 3.5.9 Available for Download
Message-ID: <E1QWSqG-004hZL-GZ@intern.SerNet.DE>

===================================================================
				"There can't be a crisis next week.
				 My schedule is already full."

				 Henry A. Kissinger
==================================================================


Release Announcements
=====================

This is the latest stable release of Samba 3.5.

Major enhancements in Samba 3.5.9 include:

o  Sgid bit lost on folder rename (bug #7996).
o  ACL can get lost when files are being renamed (bug #7987).
o  Respect "allow trusted domains = no" in Winbind (bug #6966).


Changes since 3.5.8:
--------------------

o   Jeremy Allison <jra at samba.org>
    * BUG 6911: Kerberos authentication from Vista to Samba fails when security
      blob size is greater than 16 kB.
    * BUG 7080: Quota only shown when logged as root.
    * BUG 7528: Fix Solaris with NIS autohome.
    * BUG 7987: ACL can get lost when files are being renamed.
    * BUG 7996: sgid bit lost on folder rename.
    * BUG 8040: Fix 'smbclient' segfaults when a Cyrillic netbios name or
      workgroup is configured.
    * BUG 8072: Fix panic in create_file_acl_common.
    * BUG 8038: Fix is_myname_or_ipaddr() to be robust against strange DNS
      setups.
    * BUG 8083: "inherit owner = yes" doesn't interact correctly with
      vfs_acl_xattr or vfs_acl_tdb module.
    * BUG 8088: Fix segfault in rpccli_samr_chng_pswd_auth_crap if any input
      blobs are null.
    * BUG 8111: CIFS VFS: Fix unexpected error on SMB posix open.
    * BUG 8157: Fix parsing CUPS printcap files in std_pcap_cache_reload().
    * BUG 8163: Fix our asn.1 parser to handle negative numbers.
    * BUG 8211: "inherit owner = yes" doesn't interact correctly with "inherit
      permissions = yes".


o   Christian Ambach <ambi at samba.org>
    * BUG 8008: Fix a segfault in the krb5 locator plugin.
    * BUG 8012: Use getgrset() instead of initgroups() + getgroups() when
      getgrouplist() is not defined.
    * BUG 8031: Convert gpfs:sharemodes and gpfs:leases parameters from a
      global setting to a per share setting.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 7893: Don't ever ask for machine$ principals as a target.


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 8074: Fix debug message.


o   Dmitry Butskoy <dmitry at butskoy.name>
    * BUG 6966: Respect "allow trusted domains = no" in Winbind.


o   Marc A. Dahlhaus <mad at wol.de>
    * BUG 8047: Fix mdns registration if "interfaces=" is used.


o   G?nther Deschner <gd at samba.org>
    * BUG 7993: Make sure we don't crash when publishing a single printer.
    * BUG 8085: Fix incorrect timeout handling in ncacn_ip_tcp client code.
    * BUG 8132: Fix filling printers location field when using CUPS.


o   David Disseldorp <ddiss at suse.de>
    * BUG 7836: Make newly added printers visible to clients.
    * BUG 7994: Use printcap IDL for IPC.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 7825: Fix GNU ld version detection with old gcc releases.
    * BUG 8033: Add explicit configure option whether to enable dmapi
      support or not.


o   Sergey Korsak <skif at 1plus1.net>
    * BUG 8099: setpwent() actually does endpwent() on FreeBSD.


o   Volker Lendecke <vl at samba.org>
    * BUG 8009: Fix getting username in 'net rap session'.
    * BUG 8011: Fix memory corruption in shadow_copy2.
    * BUG 8016: Fix gpfs_get_xattr.
    * BUG 8042: File creation on OS/X.
    * BUG 8054: Winbind cache stores/retrieves wrong sizes for 16-bit ints.
    * BUG 8066: Fix wrong output in 'smbget'.
    * BUG 8087: Fix wbcChangeUserPasswordEx in RESPONSE mode.


o   Nikolay Martynov <mar.kolya at gmail.com>
    * BUG 8010: Fix inode generation so nautilus can count total dir size
      correctly.


o   Jim McDonough <jmcd at samba.org>
    * BUG 6364: Pull realm from supplied username on libnet join.
    * BUG 8166: Don't lockout users when offline.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 7383: Normalize IPv4 mapped IPv6 addresses in both directions.
    * BUG 8034: SEC_STD_DELETE is always granted to the owner of a file.


o   Larry Reid <lcreid at jadesystems.ca>
    * BUG 8055: Can't see Parts of DFS CIFS share.


o   Simo Sorce <idra at samba.org>
    * BUG 7610: winbindd_cache.tdb grows too large when scaled.


o   Martin Vogt <martin.vogt at itwm.fraunhofer.de>
    * BUG 6762: Fix ctdb on gpfs error with MS Office.



######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 3.5 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/stable

The release notes are available online at:

        http://www.samba.org/samba/history/samba-3.5.9.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team




From abartlet at samba.org  Fri Jun 24 00:42:03 2011
From: abartlet at samba.org (Andrew Bartlett)
Date: Fri, 24 Jun 2011 16:42:03 +1000
Subject: [ANNOUNCE] Samba 4.0 alpha 16
Message-ID: <1308897724.26364.5.camel@obed>

We are proud to a announce another alpha release of Samba 4, alpha 16.

What's new in Samba 4 alpha16
=============================

Samba 4.0 will be the next version of the Samba suite and incorporates
all the technology found in both the Samba4 alpha series and the
stable 3.x series. The primary additional features over Samba 3.6 are
support for the Active Directory logon protocols used by Windows 2000
and above.

WARNINGS
========

Samba4 alpha16 is not a final Samba release, however we are now making
good progress towards a Samba 4.0 release, of which this is a preview.
Be aware the this release contains both the technology of Samba 3.6
(that you can reasonably expect to upgrade existing Samba 3.x releases
to) and the AD domain controller work previously known as 'samba4'.
No migration path is currently provided between these two sets of
technology.  These missing migration paths will be the focus of
development between now and a Samba 4.0 release.

While binaries for the stable file server are provided in this
release, for a stable, supported file server, Samba3 domain or AD
domain member installation, please run a Samba 3.x release, as we are
still bedding down the new single build system.

Samba4 is subjected to an awesome battery of tests on an automated
basis, we have found Samba 4.0 to be very stable in it's behavior.
However, we still recommend against upgrading production servers from
Samba 3.x release to Samba 4.0 alpha at this stage.

If you are upgrading, or looking to develop, test or deploy Samba 4.0
alpha releases, you should backup all configuration and data.

NEW FEATURES
============

Samba 4.0 alpha supports the server-side of the Active Directory logon
environment used by Windows 2000 and later, so we can do full domain
join and domain logon operations with these clients.

Our Domain Controller (DC) implementation includes our own built-in
LDAP server and Kerberos Key Distribution Center (KDC) as well as the
Samba3-like logon services provided over CIFS.  We correctly generate
the infamous Kerberos PAC, and include it with the Kerberos tickets we
issue.

Samba 4.0 alpha ships with two distinct file servers.  The file server
from the Samba 3.x series is 'smbd', and works with the binaries users
would expect from that series (nmbd, winbindd, smbpasswd).

Samba 4.0 also ships with a new file server, which is tuned to match
the requirements of an AD domain controller.  Users should not use the
file server in the 'samba' binary for non-DC related tasks.

A new scripting interface has been added to Samba 4, allowing Python
programs to interface to Samba's internals, and many tools and
internal workings of the DC code is now implemented in python.


CHANGES SINCE alpha15
=====================

For a list of changes since alpha 15, please see the git log.

$ git clone git://git.samba.org/samba.git
$ cd samba.git
$ git log release-4-0-0alpha15..release-4-0-0alpha16

The biggest user-visible change is that binaries from the Samba 3.x
series of development are now built and installed.  These binaries
(smbd, nmbd, winbindd, net, testparm, etc) operate much as they do in
the Samba 3.6 release candidates. 

CHANGES
=======

smb.conf changes
----------------

   Parameter Name                      Description     Default
   --------------                      -----------     -------
   announce version 		       Removed
   announce as	 		       Removed

Those familiar with Samba 3 can find a list of user-visible changes
between the two technology sets provided in the NEWS file.

KNOWN ISSUES
============

- Domain member support in the 'samba' binary is in it's infancy, and
  is not comparable to the support found in winbindd.  As such, do not
  use the 'samba' binary (provided for the AD server) on a member
  server.

- There is no printing support in the 'samba' binary (use smbd instead)

- There is no NetBIOS browsing support in the 'samba' binary (use nmbd
  and smbd instead)

- Clock Synchronisation is critical.  Many 'wrong password' errors are
  actually due to Kerberos objecting to a clock skew between client
  and server.  (The NTP work in the previous alphas are partly to assist
  with this problem).

- The DRS replication code may fail.  Please contact the team if you
  experience issues with DRS replication, as we have fixed many issues
  here in response to feedback from our production users. 

- Users upgrading existing databases to Samba4 should carefully
  consult upgrading-samba4.txt.  We have made a number of changes in
  this release that should make it easier to upgrade in future.
  Btw: there exists also a script under the "setup" directory of the
  source distribution called "upgrade_from_s3" which should allow a
step-up
  from Samba3 to Samba4. It's not included yet in the binary
distributions
  since it's completely experimental!

RUNNING Samba 4.0 as an AD DC
=============================

A short guide to setting up Samba 4 as an AD DC can be found on the
wiki:

  http://wiki.samba.org/index.php/Samba4/HOWTO

#######################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 4.0 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================



Download Details
================

The release tarball is available from the following location:
 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0alpha16.tar.gz

This release has been signed using GPG with Andrew's GPG key 28B436BB).

 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0alpha16.tar.asc

To verify that the signature is correct, make sure that the tarball has
been unzipped and run:

$ gpg --verify samba-4.0.0alpha16.tar.asc

Happy testing!

The Samba team
-- 
Andrew Bartlett                                http://samba.org/~abartlet/
Authentication Developer, Samba Team           http://samba.org


From kseeger at samba.org  Fri Jun 24 13:31:30 2011
From: kseeger at samba.org (Karolin Seeger)
Date: Fri, 24 Jun 2011 21:31:30 +0200
Subject: [Announce] Samba 3.5.9 Available for Download
In-Reply-To: <E1QWSqG-004hZL-GZ@intern.SerNet.DE>
References: <E1QWSqG-004hZL-GZ@intern.SerNet.DE>
Message-ID: <E1QaC6F-002BYe-0M@intern.SerNet.DE>

Please note that the Samba 3.5.9 release notes have been extended after
the release. The following paragraph on the changed Kerberos behaviour
has been added for clarification:

-----8<------------------snip--------------8<--------------
New Kerberos behaviour
----------------------

A new parameter 'client use spnego principal' defaults to 'no' and
mean Samba will use CIFS/hostname to obtain a kerberos ticket, acting
more like Windows when using Kerberos against a CIFS server in
smbclient, winbind and other Samba client tools.  This will change
which servers we will successfully negotiate kerberos connections to.
This is due to Samba no longer trusting a server-provided hint which
is not available from Windows 2008 or later.  For correct operation
with all clients, all aliases for a server should be recorded as a as
a servicePrincipalName on the server's record in AD.
----->8------------------snap-------------->8--------------

You can find the complete updated release notes at
http://samba.org/samba/history/samba-3.5.9.html.

Cheers,
Karolin

-- 
Samba			http://www.samba.org
SerNet			http://www.sernet.de
sambaXP			http://www.sambaxp.org


From kseeger at samba.org  Tue Jul 26 12:17:17 2011
From: kseeger at samba.org (Karolin Seeger)
Date: Tue, 26 Jul 2011 20:17:17 +0200
Subject: [Announce] Samba 3.5.10, 3.4.14 and 3.3.16 Security Releases Available
Message-ID: <E1QlmBy-006ITD-2L@intern.SerNet.DE>

Release Announcements
=====================

Samba 3.5.10, 3.4.14 and 3.3.16 are security releases in order to
address CVE-2011-2522 (Cross-Site Request Forgery in SWAT) and
CVE-2011-2694 (Cross-Site Scripting vulnerability in SWAT).


o  CVE-2011-2522:
   The Samba Web Administration Tool (SWAT) in Samba versions
   3.0.x to 3.5.9 are affected by a cross-site request forgery.


o  CVE-2011-2694:
   The Samba Web Administration Tool (SWAT) in Samba versions
   3.0.x to 3.5.9 are affected by a cross-site scripting
   vulnerability.

Please note that SWAT must be enabled in order for these
vulnerabilities to be exploitable. By default, SWAT
is *not* enabled on a Samba install.


Changes
-------


o   Kai Blin <kai at samba.org>
    * BUG 8289: SWAT contains a cross-site scripting vulnerability.
    * BUG 8290: CSRF vulnerability in SWAT.



================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/stable

The release notes are available online at:

        http://www.samba.org/samba/history/samba-3.5.10.html
        http://www.samba.org/samba/history/samba-3.4.14.html
        http://www.samba.org/samba/history/samba-3.3.16.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team




From kseeger at samba.org  Tue Jul 26 14:36:54 2011
From: kseeger at samba.org (Karolin Seeger)
Date: Tue, 26 Jul 2011 22:36:54 +0200
Subject: [Announce] Samba 3.6.0rc3 Available for Download
Message-ID: <E1QloN5-006QHB-6N@intern.SerNet.DE>

Release Announcements
---------------------

This is the third release candidate of Samba 3.6.0.  This is *not*
intended for production environments and is designed for testing
purposes only.  Please report any defects via the Samba bug reporting
system at https://bugzilla.samba.org/.


Major enhancements in Samba 3.6.0 include:


Changed security defaults
-------------------------

Samba 3.6 has adopted a number of improved security defaults that will
impact on existing users of Samba.

 client ntlmv2 auth = yes
 client use spnego principal = no
 send spnego principal = no

The impact of 'client ntlmv2 auth = yes' is that by default we will not
use NTLM authentication as a client.  This applies to the Samba client
tools such as smbclient and winbind, but does not change the separately
released in-kernel CIFS client.  To re-enable the poorer NTLM encryption
set '--option=clientusentlmv2auth=no' on your smbclient command line, or
set 'client ntlmv2 auth = no' in your smb.conf

The impact of 'client use spnego principal = no' is that Samba will
use CIFS/hostname to obtain a kerberos ticket, acting more like
Windows when using Kerberos against a CIFS server in smbclient,
winbind and other Samba client tools.  This will change which servers
we will successfully negotiate kerberos connections to.  This is due
to Samba no longer trusting a server-provided hint which is not
available from Windows 2008 or later.  For correct operation with all
clients, all aliases for a server should be recorded as a as a
servicePrincipalName on the server's record in AD.  (For this reason,
this behavior change and parameter was also made in Samba 3.5.9)

The impact of 'send spnego principal = no' is to match Windows 2008 and
not to send this principal, making existing clients give more consistent
behaviour (more likely to fall back to NTLMSSP) between Samba and
Windows 2008, and between Windows versions that did and no longer use
this insecure hint.


SMB2 support
------------

SMB2 support in 3.6.0 is fully functional (with one omission),
and can be enabled by setting:

max protocol = SMB2

in the [global] section of your smb.conf and re-starting
Samba. All features should work over SMB2 except the modification
of user quotas using the Windows quota management tools.

As this is the first release containing what we consider
to be a fully featured SMB2 protocol, we are not enabling
this by default, but encourage users to enable SMB2 and
test it. Once we have enough confirmation from Samba
users and OEMs that SMB2 support is stable in wide user
testing we will enable SMB2 by default in a future Samba
release.


Internal Winbind passdb changes
-------------------------------

Winbind has been changed to use the internal samr and lsa rpc pipe to get
local user and group information instead of calling passdb functions. The
reason is to use more of our infrastructure and test this infrastructure by
using it. With this approach more code in Winbind is shared.


New Spoolss code
----------------

The spoolss and the old RAP printing code have been completely
overhauled and refactored.

All calls from lanman/printing code has been changed to go through the
spoolss RPC interfaces, this allows us to keep all checks in one place
and avoid special cases in the main printing code.
Printing code has been therefore confined within the spoolss code.

All the printing code, including the spoolss RPC interfaces has been
changed to use the winreg RPC interfaces to store all data.
All data has been migrated from custom, arbitrary TDB files to the
registry interface. This transition allow us to present correct data to
windows client accessing the server registry through the winreg RPC
interfaces to query for printer data. Data is served out from a real
registry implementation and therefore arguably 100% forward compatible.

Migration code from the previous TDB files formats is provided. This
code is automatically invoked the first time the new code is run on the
server. Although manual migration is also available using the 'net
printer migrate' command.

These changes not only make all the spoolss code much more closer to
"the spec", it also greatly improves our internal testing of both
spoolss and winreg interfaces, and reduces overall code duplication.

As part of this work, new tests have been also added to increase
coverage.

This code will also allow, in future, an easy transition to split out
the spooling functions into a separate daemon for those OEMs that do not
need printing functionality in their appliances, reducing the code
footprint.


ID Mapping Changes
------------------

The id mapping configuration has been a source of much grief in the past.
For this release, id mapping has been rewritten yet again with the goal
of making the configuration more simple and more coherent while keeping
the needed flexibility and even adding to the flexibility in some respects.

The major change that implies the configuration simplifications is at
the heart of the id mapping system: The separation of the "idmap alloc
system" that is responsible for the unix id counters in the tdb, tdb2
and ldap idmap backends from the id mapping code itself has been removed.
The sids_to_unixids operation is now atomic and encapsulates (if needed)
the action of allocating a unix id for a mapping that is to be created.
Consequently all idmap alloc configuration parameters have vanished and
it is hence now also not possible any more to specify an idmap alloc
backend different from the idmap backend. Each idmap backend uses its
own idmap unixid creation mechanism transparently.

As a consequence of the id mapping changes, the methods that are used
for storing and deleting id mappings have been removed from the winbindd
API. The "net idmap dump/restore" commands have been rewritten to
not speak through winbindd any more but directly act on the databases.
This is currently available for the tdb and tdb2 backends, the implementation
for ldap still missing.

The allocate_id functionality is preserved for the unix id creator of the
default idmap configuration is also used as the source of unix ids
for the group mapping database and for the posix attributes in a
ldapsam:editposix setup.

As part of the changes, the default idmap configuration has been
changed to be more coherent with the per-domain configuration.
The parameters "idmap uid", "idmap gid" and "idmap range" are now
deprecated in favour of the systematic "idmap config * : range"
and "idmap config * : backend" parameters. The reason for this change
is that the old options only provided an incomplete and hence deceiving
backwards compatibility, which was a source of many problems with
upgrades. By introducing this change in configuration, it should be
brought to the conciousness of the users that even the simple
id mapping is not working exactly as in Samba 3.0 versions any more.


Endpoint Mapper
---------------

As Microsoft is more and more relying on endpoint mapper and we didn't have a
complete implementation we decided to create an instance for Samba. The
endpoint mapper is like a DNS server but for ports. If you want to talk to a
certain RPC service over TCP/IP, you just ask the endpoint mapper on which
port it is running. Then you can connect to the service and make sure that it
is running.

The code is deactivated by default, because it needs more testing and it
doesn't scale yet. If you want to enable and test the endpoint mapper
you can set "rpc_server:epmapper = daemon" in the smb.conf file.


Internal restructuring
----------------------

Ongoing internal restructuring for better separation of internal subsystem to
achieve a faster build, smaller binaries and cleaner dependencies for the samba3
waf build.


SMB Traffic Analyzer
--------------------

Added the new SMB Traffic Analyzer (SMBTA) VFS module protocol 2
featuring encryption, multiple arguments, and easier parseability. A new
tool 'smbta-util' has been created to control the encryption behaviour
of SMBTA. For compatibility, SMBTA by default operates on version 1.
There are programs consuming the data that the module sends.

More information can be found on
http://holger123.wordpress.com/smb-traffic-analyzer/


NFS quota backend on Linux
--------------------------

A new nfs quota backend for Linux has been added that is based
on the existing Solaris/FreeBSD implementation. This allows samba
to communicate correct diskfree information for nfs imports that
are re-exported as samba shares.


######################################################################
Changes
#######

smb.conf changes
----------------

   Parameter Name                      Description     Default
   --------------                      -----------     -------

   async smb echo handler	       New	       No
   client ntlmv2 auth		       Changed Default Yes
   client use spnego principal	       New	       No
   ctdb locktime warn threshold	       New	       0
   idmap alloc backend		       Removed
   log writeable files on exit	       New	       No
   multicast dns register	       New	       Yes
   ncalrpc dir			       New
   send spnego principal	       New	       No
   smb2 max credits		       New	       128
   smb2 max read		       New	       1048576
   smb2 max trans		       New	       1048576
   smb2 max write		       New	       1048576
   username map cache time	       New	       0
   winbind max clients		       New	       200

   The variable substitutions for %i and %I no longer
   use IPv4 addresses mapped to IPv6, e.g. '::ffff:192.168.0.1',
   if the host has IPv6 enabled. Now %i and %I contain just
   '192.168.0.1'.

Commit Highlights
-----------------

o   Michael Adam <obnox at samba.org>
    * ID Mapping changes.


o   Jeremy Allison <jra at samba.org>
    * Implement SMB2 support.


o   Stefan Metzmacher <metze at samba.org>
    * Implement SMB2 support.


o   Andreas Schneider <asn at samba.org>
    * Add an Endpoint Mapper daemon.


Changes since 3.6.0rc2
----------------------

o   Michael Adam <obnox at samba.org>
    * BUG 8213: Fixes in idmap_autorid.
    * BUG 8217: Do not stat-check the share path in 'net conf addshare'.
    * BUG 8281: Fix build of examples/VFS/*.


o   Jeremy Allison <jra at samba.org>
    * BUG 8083: Fix "inherit owner = yes" with vfs_acl_xattr or vfs_acl_tdb
      module.
    * BUG 8211: Fix "inherit owner = yes" when "inherit permissions = yes"
      is set.
    * BUG 8219: Fix SMB Panic from Windows 7 client.
    * BUG 8254: Fix "acl check permissions = no".
    * BUG 8293: Fix log file rotating in SMB2.
    * BUG 8304: Fix uninitialized variable in error path.
    * BUG 8307: brl_close_fnum does not call SMB_VFS_BRL_UNLOCK_WINDOWS on all
      locks.
    * BUG 8310: toupper_ascii() is broken on big-endian systems.
    * BUG 8314: Fix smbd crash with unknown user.


o   Christian Ambach <ambi at samba.org>
    * BUG 8231: Fix crash bug in 'net cache get'.
    * BUG 8244: Fix copying files larger than 2 GB to a Samba share.
    * BUG 8263: Fix build with --with-fake-kaserver or --with-vfs-afsacl.
    * BUG 8278: Fix smbd panic when CTDB is unhealthy.
    * BUG 8286: Fix smbd crash on premature end of smb2 conn.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 8230: Move .nmbd socket directory to non-hidden name PREFIX/var/nmbd.
    * Mark 'time offset' parameter as deprecated.


o   Gregor Beck <gbeck at sernet.de>
    * BUG 8193: Add new command 'enumerate_recursive'.
    * BUG 8253: Fix Winbind panic if verify_idpool() fails.


o   Kai Blin <kai at samba.org>
    * BUG 8289: Fix possible XSS attack (CVE-2011-2694).
    * BUG 8290: Fix Cross-Site Request Forgery in SWAT (CVE-2011-2522).


o   G?nther Deschner <gd at samba.org>
    * BUG 7888: Deal with buggy 3.0 based PDCs.
    * BUG 8214: Fix smbd crash on printer driver upgrade.
    * BUG 8235: Fix smbd crash on startup caused by migrate_printer().


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 8262: Fix build of vfs_commit.


o   G?nter Kukkukk <linux at kukkukk.com>
    * BUG 8305: Fix segfault in nmbd when using 'smbtree ...'..


o   Volker Lendecke <vl at samba.org>
    * BUG 7841: Explicitly pass domain_sid to wbint_LookupRids().
    * BUG 8102: Do not allow to change file ACLs from normal domusers.
    * BUG 8247: Fix Coverity ID 2582: FORWARD_NULL.


o   Herb Lewis <hlewis at panasas.com>
    * BUG 8216: Make Winbind returning correct results with 'sids2xids'.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 8102: Do not allow to change file ACLs from normal domusers.
    * BUG 8195: Make rpc client code working against NT4 servers.
    * BUG 8224: Fix the build on FreeBSD.
    * BUG 8226: Use c99 initializers which are supported by old gcc 2.95
      compilers.
    * BUG 8260: Fix DCERPC responses with fragments larger than 1024 bytes.
    * BUG 8264: Fix Valgrind bugs in svcctl.
    * BUG 8276: Close all sockets attached to a subnet in close_subnet().
    * BUG 8292: Fix a major architectural flaw in the SMB2 server code.


o   Andreas Schneider <asn at samba.org>
    * BUG 8215: Fix Winbind unix username lookup.
    * BUG 8240: Fix Valgrind warnings in winreg/spoolss code.


Changee since 3.6.0rc1
----------------------

o   Michael Adam <obnox at samba.org>
    * BUG 8200: Add support for multiple writeable ldap idmap domains.


o   Jeremy Allison <jra at samba.org>
    * BUG 6911: Fix Kerberos authentication from Vista to Samba.
    * BUG 7054: Fix X account flag when "pwdlastset" is "0".
    * BUG 8133: Fix strange behavior for the file (whose filename first
      character is period ) in SMB2 case.
    * BUG 8144: Fix setting timestamp when touching files with CIFS clients.
    * BUG 8150: Ban "dos charset = utf8".
    * BUG 8153: Fix setting up getaddrinfo on IPv6-only machines.
    * BUG 8156: Fix 'net ads join' using the user's Kerberos ticket.
    * BUG 8157: Fix parsing a cups printcap file.
    * BUG 8163: Fix our asn.1 parser to handle negative numbers.
    * BUG 8175: Fix smbd deadlock.
    * BUG 8191: Split the ACE flag mapping between nfs4 and Windows into two
      separate functions.
    * BUG 8197: Winbind does not properly detect when a DC connection is dead.
    * BUG 8203: Winbind needs to reset the DC connection if an RPC times out.


o   Christian Ambach <ambi at samba.org>
    * BUG 8152: Fix smbd crash in release_ip().


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 8151: Deprecate security parameters.


o   Gregor Beck <gbeck at sernet.de>
    * BUG 8191: nfs4_acls: Pass ACE_FLAG_INHERITED_ACE up to the client/down
      from the client.
    * BUG 8192: Fix parsing of multiple flags in 'smbcacls'.


o   Sumit Bose <sbose at redhat.com>
    * BUG 8142: Fix typos in LDAP schema files.


o   Holger Hetterich <hhetter at novell.com>
    * BUG 8148: Default to protocol version 2 for SMB Traffic Analyzer.
    * BUG 8154: Actually make use of SMBTA subversion numbers.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 7998: Remove warning if IOV_MAX is not defined.


o   Jim McDonough <jmcd at samba.org>
    * BUG 8166: Don't lockout users when offline.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 8140: talloc: Fix Valgrind false positives and other backports.
    * BUG 8141: Fix wrong permissions on lp_ncalrpc_dir().


o   Andreas Schneider <asn at samba.org>
    * BUG 8155: Fix registering only named pipes on EPM for a service.


o   Volker Lendecke <vl at samba.org>
    * BUG 8159: Fix memory corruption in fetching cli->server_domain from the
      server.
    * BUG 8185: "security=server" does not obey guest login field.
    * BUG 8189: Support shadow copy display over SMB2.
    * BUG 8199: Fix potential crash in smbd handling smb2.


o   Samuel Thibault <sthibault at debian.org>
    * BUG 7998: Fix build on Hurd.


Changes since 3.6.0pre3
-----------------------

o   Jeremy Allison <jra at samba.org>
    * BUG 8111: CIFS VFS: Fix unexpected error on SMB posix open.
    * BUG 8112: POSIX extension opens of a directory are denied with EISDIR.
    * Remove fstrings from client struct.
    * BUGFIX when converting from safe_strcpy to strlcpy.
    * Fix off-by-one calculations with strlcpy.
    * Ensure we always write the correct incoming mid into the share mode table
      entries.
    * Fix the SMB2 oplock showstopper.


o   Christian Ambach <christian.ambach at de.ibm.com>
    * Convert user-specified domain to uppercase in libsmb.


o   G?nther Deschner <gd at samba.org>
    * BUG 8132: Fix filling printers location field when using cups.
    * Fix Coverity CID #2302: FORWARD_NULL.
    * Fix cups_pull_comment_location().
    * Fix double free of cups request.
    * Make cups_pull_comment_location() work again.
    * Fix potential crash bug in display_print_driver3().


o   Volker Lendecke <vl at samba.org>
    * Properly clean up in pthreadpool_init in case of failure.
    * Make plaintext session setup async.
    * Reduce fd load in Winbind children.
    * Avoid a potential 100% CPU loop in Winbind.
    * Tune broadcast namequeries for unique names.
    * Properly deal with exited winbind children.
    * Fix dup_smb2_vec3.
    * Fix return check in nss_wins.


Changes since 3.6.0pre2
-----------------------

o   Michael Adam <obnox at samba.org>
    * Fix build of tdb2.


o   Jeremy Allison <jra at samba.org>
    * BUG 8083: "inherit owner = yes" doesn't interact correctly with
      vfs_acl_xattr or vfs_acl_tdb module.
    * BUG 8088: rpccli_samr_chng_pswd_auth_crap segfaults if any input blobs
      are null.
    * Correctly detect and deny symlinks anywhere in a path (not just the last
      component) if "follow symlinks = no".


o   G?nther Deschner <gd at samba.org>
    * BUG 8106: Fix the build of 'smbget' on HP NonStop.
    * Fix timeout in rpc_pipe_open_tcp_port().
    * Fix the build of "--with-profiling-data".
    * Fix the AIX 5.3 build.


o   Sergey Korsak <skif at 1plus1.net>
    * BUG #8099: setpwent() actually does endpwent() and vice versa on FreeBSD.


o   Volker Lendecke <vl at samba.org>
    * BUG 8066: Fix wrong output in 'smbget'.
    * Fix Coverity IDs 986, 1340, 2047, 2299, 2307, 2325, 2335, 2336, 2470,
      2471, 2478.
    * nsswitch: Add 'wbinfo --lookup-sids'.
    * nsswitch: Add 'wbinfo --sids-to-unix-ids'.
    * Fix smbd with the async echo responder.
    * Fix the build of vfs_gpfs.c.
    * Add a 10-second timeout for the 445 or netbios connection to a DC.
    * Many pthreadpool fixes.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 7383: Listen on IPv6 addresses with IPV6_ONLY.


o   Rusty Russell <rusty at rustcorp.com.au>
    * Fix transaction recovery area for converted tdbs.



Changes since 3.6.0pre1
-----------------------

o   Michael Adam <obnox at samba.org>
    * ID Mapping changes.
    * Add "--option" to 'testparm'.


o   Jeremy Allison <jra at samba.org>
    * BUG 7080: Quota only shown when logged as root.
    * BUG 7863: Unlink may unlink wrong file when hardlinks are involved.
    * BUG 7996: Sgid bit lost on folder rename.
    * BUG 8040: Fix smbclient segfault with Cyrillic netbios names.
    * Fix crash bug on smbd shutdown when using FOPENDIR().
    * Ensure we don't return an incorrect access mask.
    * Fix bug against the new Mac client.
    * Fix leak in error path.
    * Fix error where Windows client spoolss returns WERR_INVALID_DATA.


o   Christian Ambach <christian.ambach at de.ibm.com>
    * Fix a segfault in the krb5 locator plugin.
    * Enable sharesec for registry shares.


o   Andrew Bartlett <abartlet at samba.org>
    * Fix memory leak in "security=share" and "force user".


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 7875: Fix 'nmbd --port'.
    * BUG 7880: cmd_spoolss_deletedriver() returned without checking all
      architectures.


o   Gregor Beck <gbeck at sernet.de>
    * Add new 'net idmap check' command.
    * Add new 'net idmap delete' command.
    * Fix segfault on missing input file in 'net idmap restore'.


o   Olly Betts <olly at survex.com>
    * Fix 'net usersidlist' not to skip every other user.


o   G?nther Deschner <gd at samba.org>
    * BUG 7690: Retry DNS updates when connection to one nameserver has failed.
    * BUG 7945: Let winbind try to use samlogon validation level 6.
    * Fix Coverity ID 2041.
    * Fix potential crash bug in spoolss_PrinterEnumValues push path.
    * Internal restructuring.
    * Don't wipe out all printer drivers when only one should be deleted.
    * Fix winbindd_dual_pam_auth_samlogon() for NT4 domains.


o   David Disseldorp <ddiss at suse.de>
    * BUG 7915: Fix cups pcap reload with no printers.
    * BUG 8040: Fix smbclient segfault with Cyrillic netbios names.
    * Fix memory leak in print_cups.c.
    * Remove duplicate cups response processing code.
    * Follow force user/group for driver IO.
    * Initiate pcap reload from parent smbd.
    * Reload shares after pcap cache fill.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 8033: Add explicit configure option whether or not to enable dmapi
      support.


o   Volker Lendecke <vl at samba.org>
    * BUG 7917: Fix bug in chain_reply.
    * BUG 7940: Fall back for utimes calls.
    * BUG 8009: Fix getting username in 'net rap session'.
    * BUG 8010: Use jenkins hash for str_checksum.
    * BUG 8042: Fix file creation on OS/X.
    * Fix numerous Coverity IDs.
    * Fix a memory leak in check_sam_security_info3.
    * Fix a segfault in the nss wrapper when libnss_winbind.so is not loadable.
    * Make "net sam list [users|workstations]" list only the right things.
    * Fix a potential memleak in secrets_fetch_trusted_domain_password.
    * Use the right credentials in check_netlogond_security.
    * Add support for AF_NETLINK addr notifications.
    * Fork multiple Winbind children per domain.
    * Fix a deadlock between smbd and ctdbd.
    * Add 'wbinfo --dc-info'.
    * Make "nmbd socket dir" configurable.
    * Fix a valgrind error.
    * Fix a memleak in receive_getdc_response.


o   Nikolay Martynov <mar.kolya at gmail.com>
    * BUG 8010: Fix inode generation so nautilus can count total dir size
      correctly.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 7567: Fix printing from Windows 7.
    * BUG 7899: Don't return "-1" on success in 'net rpc vampire keytab'.
    * BUG 7944: Catch lookup_names/sids schannel errors over ncacn_ip_tcp.
    * Don't grant SEC_STD_DELETE always to the owner of a file.
    * Fix segfaults on addrchange errors in Winbind.
    * Allow machine accounts as members in groupdb.


o   Jonathan Nieder <jrnieder at gmail.com>
    * BUG 6837: Make "rlimit_max below minimum Windows limit" notification less
      scary.


o   Andreas Schneider <asn at samba.org>
    * Add an Endpoint Mapper daemon.
    * Add IPv6 support for the endpoint mapper.
    * Free unused memory in the rpc server.
    * Fix possible segfaults in svcctl server.
    * Fix possible segfault with client_id in rpc server.
    * Add a 'svcctl shutdown' function to rpc server.
    * Fix a resource leak in net_afs.
    * Fix a resource leak in smbta-util.
    * Fix possible resource leak in net_usershare.
    * Fix possible resource leak in 'smbget'.
    * Fix possible resource leak in 'smbfilter'.
    * Fix a possible null pointer dereference in smbd.


o   Pavel Shilovsky <piastry at etersoft.ru>
    * BUG 7928: Fix problems with "kernel oplocks" option set to "no".
    * Ensure we send the direct levelII oplock break to the correct fid.


o   Simo Sorce <idra at samba.org>
    * Fix private libdir and codepages paths.


o   Andrew Tridgell <tridge at samba.org>
    * Fix a valgrind error.


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 3.6 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================

================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/rc/

The release notes are available online at:

	http://www.samba.org/samba/ftp/rc/WHATSNEW-3-6-0rc3.txt

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team

From kseeger at samba.org  Thu Aug  4 02:34:06 2011
From: kseeger at samba.org (Karolin Seeger)
Date: Thu, 4 Aug 2011 10:34:06 +0200
Subject: [Announce] Samba 3.5.11 Available for Download
Message-ID: <E1QotNW-00Frbb-Rc@intern.SerNet.DE>

===================================================================
				"Birthdays are nature's way of
				 telling us to eat more cake."

				 Source Unknown
==================================================================


Release Announcements
=====================

This is the latest stable release of Samba 3.5.

Major enhancements in Samba 3.5.11 include:

o  Fix access to Samba shares when Windows security patch KB2536276 is installed
   (bug #7460).
o  Fix DoS in Winbind and smbd with many file descriptors open (bug #7949).
o  Fix Winbind panics if verify_idpool() fails (bug #8253).


Changes since 3.5.10:
--------------------


o   Jeremy Allison <jra at samba.org>
    * BUG 7462: Make SA_RESETHAND conditional on its existance.
    * BUG 8254: Make "acl check permissions = no" working in all cases.


o   Gregor Beck <gbeck at sernet.de>
    * BUG 8253: Fix Winbind panics if verify_idpool() fails.


o   David Disseldorp <ddiss at suse.de>
    * BUG 8269: Stop spamming log with "Could not find child X -- ignoring"
      messages in smbd.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 7460: Include sys/file.h only when available.


o   Volker Lendecke <vl at samba.org>
    * BUG 7841: Explicitly pass domain_sid to wbint_LookupRids().
    * BUG 8238: Fix access to Samba shares when Windows security patch
      KB2536276 is installed.
    * BUG 8322: Add HAVE_FUNCTION_ATTRIBUTE_DESTRUCTOR.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 7841: Make WINBINDD_LOOKUPRIDS ask the right domain.
    * BUG 7949: Fix DoS in Winbind and smbd with many file descriptors open.
    * BUG 8276: Close all sockets attached to a subnet in close_subnet().


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 3.5 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/stable

The release notes are available online at:

        http://www.samba.org/samba/history/samba-3.5.11.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team




From kseeger at samba.org  Thu Aug  4 13:48:49 2011
From: kseeger at samba.org (Karolin Seeger)
Date: Thu, 4 Aug 2011 21:48:49 +0200
Subject: [Announce] Samba 3.5.11 Available for Download - correction
In-Reply-To: <E1QotNW-00Frbb-Rc@intern.SerNet.DE>
References: <E1QotNW-00Frbb-Rc@intern.SerNet.DE>
Message-ID: <E1Qp3uT-00GUIr-PU@intern.SerNet.DE>

Hey folks,

please note, that I listed "Fix DoS in Winbind and smbd with many file
descriptors open (bug #7949)" by accident in the release notes of Samba
3.5.11. This one was already fixed with Samba 3.5.7.

Many thanks to Vincent Danen <vdanen at redhat.com> for reporting!

http://samba.org/samba/history/samba-3.5.11.html has been updated
accordingly.

Cheers,
Karolin

On Thu, Aug 04, 2011 at 10:34:06AM +0200, Karolin Seeger wrote:
> ===================================================================
> 				"Birthdays are nature's way of
> 				 telling us to eat more cake."
> 
> 				 Source Unknown
> ==================================================================
> 
> 
> Release Announcements
> =====================
> 
> This is the latest stable release of Samba 3.5.
> 
> Major enhancements in Samba 3.5.11 include:
> 
> o  Fix access to Samba shares when Windows security patch KB2536276 is installed
>    (bug #7460).
> o  Fix DoS in Winbind and smbd with many file descriptors open (bug #7949).
> o  Fix Winbind panics if verify_idpool() fails (bug #8253).
> 
> 
> Changes since 3.5.10:
> --------------------
> 
> 
> o   Jeremy Allison <jra at samba.org>
>     * BUG 7462: Make SA_RESETHAND conditional on its existance.
>     * BUG 8254: Make "acl check permissions = no" working in all cases.
> 
> 
> o   Gregor Beck <gbeck at sernet.de>
>     * BUG 8253: Fix Winbind panics if verify_idpool() fails.
> 
> 
> o   David Disseldorp <ddiss at suse.de>
>     * BUG 8269: Stop spamming log with "Could not find child X -- ignoring"
>       messages in smbd.
> 
> 
> o   Bj?rn Jacke <bj at sernet.de>
>     * BUG 7460: Include sys/file.h only when available.
> 
> 
> o   Volker Lendecke <vl at samba.org>
>     * BUG 7841: Explicitly pass domain_sid to wbint_LookupRids().
>     * BUG 8238: Fix access to Samba shares when Windows security patch
>       KB2536276 is installed.
>     * BUG 8322: Add HAVE_FUNCTION_ATTRIBUTE_DESTRUCTOR.
> 
> 
> o   Stefan Metzmacher <metze at samba.org>
>     * BUG 7841: Make WINBINDD_LOOKUPRIDS ask the right domain.
>     * BUG 7949: Fix DoS in Winbind and smbd with many file descriptors open.
>     * BUG 8276: Close all sockets attached to a subnet in close_subnet().
> 
> 
> ######################################################################
> Reporting bugs & Development Discussion
> #######################################
> 
> Please discuss this release on the samba-technical mailing list or by
> joining the #samba-technical IRC channel on irc.freenode.net.
> 
> If you do report problems then please try to send high quality
> feedback. If you don't provide vital information to help us track down
> the problem then you will probably be ignored.  All bug reports should
> be filed under the Samba 3.5 product in the project's Bugzilla
> database (https://bugzilla.samba.org/).
> 
> 
> ======================================================================
> == Our Code, Our Bugs, Our Responsibility.
> == The Samba Team
> ======================================================================
> 
> 
> ================
> Download Details
> ================
> 
> The uncompressed tarballs and patch files have been signed
> using GnuPG (ID 6568B7EA).  The source code can be downloaded
> from:
> 
>         http://download.samba.org/samba/ftp/stable
> 
> The release notes are available online at:
> 
>         http://www.samba.org/samba/history/samba-3.5.11.html
> 
> Binary packages will be made available on a volunteer basis from
> 
>         http://download.samba.org/samba/ftp/Binary_Packages/
> 
> Our Code, Our Bugs, Our Responsibility.
> (https://bugzilla.samba.org/)
> 
>                         --Enjoy
>                         The Samba Team
> 
> 
> 
> 

-- 
Samba			http://www.samba.org
SerNet			http://www.sernet.de
sambaXP			http://www.sambaxp.org


From kseeger at samba.org  Tue Aug  9 06:32:14 2011
From: kseeger at samba.org (Karolin Seeger)
Date: Tue, 9 Aug 2011 14:32:14 +0200
Subject: [Announce] Samba 3.6.0 Available for Download
Message-ID: <E1QqlTi-003c5N-Jj@intern.SerNet.DE>

===================================================================
			"Forgiveness is the economy of the heart...
			 Forgiveness saves the expense of anger,
			 the cost of hatred, the waste of spirits."

			 Hannah More
==================================================================


Release Announcements
=====================

This is the first release of Samba 3.6.0.

Major enhancements in Samba 3.6.0 include:


Changed security defaults
-------------------------

Samba 3.6 has adopted a number of improved security defaults that will
impact on existing users of Samba.

 client ntlmv2 auth = yes
 client use spnego principal = no
 send spnego principal = no

The impact of 'client ntlmv2 auth = yes' is that by default we will not
use NTLM authentication as a client.  This applies to the Samba client
tools such as smbclient and winbind, but does not change the separately
released in-kernel CIFS client.  To re-enable the poorer NTLM encryption
set '--option=clientusentlmv2auth=no' on your smbclient command line, or
set 'client ntlmv2 auth = no' in your smb.conf

The impact of 'client use spnego principal = no' is that Samba will
use CIFS/hostname to obtain a kerberos ticket, acting more like
Windows when using Kerberos against a CIFS server in smbclient,
winbind and other Samba client tools.  This will change which servers
we will successfully negotiate kerberos connections to.  This is due
to Samba no longer trusting a server-provided hint which is not
available from Windows 2008 or later.  For correct operation with all
clients, all aliases for a server should be recorded as a as a
servicePrincipalName on the server's record in AD.  (For this reason,
this behavior change and parameter was also made in Samba 3.5.9)

The impact of 'send spnego principal = no' is to match Windows 2008 and
not to send this principal, making existing clients give more consistent
behaviour (more likely to fall back to NTLMSSP) between Samba and
Windows 2008, and between Windows versions that did and no longer use
this insecure hint.


SMB2 support
------------

SMB2 support in 3.6.0 is fully functional (with one omission),
and can be enabled by setting:

max protocol = SMB2

in the [global] section of your smb.conf and re-starting
Samba. All features should work over SMB2 except the modification
of user quotas using the Windows quota management tools.

As this is the first release containing what we consider
to be a fully featured SMB2 protocol, we are not enabling
this by default, but encourage users to enable SMB2 and
test it. Once we have enough confirmation from Samba
users and OEMs that SMB2 support is stable in wide user
testing we will enable SMB2 by default in a future Samba
release.


Internal Winbind passdb changes
-------------------------------

Winbind has been changed to use the internal samr and lsa rpc pipe to get
local user and group information instead of calling passdb functions. The
reason is to use more of our infrastructure and test this infrastructure by
using it. With this approach more code in Winbind is shared.


New Spoolss code
----------------

The spoolss and the old RAP printing code have been completely
overhauled and refactored.

All calls from lanman/printing code has been changed to go through the
spoolss RPC interfaces, this allows us to keep all checks in one place
and avoid special cases in the main printing code.
Printing code has been therefore confined within the spoolss code.

All the printing code, including the spoolss RPC interfaces has been
changed to use the winreg RPC interfaces to store all data.
All data has been migrated from custom, arbitrary TDB files to the
registry interface. This transition allow us to present correct data to
windows client accessing the server registry through the winreg RPC
interfaces to query for printer data. Data is served out from a real
registry implementation and therefore arguably 100% forward compatible.

Migration code from the previous TDB files formats is provided. This
code is automatically invoked the first time the new code is run on the
server. Although manual migration is also available using the 'net
printer migrate' command.

These changes not only make all the spoolss code much more closer to
"the spec", it also greatly improves our internal testing of both
spoolss and winreg interfaces, and reduces overall code duplication.

As part of this work, new tests have been also added to increase
coverage.

This code will also allow, in future, an easy transition to split out
the spooling functions into a separate daemon for those OEMs that do not
need printing functionality in their appliances, reducing the code
footprint.


ID Mapping Changes
------------------

The id mapping configuration has been a source of much grief in the past.
For this release, id mapping has been rewritten yet again with the goal
of making the configuration more simple and more coherent while keeping
the needed flexibility and even adding to the flexibility in some respects.

The major change that implies the configuration simplifications is at
the heart of the id mapping system: The separation of the "idmap alloc
system" that is responsible for the unix id counters in the tdb, tdb2
and ldap idmap backends from the id mapping code itself has been removed.
The sids_to_unixids operation is now atomic and encapsulates (if needed)
the action of allocating a unix id for a mapping that is to be created.
Consequently all idmap alloc configuration parameters have vanished and
it is hence now also not possible any more to specify an idmap alloc
backend different from the idmap backend. Each idmap backend uses its
own idmap unixid creation mechanism transparently.

As a consequence of the id mapping changes, the methods that are used
for storing and deleting id mappings have been removed from the winbindd
API. The "net idmap dump/restore" commands have been rewritten to
not speak through winbindd any more but directly act on the databases.
This is currently available for the tdb and tdb2 backends, the implementation
for ldap still missing.

The allocate_id functionality is preserved for the unix id creator of the
default idmap configuration is also used as the source of unix ids
for the group mapping database and for the posix attributes in a
ldapsam:editposix setup.

As part of the changes, the default idmap configuration has been
changed to be more coherent with the per-domain configuration.
The parameters "idmap uid", "idmap gid" and "idmap range" are now
deprecated in favour of the systematic "idmap config * : range"
and "idmap config * : backend" parameters. The reason for this change
is that the old options only provided an incomplete and hence deceiving
backwards compatibility, which was a source of many problems with
upgrades. By introducing this change in configuration, it should be
brought to the conciousness of the users that even the simple
id mapping is not working exactly as in Samba 3.0 versions any more.


Endpoint Mapper
---------------

As Microsoft is more and more relying on endpoint mapper and we didn't have a
complete implementation we decided to create an instance for Samba. The
endpoint mapper is like a DNS server but for ports. If you want to talk to a
certain RPC service over TCP/IP, you just ask the endpoint mapper on which
port it is running. Then you can connect to the service and make sure that it
is running.

The code is deactivated by default, because it needs more testing and it
doesn't scale yet. If you want to enable and test the endpoint mapper
you can set "rpc_server:epmapper = daemon" in the smb.conf file.


Internal restructuring
----------------------

Ongoing internal restructuring for better separation of internal subsystem to
achieve a faster build, smaller binaries and cleaner dependencies for the samba3
waf build.


SMB Traffic Analyzer
--------------------

Added the new SMB Traffic Analyzer (SMBTA) VFS module protocol 2
featuring encryption, multiple arguments, and easier parseability. A new
tool 'smbta-util' has been created to control the encryption behaviour
of SMBTA. For compatibility, SMBTA by default operates on version 1.
There are programs consuming the data that the module sends.

More information can be found on
http://holger123.wordpress.com/smb-traffic-analyzer/


NFS quota backend on Linux
--------------------------

A new nfs quota backend for Linux has been added that is based
on the existing Solaris/FreeBSD implementation. This allows samba
to communicate correct diskfree information for nfs imports that
are re-exported as samba shares.


######################################################################
Changes
#######

smb.conf changes
----------------

   Parameter Name                      Description     Default
   --------------                      -----------     -------

   async smb echo handler	       New	       No
   client ntlmv2 auth		       Changed Default Yes
   client use spnego principal	       New	       No
   ctdb locktime warn threshold	       New	       0
   idmap alloc backend		       Removed
   log writeable files on exit	       New	       No
   multicast dns register	       New	       Yes
   ncalrpc dir			       New
   send spnego principal	       New	       No
   smb2 max credits		       New	       128
   smb2 max read		       New	       1048576
   smb2 max trans		       New	       1048576
   smb2 max write		       New	       1048576
   username map cache time	       New	       0
   winbind max clients		       New	       200

   The variable substitutions for %i and %I no longer
   use IPv4 addresses mapped to IPv6, e.g. '::ffff:192.168.0.1',
   if the host has IPv6 enabled. Now %i and %I contain just
   '192.168.0.1'.

Commit Highlights
-----------------

o   Michael Adam <obnox at samba.org>
    * ID Mapping changes.


o   Jeremy Allison <jra at samba.org>
    * Implement SMB2 support.


o   Stefan Metzmacher <metze at samba.org>
    * Implement SMB2 support.


o   Andreas Schneider <asn at samba.org>
    * Add an Endpoint Mapper daemon.


Changes since 3.6.0rc3
----------------------

o   Michael Adam <obnox at samba.org>
    * BUG 8327: Fix the reload of the configuration, also reload activated
      registry shares.
    * BUG 8328: Cleanup of idmap_tdb2 code.


o   Jeremy Allison <jra at samba.org>
    * BUG 7462: Make SA_RESETHAND conditional on its existance.
    * BUG 8324: smbclient cannot list directories from a big-endian machine.
    * BUG 8335: File copy aborts with smb2_validate_message_id: bad message_id.


o   Christian Ambach <ambi at samba.org>
    * BUG 8330: Fix NFSv4 ACL merging logic.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 8326: WinXP cannot join a Samba3 domain with a 'even' hostname.


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 8303: db_ctdb_send_schedule_for_deletion() is not defined.


o   Alban Browaeys <prahal at yahoo.com>
    * BUG 8341: Fix segfault in libsmbclient.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 8362: Fix build issue on old glibc systems.


o   Volker Lendecke <vlendec at samba.org>
    * BUG 8343: Fix SMB2 crash reading with aio_fork beyond the end of file.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 8347: Fix regression for HP-UX, AIX and OSF.
    * BUG 8357: Make sure we grant credits on async read/write operations.
    * BUG 8358: Fix a bug in run_poll_events().


Changes since 3.6.0rc2
----------------------

o   Michael Adam <obnox at samba.org>
    * BUG 8213: Fixes in idmap_autorid.
    * BUG 8217: Do not stat-check the share path in 'net conf addshare'.
    * BUG 8281: Fix build of examples/VFS/*.


o   Jeremy Allison <jra at samba.org>
    * BUG 8083: Fix "inherit owner = yes" with vfs_acl_xattr or vfs_acl_tdb
      module.
    * BUG 8211: Fix "inherit owner = yes" when "inherit permissions = yes"
      is set.
    * BUG 8219: Fix SMB Panic from Windows 7 client.
    * BUG 8254: Fix "acl check permissions = no".
    * BUG 8293: Fix log file rotating in SMB2.
    * BUG 8304: Fix uninitialized variable in error path.
    * BUG 8307: brl_close_fnum does not call SMB_VFS_BRL_UNLOCK_WINDOWS on all
      locks.
    * BUG 8310: toupper_ascii() is broken on big-endian systems.
    * BUG 8314: Fix smbd crash with unknown user.


o   Christian Ambach <ambi at samba.org>
    * BUG 8231: Fix crash bug in 'net cache get'.
    * BUG 8244: Fix copying files larger than 2 GB to a Samba share.
    * BUG 8263: Fix build with --with-fake-kaserver or --with-vfs-afsacl.
    * BUG 8278: Fix smbd panic when CTDB is unhealthy.
    * BUG 8286: Fix smbd crash on premature end of smb2 conn.


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 8230: Move .nmbd socket directory to non-hidden name PREFIX/var/nmbd.
    * Mark 'time offset' parameter as deprecated.


o   Gregor Beck <gbeck at sernet.de>
    * BUG 8193: Add new command 'enumerate_recursive'.
    * BUG 8253: Fix Winbind panic if verify_idpool() fails.


o   Kai Blin <kai at samba.org>
    * BUG 8289: Fix possible XSS attack (CVE-2011-2694).
    * BUG 8290: Fix Cross-Site Request Forgery in SWAT (CVE-2011-2522).


o   G?nther Deschner <gd at samba.org>
    * BUG 7888: Deal with buggy 3.0 based PDCs.
    * BUG 8214: Fix smbd crash on printer driver upgrade.
    * BUG 8235: Fix smbd crash on startup caused by migrate_printer().


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 8262: Fix build of vfs_commit.


o   G?nter Kukkukk <linux at kukkukk.com>
    * BUG 8305: Fix segfault in nmbd when using 'smbtree ...'..


o   Volker Lendecke <vl at samba.org>
    * BUG 7841: Explicitly pass domain_sid to wbint_LookupRids().
    * BUG 8102: Do not allow to change file ACLs from normal domusers.
    * BUG 8247: Fix Coverity ID 2582: FORWARD_NULL.


o   Herb Lewis <hlewis at panasas.com>
    * BUG 8216: Make Winbind returning correct results with 'sids2xids'.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 8102: Do not allow to change file ACLs from normal domusers.
    * BUG 8195: Make rpc client code working against NT4 servers.
    * BUG 8224: Fix the build on FreeBSD.
    * BUG 8226: Use c99 initializers which are supported by old gcc 2.95
      compilers.
    * BUG 8260: Fix DCERPC responses with fragments larger than 1024 bytes.
    * BUG 8264: Fix Valgrind bugs in svcctl.
    * BUG 8276: Close all sockets attached to a subnet in close_subnet().
    * BUG 8292: Fix a major architectural flaw in the SMB2 server code.


o   Andreas Schneider <asn at samba.org>
    * BUG 8215: Fix Winbind unix username lookup.
    * BUG 8240: Fix Valgrind warnings in winreg/spoolss code.


Changee since 3.6.0rc1
----------------------

o   Michael Adam <obnox at samba.org>
    * BUG 8200: Add support for multiple writeable ldap idmap domains.


o   Jeremy Allison <jra at samba.org>
    * BUG 6911: Fix Kerberos authentication from Vista to Samba.
    * BUG 7054: Fix X account flag when "pwdlastset" is "0".
    * BUG 8133: Fix strange behavior for the file (whose filename first
      character is period ) in SMB2 case.
    * BUG 8144: Fix setting timestamp when touching files with CIFS clients.
    * BUG 8150: Ban "dos charset = utf8".
    * BUG 8153: Fix setting up getaddrinfo on IPv6-only machines.
    * BUG 8156: Fix 'net ads join' using the user's Kerberos ticket.
    * BUG 8157: Fix parsing a cups printcap file.
    * BUG 8163: Fix our asn.1 parser to handle negative numbers.
    * BUG 8175: Fix smbd deadlock.
    * BUG 8191: Split the ACE flag mapping between nfs4 and Windows into two
      separate functions.
    * BUG 8197: Winbind does not properly detect when a DC connection is dead.
    * BUG 8203: Winbind needs to reset the DC connection if an RPC times out.


o   Christian Ambach <ambi at samba.org>
    * BUG 8152: Fix smbd crash in release_ip().


o   Andrew Bartlett <abartlet at samba.org>
    * BUG 8151: Deprecate security parameters.


o   Gregor Beck <gbeck at sernet.de>
    * BUG 8191: nfs4_acls: Pass ACE_FLAG_INHERITED_ACE up to the client/down
      from the client.
    * BUG 8192: Fix parsing of multiple flags in 'smbcacls'.


o   Sumit Bose <sbose at redhat.com>
    * BUG 8142: Fix typos in LDAP schema files.


o   Holger Hetterich <hhetter at novell.com>
    * BUG 8148: Default to protocol version 2 for SMB Traffic Analyzer.
    * BUG 8154: Actually make use of SMBTA subversion numbers.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 7998: Remove warning if IOV_MAX is not defined.


o   Jim McDonough <jmcd at samba.org>
    * BUG 8166: Don't lockout users when offline.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 8140: talloc: Fix Valgrind false positives and other backports.
    * BUG 8141: Fix wrong permissions on lp_ncalrpc_dir().


o   Andreas Schneider <asn at samba.org>
    * BUG 8155: Fix registering only named pipes on EPM for a service.


o   Volker Lendecke <vl at samba.org>
    * BUG 8159: Fix memory corruption in fetching cli->server_domain from the
      server.
    * BUG 8185: "security=server" does not obey guest login field.
    * BUG 8189: Support shadow copy display over SMB2.
    * BUG 8199: Fix potential crash in smbd handling smb2.


o   Samuel Thibault <sthibault at debian.org>
    * BUG 7998: Fix build on Hurd.


Changes since 3.6.0pre3
-----------------------

o   Jeremy Allison <jra at samba.org>
    * BUG 8111: CIFS VFS: Fix unexpected error on SMB posix open.
    * BUG 8112: POSIX extension opens of a directory are denied with EISDIR.
    * Remove fstrings from client struct.
    * BUGFIX when converting from safe_strcpy to strlcpy.
    * Fix off-by-one calculations with strlcpy.
    * Ensure we always write the correct incoming mid into the share mode table
      entries.
    * Fix the SMB2 oplock showstopper.


o   Christian Ambach <christian.ambach at de.ibm.com>
    * Convert user-specified domain to uppercase in libsmb.


o   G?nther Deschner <gd at samba.org>
    * BUG 8132: Fix filling printers location field when using cups.
    * Fix Coverity CID #2302: FORWARD_NULL.
    * Fix cups_pull_comment_location().
    * Fix double free of cups request.
    * Make cups_pull_comment_location() work again.
    * Fix potential crash bug in display_print_driver3().


o   Volker Lendecke <vl at samba.org>
    * Properly clean up in pthreadpool_init in case of failure.
    * Make plaintext session setup async.
    * Reduce fd load in Winbind children.
    * Avoid a potential 100% CPU loop in Winbind.
    * Tune broadcast namequeries for unique names.
    * Properly deal with exited winbind children.
    * Fix dup_smb2_vec3.
    * Fix return check in nss_wins.


Changes since 3.6.0pre2
-----------------------

o   Michael Adam <obnox at samba.org>
    * Fix build of tdb2.


o   Jeremy Allison <jra at samba.org>
    * BUG 8083: "inherit owner = yes" doesn't interact correctly with
      vfs_acl_xattr or vfs_acl_tdb module.
    * BUG 8088: rpccli_samr_chng_pswd_auth_crap segfaults if any input blobs
      are null.
    * Correctly detect and deny symlinks anywhere in a path (not just the last
      component) if "follow symlinks = no".


o   G?nther Deschner <gd at samba.org>
    * BUG 8106: Fix the build of 'smbget' on HP NonStop.
    * Fix timeout in rpc_pipe_open_tcp_port().
    * Fix the build of "--with-profiling-data".
    * Fix the AIX 5.3 build.


o   Sergey Korsak <skif at 1plus1.net>
    * BUG #8099: setpwent() actually does endpwent() and vice versa on FreeBSD.


o   Volker Lendecke <vl at samba.org>
    * BUG 8066: Fix wrong output in 'smbget'.
    * Fix Coverity IDs 986, 1340, 2047, 2299, 2307, 2325, 2335, 2336, 2470,
      2471, 2478.
    * nsswitch: Add 'wbinfo --lookup-sids'.
    * nsswitch: Add 'wbinfo --sids-to-unix-ids'.
    * Fix smbd with the async echo responder.
    * Fix the build of vfs_gpfs.c.
    * Add a 10-second timeout for the 445 or netbios connection to a DC.
    * Many pthreadpool fixes.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 7383: Listen on IPv6 addresses with IPV6_ONLY.


o   Rusty Russell <rusty at rustcorp.com.au>
    * Fix transaction recovery area for converted tdbs.



Changes since 3.6.0pre1
-----------------------

o   Michael Adam <obnox at samba.org>
    * ID Mapping changes.
    * Add "--option" to 'testparm'.


o   Jeremy Allison <jra at samba.org>
    * BUG 7080: Quota only shown when logged as root.
    * BUG 7863: Unlink may unlink wrong file when hardlinks are involved.
    * BUG 7996: Sgid bit lost on folder rename.
    * BUG 8040: Fix smbclient segfault with Cyrillic netbios names.
    * Fix crash bug on smbd shutdown when using FOPENDIR().
    * Ensure we don't return an incorrect access mask.
    * Fix bug against the new Mac client.
    * Fix leak in error path.
    * Fix error where Windows client spoolss returns WERR_INVALID_DATA.


o   Christian Ambach <christian.ambach at de.ibm.com>
    * Fix a segfault in the krb5 locator plugin.
    * Enable sharesec for registry shares.


o   Andrew Bartlett <abartlet at samba.org>
    * Fix memory leak in "security=share" and "force user".


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 7875: Fix 'nmbd --port'.
    * BUG 7880: cmd_spoolss_deletedriver() returned without checking all
      architectures.


o   Gregor Beck <gbeck at sernet.de>
    * Add new 'net idmap check' command.
    * Add new 'net idmap delete' command.
    * Fix segfault on missing input file in 'net idmap restore'.


o   Olly Betts <olly at survex.com>
    * Fix 'net usersidlist' not to skip every other user.


o   G?nther Deschner <gd at samba.org>
    * BUG 7690: Retry DNS updates when connection to one nameserver has failed.
    * BUG 7945: Let winbind try to use samlogon validation level 6.
    * Fix Coverity ID 2041.
    * Fix potential crash bug in spoolss_PrinterEnumValues push path.
    * Internal restructuring.
    * Don't wipe out all printer drivers when only one should be deleted.
    * Fix winbindd_dual_pam_auth_samlogon() for NT4 domains.


o   David Disseldorp <ddiss at suse.de>
    * BUG 7915: Fix cups pcap reload with no printers.
    * BUG 8040: Fix smbclient segfault with Cyrillic netbios names.
    * Fix memory leak in print_cups.c.
    * Remove duplicate cups response processing code.
    * Follow force user/group for driver IO.
    * Initiate pcap reload from parent smbd.
    * Reload shares after pcap cache fill.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 8033: Add explicit configure option whether or not to enable dmapi
      support.


o   Volker Lendecke <vl at samba.org>
    * BUG 7917: Fix bug in chain_reply.
    * BUG 7940: Fall back for utimes calls.
    * BUG 8009: Fix getting username in 'net rap session'.
    * BUG 8010: Use jenkins hash for str_checksum.
    * BUG 8042: Fix file creation on OS/X.
    * Fix numerous Coverity IDs.
    * Fix a memory leak in check_sam_security_info3.
    * Fix a segfault in the nss wrapper when libnss_winbind.so is not loadable.
    * Make "net sam list [users|workstations]" list only the right things.
    * Fix a potential memleak in secrets_fetch_trusted_domain_password.
    * Use the right credentials in check_netlogond_security.
    * Add support for AF_NETLINK addr notifications.
    * Fork multiple Winbind children per domain.
    * Fix a deadlock between smbd and ctdbd.
    * Add 'wbinfo --dc-info'.
    * Make "nmbd socket dir" configurable.
    * Fix a valgrind error.
    * Fix a memleak in receive_getdc_response.


o   Nikolay Martynov <mar.kolya at gmail.com>
    * BUG 8010: Fix inode generation so nautilus can count total dir size
      correctly.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 7567: Fix printing from Windows 7.
    * BUG 7899: Don't return "-1" on success in 'net rpc vampire keytab'.
    * BUG 7944: Catch lookup_names/sids schannel errors over ncacn_ip_tcp.
    * Don't grant SEC_STD_DELETE always to the owner of a file.
    * Fix segfaults on addrchange errors in Winbind.
    * Allow machine accounts as members in groupdb.


o   Jonathan Nieder <jrnieder at gmail.com>
    * BUG 6837: Make "rlimit_max below minimum Windows limit" notification less
      scary.


o   Andreas Schneider <asn at samba.org>
    * Add an Endpoint Mapper daemon.
    * Add IPv6 support for the endpoint mapper.
    * Free unused memory in the rpc server.
    * Fix possible segfaults in svcctl server.
    * Fix possible segfault with client_id in rpc server.
    * Add a 'svcctl shutdown' function to rpc server.
    * Fix a resource leak in net_afs.
    * Fix a resource leak in smbta-util.
    * Fix possible resource leak in net_usershare.
    * Fix possible resource leak in 'smbget'.
    * Fix possible resource leak in 'smbfilter'.
    * Fix a possible null pointer dereference in smbd.


o   Pavel Shilovsky <piastry at etersoft.ru>
    * BUG 7928: Fix problems with "kernel oplocks" option set to "no".
    * Ensure we send the direct levelII oplock break to the correct fid.


o   Simo Sorce <idra at samba.org>
    * Fix private libdir and codepages paths.


o   Andrew Tridgell <tridge at samba.org>
    * Fix a valgrind error.


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 3.6 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/stable

The release notes are available online at:

        http://www.samba.org/samba/history/samba-3.6.0.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team




From kseeger at samba.org  Tue Aug 23 12:17:43 2011
From: kseeger at samba.org (Karolin Seeger)
Date: Tue, 23 Aug 2011 20:17:43 +0200
Subject: [Announce] Samba 3.4.15 Available for Download
Message-ID: <E1QvvXj-0019J3-S9@intern.SerNet.DE>

=================================================================
			"Some cause happiness wherever they go;
			 others whenever they go."

			 Oscar Wilde
==================================================================


Release Announcements
=====================

This is the latest stable release of Samba 3.4.


Changes since 3.4.14
--------------------


o   David Disseldorp <ddiss at suse.de>
    * BUG 7836: Make newly added printers visible to clients,
    * BUG 7994: Make cups async printcap retrieval notify parent smbd of error	      status.
    * BUG 8269: Stop spamming log with "Could not find child X -- ignoring"
      messages.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 8362: Fix build issue on old glibc systems.


o   Jim McDonough <jmcd at samba.org>
    * BUG 6364: Pull realm from supplied username on libnet join.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 8276: Return the used number of sockets in create_listen_fdset().
    * BUG 8347: Fix CVE-2011-2522 regression for HP-UX, AIX and OSF.


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/stable

The release notes are available online at:

        http://www.samba.org/samba/history/samba-3.4.15.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team




From abartlet at samba.org  Mon Sep 12 23:16:12 2011
From: abartlet at samba.org (Andrew Bartlett)
Date: Tue, 13 Sep 2011 15:16:12 +1000
Subject: [ANNOUNCE] Samba 4.0 alpha 17
Message-ID: <1315890974.18236.6.camel@obed>

We are proud to a announce another alpha release of Samba 4.0, alpha 17

What's new in Samba 4.0 alpha17
===============================

Samba 4.0 will be the next version of the Samba suite and incorporates
all the technology found in both the Samba4 alpha series and the
stable 3.x series. The primary additional features over Samba 3.6 are
support for the Active Directory logon protocols used by Windows 2000
and above.

WARNINGS
========

Samba4 alpha17 is not a final Samba release, however we are now making
good progress towards a Samba 4.0 release, of which this is a preview.
Be aware the this release contains both the technology of Samba 3.6
(that you can reasonably expect to upgrade existing Samba 3.x releases
to) and the AD domain controller work previously known as 'samba4'.

While binaries for the stable file server are provided in this
release, for a stable, supported file server, Samba3 domain or AD
domain member installation, please run a Samba 3.x release, as we are
still bedding down the new single build system.

Samba4 is subjected to an awesome battery of tests on an automated
basis, we have found Samba 4.0 to be very stable in it's behavior.
However, we still recommend against upgrading production servers from
Samba 3.x release to Samba 4.0 alpha at this stage.

If you are upgrading, or looking to develop, test or deploy Samba 4.0
alpha releases, you should backup all configuration and data.

NEW FEATURES
============

Samba 4.0 alpha supports the server-side of the Active Directory logon
environment used by Windows 2000 and later, so we can do full domain
join and domain logon operations with these clients.

Our Domain Controller (DC) implementation includes our own built-in
LDAP server and Kerberos Key Distribution Center (KDC) as well as the
Samba3-like logon services provided over CIFS.  We correctly generate
the infamous Kerberos PAC, and include it with the Kerberos tickets we
issue.

Samba 4.0 alpha ships with two distinct file servers.  The file server
from the Samba 3.x series is 'smbd', and works with the binaries users
would expect from that series (nmbd, winbindd, smbpasswd).

Samba 4.0 also ships with a new file server, which is tuned to match
the requirements of an AD domain controller.  Users should not use the
file server in the 'samba' binary for non-DC related tasks.

A new scripting interface has been added to Samba 4, allowing Python
programs to interface to Samba's internals, and many tools and
internal workings of the DC code is now implemented in python.


CHANGES SINCE alpha16
=====================

For a list of changes since alpha 15, please see the git log.

$ git clone git://git.samba.org/samba.git
$ cd samba.git
$ git log release-4-0-0alpha16..release-4-0-0alpha17

Some major user-visible changes include:

samba-tool dbcheck
------------------

We now have an fsck-like tool for Samba's internal sam.ldb database.
Run samba-tool dbcheck after installation to check your database for
self-consistency.  Any database created with a previous Samba4 alpha
will have a very large number of consistency errors, which this tool
can fix.

See also the -H option to point dbcheck at a different database to the
default, and the --fix and --yes options to make changes and to not
prompt about those changes. 

After upgrading Samba, it is suggested that you do the following:

  - stop samba
  - take a backup copy of your sam.ldb and sam.ldb.d/* database files
  - run samba-tool dbcheck --cross-ncs --fix
  - use 'all' to say yes to fixing each type of error found
  - after it has finished, run dbcheck again to ensure it reports no
    errors

There will be a lot of errors fixed, particularly related to
bad/missing GUID values. This is due to a bug in previous releases
that left many objects with bad GUID values. These can all be fixed
using dbcheck with steps above.


New default paths
-----------------

The configure options for paths have changed again, and the
--enable-fhs option has been reinstated.  Packagers should attempt to
first package Samba using:

./configure --enable-fhs --prefix=/usr --sysconfdir=/etc --localstatedir=/var

and only after examining the location Samba uses with these options
should further changes be made.  Existing packaging scripts are not
expected to work unmodified, instead the Samba Team's aim is to
simplify such scripts for the long term. 

samba-tool domain samba3upgrade
-------------------------------

The new samba-tool domain samba3upgrade command is a supported upgrade route from Samba
3.x domain controllers to Samba 4.0 AD domain controllers.  This
provides a one-time migration of all users, domain members, passwords,
groups, group members and account polcies. 

This tool is still under development and may fail when presented with
an inconsistant Samba3 database (such as many LDAP configurations).
We hope to improve the error handling and recovery in these
situations, so please provide feedback using the samba-technical
mailing list.

KNOWN ISSUES
============

- Installation on systems without a system iconv (and developer
  headers at compile time) is known to cause errors when dealing with
  non-ASCII characters.

- In some situations, group members may not be upgraded by the
  samba-tool domain upgrade_from_s3 script

- The samba-tool domain join script will not join Windows 2000 domains.

- Domain member support in the 'samba' binary is in it's infancy, and
  is not comparable to the support found in winbindd.  As such, do not
  use the 'samba' binary (provided for the AD server) on a member
  server.

- There is no printing support in the 'samba' binary (use smbd instead)

- There is no NetBIOS browsing support (network neighbourhood) in the
  'samba' binary (use nmbd and smbd instead)

- Clock Synchronisation is critical.  Many 'wrong password' errors are
  actually due to Kerberos objecting to a clock skew between client
  and server.  (The NTP work in the previous alphas are partly to assist
  with this problem).

- The DRS replication code may fail.  Please contact the team if you
  experience issues with DRS replication, as we have fixed many issues
  here in response to feedback from our production users. 

RUNNING Samba 4.0 as an AD DC
=============================

A short guide to setting up Samba 4 as an AD DC can be found on the wiki:

  http://wiki.samba.org/index.php/Samba4/HOWTO

#######################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 4.0 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


Download Details
================

The release tarball is available from the following location:
 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0alpha17.tar.gz

This release has been signed using GPG with Andrew's GPG key 28B436BB).

 * http://download.samba.org/samba/ftp/samba4/samba-4.0.0alpha17.tar.asc

To verify that the signature is correct, make sure that the tarball has
been unzipped and run:

$ gpg --verify samba-4.0.0alpha17.tar.asc

Happy testing!

The Samba team
-- 
Andrew Bartlett                                http://samba.org/~abartlet/
Authentication Developer, Samba Team           http://samba.org



From abartlet at samba.org  Sat Sep 17 04:57:52 2011
From: abartlet at samba.org (Andrew Bartlett)
Date: Sat, 17 Sep 2011 03:57:52 -0700
Subject: [ANNOUNCE] Samba 4.0 alpha 17
In-Reply-To: <CAOj-5WBtPzp-MDRjEnB9=hmAM-JCpcMUED8aPJ5G2BruzfJzTQ@mail.gmail.com>
References: <1315890974.18236.6.camel@obed>
	<CAOj-5WBtPzp-MDRjEnB9=hmAM-JCpcMUED8aPJ5G2BruzfJzTQ@mail.gmail.com>
Message-ID: <1316257072.12267.2.camel@ruth>

On Thu, 2011-09-15 at 10:34 +0100, Sam Liddicott wrote:
> On Tue, Sep 13, 2011 at 6:16 AM, Andrew Bartlett <abartlet at samba.org> wrote:
> ...
> 
> >
> > After upgrading Samba, it is suggested that you do the following:
> >
> >  - stop samba
> >  - take a backup copy of your sam.ldb and sam.ldb.d/* database files
> >  - run samba-tool dbcheck --cross-ncs --fix
> >  - use 'all' to say yes to fixing each type of error found
> >  - after it has finished, run dbcheck again to ensure it reports no
> >    errors
> >
> >
> After upgrading to samba4 a17, when I run the upgrade command:
> 
> # samba-tool dbcheck --cross-ncs --fix
> 
> it shows:
> 
> WARNING: Module [kludge_acl] not found - do you need to set
> LDB_MODULES_PATH?
> Unable to load modules for tdb:///var/lib/samba/private/sam.ldb: (null)
> ERROR(ldb): uncaught exception - None
>   File "/usr/lib/python2.6/site-packages/samba/netcmd/__init__.py", line
> 145, in _run
>     return self.run(*args, **kwargs)
>   File "/usr/lib/python2.6/site-packages/samba/netcmd/dbcheck.py", line 72,
> in run
>     credentials=creds, lp=lp)
>   File "/usr/lib/python2.6/site-packages/samba/samdb.py", line 57, in
> __init__
>     options=options)
>   File "/usr/lib/python2.6/site-packages/samba/__init__.py", line 122, in
> __init__
>     self.connect(url, flags, options)
>   File "/usr/lib/python2.6/site-packages/samba/samdb.py", line 71, in
> connect
>     options=options)
> 
> strace shows that python is opening packages in
> /usr/lib/python2.6/site-packages/samba and does open
> /usr/lib/samba/libtdb-wrap.so and /usr/lib/samba/libtdb.so.1 and
> /usr/modules/samba/ldb/tdb.so
> 
> strace doesn't show any ultimate failure to open any file with "tdb" in the
> filename (although it does show search path open sequences which succeed in
> the end)
> 
> It does fail to open files which would match "*ldb.py*" but then there are
> no such files in the source either
> 
> Any tips?

Remove your existing installed binaries.  The failure is due to us
attempting to load a module (kludge_acl) from the previous installation.

Andrew Bartlett

-- 
Andrew Bartlett                                http://samba.org/~abartlet/
Authentication Developer, Samba Team           http://samba.org



From jra at samba.org  Tue Oct 11 18:20:17 2011
From: jra at samba.org (Jeremy Allison)
Date: Tue, 11 Oct 2011 17:20:17 -0700
Subject: Contributing to Samba: Samba now accepts corporate copyright.
Message-ID: <20111012002017.GB4228@samba2>

Here is a change we're instituting immediately to make it easier
for corporations to contribute code changes to Samba whilst still
retaining copyright ownership of the contributed code.

Feel free to ask any questions on the samba-technical at samba.org
list.

We'd like to thank our lawyers at the Software Freedom Law Center
for helping us to make this change.

Regards,

	The Samba Team.

-------------------------------------------------------------------
Samba is a project with distributed copyright ownership, which means
we prefer the copyright on parts of Samba to be held by individuals
rather than corporations if possible. There are historical legal
reasons for this, but one of the best ways to explain it is that it's
much easier to work with individuals who have ownership than corporate
legal departments if we ever need to make reasonable compromises with
people using and working with Samba.

We track the ownership of every part of Samba via git, our source code
control system, so we know the provenance of every piece of code that
is committed to Samba.

So if possible, if you're doing Samba changes on behalf of a company
who normally owns all the work you do please get them to assign
personal copyright ownership of your changes to you as an individual,
that makes things very easy for us to work with and avoids bringing
corporate legal departments into the picture.

If you can't do this we can still accept patches from you owned by
your employer under a standard employment contract with corporate
copyright ownership. It just requires a simple set-up process first.

We use a process very similar to the way things are done in the Linux
kernel community, so it should be very easy to get a sign off from
your corporate legal department. The only changes we've made are to
accommodate the licenses we use, which are GPLv3 and LGPLv3 (or later)
whereas the Linux kernel uses GPLv2.

The process is called signing.

How to sign your work
---------------------

Once you have permission to contribute to Samba from
your employer, simply email a copy of the following text
from your corporate email address to contributing at samba.org

------------------------------------------------------------
Samba Developer's Certificate of Origin. Version 1.0

By making a contribution to this project, I certify that:

(a) The contribution was created in whole or in part by me and I
    have the right to submit it under the appropriate
    version of the GNU General Public License; or

(b) The contribution is based upon previous work that, to the best
    of my knowledge, is covered under an appropriate open source
    license and I have the right under that license to submit that
    work with modifications, whether created in whole or in part
    by me, under the GNU General Public License, in the
    appropriate version; or

(c) The contribution was provided directly to me by some other
    person who certified (a) or (b) and I have not modified
    it.

(d) I understand and agree that this project and the
    contribution are public and that a record of the
    contribution (including all metadata and personal
    information I submit with it, including my sign-off) is
    maintained indefinitely and may be redistributed
    consistent with the Samba Team's policies and the
    requirements of the GNU GPL where they are relevant.

(e) I am granting this work to this project under the terms of both
    the GNU General Public License and the GNU Lesser General Public
    License as published by the Free Software Foundation; either version
    3 of these Licenses, or (at the option of the project) any later
    version.

    http://www.gnu.org/licenses/gpl-3.0.html
    http://www.gnu.org/licenses/lgpl-3.0.html
------------------------------------------------------------

We will maintain a copy of that email as a record that you have the
rights to contribute code to Samba under the required licenses whilst
working for the company where the email came from.

Then when sending in a patch via the normal mechanisms described
above, add a line that states:

Signed-off-by: Random J Developer <random at developer.example.org>

using your real name and the email address you sent the original email
you used to send the Samba Developer's Certificate of Origin to us
(sorry, no pseudonyms or anonymous contributions.)

That's it ! Such code can then quite happily contain changes that have
copyright messages such as :

        (C) Example Corporation.

and can be merged into the Samba codebase in the same way as patches
from any other individual. You don't need to send in a copy of the
Samba Developer's Certificate of Origin for each patch, or inside each
patch. Just the sign-off message is all that is required once we've
received the initial email.

Have fun and happy Samba hacking !

The Samba Team.

From kseeger at samba.org  Thu Oct 20 11:41:06 2011
From: kseeger at samba.org (Karolin Seeger)
Date: Thu, 20 Oct 2011 19:41:06 +0200
Subject: [Announce] Samba 3.6.1 Available for Download
Message-ID: <E1RGwc7-00GE5x-4v@intern.SerNet.DE>

===================================================================
				"I'm desperately trying to figure
				 out why kamikaze pilots wore
				 helmets."

				 Dave Edison
==================================================================


Release Announcements
=====================

This is the latest stable release of Samba 3.6.

Major enhancements in Samba 3.6.1 include:

o  Fix smbd crashes triggered by Windows XP clients (bug #8384).
o  Fix a Winbind race leading to 100% CPU load (bug #8409).
o  Several SMB2 fixes.
o  The VFS ACL modules are no longer experimental but production-ready.


Changes since 3.6.0:
--------------------


o   Michael Adam <obnox at samba.org>
    * BUG 8368: Fix the fallback to the deprecated spelling idmap:script.


o   Jeremy Allison <jra at samba.org>
    * BUG 7509: smb_acl_to_posix: ACL is invalid for set (Invalid argument).
    * BUG 8229: Fix 'widelinks' regression.
    * BUG 8370: Fix vfs_chown_fsp.
    * BUG 8412: Fix "saving as" of MS Office 2007 (Word) documents on Samba
      shares with SMB2.
    * BUG 8422: Fix infinite loop in ACL module code.
    * BUG 8429: Compound SMB2 requests on an IPC connection can corrupt the
      reply stream.
    * BUG 8443: Be smarter about setting default permissions when a ACL_USER_OBJ
      isn't given.
    * BUG 8453: Fix smbclient segfaults when dialect option -m is used for
      legacy dialects.
    * BUG 8458: IE9 on Windows 7 cannot download files to samba 3.5.11 share.
    * BUG 8473: smb2_find uses a hard coded max reply size of 0x10000 instead of
      smb2_max_trans.
    * BUG 8474: SMB2 create doesn't cope with an Apple client using NULL blob in
      create.
    * BUG 8476: Samba asserts when SMB2 client breaks the crediting rules.
    * BUG 8477: Map to guest can return uninitialized blob of data.
    * BUG 8493: DFS breaks zip file extracting unless "follow symlinks = no"
      set.
    * BUG 8494: Remove "experimental" label on VFS ACL modules.
    * BUG 8507: smbd doesn't correctly honor the "force create mode" bits from a
      cifsfs create.
    * BUG 8509: Read-only handles on SAMR allow SAMR_DOMAIN_ACCESS_CREATE_USER.
    * BUG 8521: Winbind cache timeout expiry test was reversed.


o   Christian Ambach <ambi at samba.org>
    * BUG 8428: Fix wrong reply to DHnC (durable handle reconnect).
    * BUG 8518: SMB2 create call returns incorrect file allocation size.


o   Bj?rn Baumbach <bb at sernet.de>
    * BUG 8364: Fix the build of gpfs.c on RHEL 6.0 with gpfs 3.4.0-4.


o   Bram <fnzon at lists.wizbit.be>
    * BUG 7551: Return error of cli_push when 'put - /some/file' is used.


o   Ira Cooper <ira at wakeful.net>
    * BUG 8395: Optimize serverid_exists() for Solaris.
    * BUG 8442: NFSv4 DENY ACLs always include SYNCHRONIZE flag - blocking
      renames.


o   G?nther Deschner <gd at samba.org>
    * BUG 8401: registry/reg_format.c must include includes.h.
    * BUG 7465: Fix 'net ads join -k' when KRB5CCNAME is not set.


o   David Disseldorp <ddiss at suse.de>
    * BUG 8480: acl_xattr can free an invalid pointer if no blob is loaded.
    * BUG 8520: Fix SMB2 SMB2_OP_GETINFO and SMB2_OP_IOCTL parsing requirements.


o   Wilco Baan Hofman <wilco at baanhofman.nl>
    * BUG 8455: Fix uninitialized memory problem in group_sids_to_info3.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 8256: Add man vfs_aio_fork.
    * BUG 8363: Fix build of vfs_prealloc on SLES8.


o   Volodymyr Khomenko <Volodymyr_Khomenko at dell.com>
    * BUG 8515: Disallow "." in can_set_delete_on_close().


o   Volker Lendecke <vl at samba.org>
    * BUG 7864: Fix usage of cli_errstr().
    * BUG 8334: smb2: smbd logs "Invalid SMB packet: first request: 0x0008" and crashes.
    * BUG 8338: Add a fallback for missing open&x support in MAC OS/X Lion.
    * BUG 8360: OS/2 sends an unexpected write&x/read&x chain.
    * BUG 8385: Fix smbclient access to NT4 shares.
    * BUG 8409: Fix a Winbind race leading to 100% CPU load.
    * BUG 8420: Fix 'getent group' if trusted domains are not reachable.
    * BUG 8433: Fix segfault in iconv.c.
    * BUG 8455: Samba PDC is looking up only primary user group.


o   Herb Lewis <hlewis at panasas.com>
    * BUG 8365: Fix warning messages on Freebsd 4.6.2.


o   Stefan Metzmacher <metze at samba.org>
    * BUG 8407: SMB2 server can return requests out-of-order when processing
      a compound request.
    * BUG 8452: Check the wct of the incoming SMBnegprot responses.
    * BUG 8473: smb2_find uses a hard coded max reply size of 0x10000 instead of
      smb2_max_trans.
    * BUG 8476: Don't call smbd_terminate_connection in
      smb2_validate_message_id().
    * BUG 8503: SMB2_OP_CANCEL requests don't have to be signed.
    * BUG 8520: Fix SMB2 SMB2_OP_GETINFO and SMB2_OP_IOCTL parsing requirements.


o   SATOH Fumiyasu <fumiyas at osstech.co.jp>
    * BUG 8390: Fix the build of vfs_aixacl2.c.


o   Andreas Schneider <asn at samba.org>
    * BUG 8236: Empty notify servername.
    * BUG 8351: While migrating forms, don't fail if the form already exists.


o   Andrew Tridgell <tridge at samba.org>
    * BUG 8384: Fix smbd crashes triggered by Windows XP clients.


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 3.6 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/stable

The release notes are available online at:

        http://www.samba.org/samba/history/samba-3.6.1.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team




From jra at samba.org  Fri Oct 21 10:29:36 2011
From: jra at samba.org (Jeremy Allison)
Date: Fri, 21 Oct 2011 09:29:36 -0700
Subject: [Samba] [Announce] Samba 3.6.1 Available for Download--SAMBA
	Update
In-Reply-To: <003301cc8fd3$8849a160$98dce420$@de>
References: <E1RGwc7-00GE5x-4v@intern.SerNet.DE>
	<003301cc8fd3$8849a160$98dce420$@de>
Message-ID: <20111021162936.GC2349@samba2>

On Fri, Oct 21, 2011 at 11:26:37AM +0200, Daniel M?ller wrote:
> Can I seemless upgrade from samba 3.5.11 to samba 3.6.1 on centos 5.6?

Yes, it should just work. But of course prepare backups if
you're worried.

Jeremy.

From kseeger at samba.org  Wed Nov  2 12:58:00 2011
From: kseeger at samba.org (Karolin Seeger)
Date: Wed, 2 Nov 2011 19:58:00 +0100
Subject: [Announce] Samba 3.5.12 Available for Download
Message-ID: <E1RLg0f-00FEPF-7C@intern.SerNet.DE>

===================================================================
					"I am not an economist.
					 I am an honest man!"

					 Paul McCracken
==================================================================


Release Announcements
=====================

This is the latest stable release of Samba 3.5.

Major enhancements in Samba 3.5.12 include:

o  Fix race condition in Winbind (bug 7844).
o  The VFS ACL modules are no longer experimental but production-ready.


Changes since 3.5.11:
--------------------


o   Jeremy Allison <jra at samba.org>
    * BUG 7509: smb_acl_to_posix: ACL is invalid for set (Invalid argument).
    * BUG 7551: Return error of cli_push when 'put - /some/file' is used.
    * BUG 8156: 'net ads join' fails to use the user's kerberos ticket.
    * BUG 8370: Fix vfs_chown_fsp.
    * BUG 8422: Fix infinite loop in ACL module code.
    * BUG 8443: Be smarter about setting default permissions when a ACL_USER_OBJ
      isn't given.
    * BUG 8458: IE9 on Windows 7 cannot download files to samba 3.5.11 share.
    * BUG 8493: DFS breaks zip file extracting unless "follow symlinks = no"
      set.
    * BUG 8507: Make smbd correctly honor the "force create mode" bits from a
      cifsfs create.
    * BUG 8541: Fix readlink() on Linux clients if the symlink target is
      outside of the share.
    * BUG 8542: smbclient posix_open command fails to return correct info on
      open file.


o   Pierre Carrier <pcarrier at redhat.com>
    * BUG 8186: Allow changing the maximum number of simultaneous clients in
      Winbind through an smb.conf option.


o   G?nther Deschner <gd at samba.org>
    * BUG 7465: Fix 'net ads join -k' when KRB5CCNAME is not set.
    * BUG 7888: Deal with buggy 3.0 based PDCs.
    * BUG 8491: Fix some coverity issues.


o   David Disseldorp <ddiss at suse.de>
    * BUG 8480: acl_xattr can free an invalid pointer if no blob is loaded.


o   Bj?rn Jacke <bj at sernet.de>
    * BUG 8256: Add man vfs_aio_fork.
    * BUG 8362: Fix SWAT build issue on old glibc systems.
    * BUG 8531: Make DSO_EXPORTS_CMD more portable.


o   Volodymyr Khomenko <Volodymyr_Khomenko at dell.com>
    * BUG 8515: Disallow "." in can_set_delete_on_close().


o   Volker Lendecke <vl at samba.org>
    * BUG 7844: Fix race condition in Winbind.
    * BUG 8338: Add a fallback for missing open&x support in OS/X Lion.
    * BUG 8420: Fix getent group if trusted domains are not reachable.


o   Stefan Metzmacher <metze at samba.org
    * BUG 8347: Fix regression on HP-UX, AIX and OSF introduced by the fix for
      CVE-2011-2522.
    * BUG 8452: Check the wct of the incoming SMBnegprot responses in libsmb.
    * BUG 8491: Fix some coverity issues.


######################################################################
Reporting bugs & Development Discussion
#######################################

Please discuss this release on the samba-technical mailing list or by
joining the #samba-technical IRC channel on irc.freenode.net.

If you do report problems then please try to send high quality
feedback. If you don't provide vital information to help us track down
the problem then you will probably be ignored.  All bug reports should
be filed under the Samba 3.5 product in the project's Bugzilla
database (https://bugzilla.samba.org/).


======================================================================
== Our Code, Our Bugs, Our Responsibility.
== The Samba Team
======================================================================


================
Download Details
================

The uncompressed tarballs and patch files have been signed
using GnuPG (ID 6568B7EA).  The source code can be downloaded
from:

        http://download.samba.org/samba/ftp/stable

The release notes are available online at:

        http://www.samba.org/samba/history/samba-3.5.12.html

Binary packages will be made available on a volunteer basis from

        http://download.samba.org/samba/ftp/Binary_Packages/

Our Code, Our Bugs, Our Responsibility.
(https://bugzilla.samba.org/)

                        --Enjoy
                        The Samba Team




